<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>iTerm2 + oh-my-zsh = å¥½ç”¨çš„çµ‚ç«¯æ©Ÿ</title>
    <url>/2019/2019011001-osx-iterm-2-oh-my-zsh.html</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><a href="https://www.iterm2.com/">iTerm2</a> æ˜¯ macOS ä¸‹å¥½ç”¨çš„ terminal è»Ÿé«”ï¼Œåœ¨ iTerm2 ä¸‹å®‰è£ <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> ä»¥æ‰“é€ å€‹äººå°ˆå±¬é…·ç‚«å¥½ç”¨çš„ zsh command line ç’°å¢ƒ :)</p>
 <span id="more"></span>

<h2 id="å®‰è£-iTerm2"><a href="#å®‰è£-iTerm2" class="headerlink" title="å®‰è£ iTerm2"></a>å®‰è£ iTerm2</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew tap caskroom/cask</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew cask instal iterm2</span></span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading https://iterm2.com/downloads/stable/iTerm2-3_2_0.zip</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Verifying SHA-256 checksum for Cask &#x27;iterm2&#x27;.</span><br><span class="line">==&gt; Installing Cask iterm2</span><br><span class="line">==&gt; Moving App &#x27;iTerm.app&#x27; to &#x27;/Applications/iTerm.app&#x27;.</span><br><span class="line">ğŸº  iterm2 was successfully installed!</span><br></pre></td></tr></table></figure>



<h2 id="è¨­å®š-iTerm2"><a href="#è¨­å®š-iTerm2" class="headerlink" title="è¨­å®š iTerm2"></a>è¨­å®š iTerm2</h2><h3 id="è¨­å®š-Terminal-é¡è‰²"><a href="#è¨­å®š-Terminal-é¡è‰²" class="headerlink" title="è¨­å®š Terminal é¡è‰²"></a>è¨­å®š Terminal é¡è‰²</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Preferences &gt; Profiles &gt; Terminal &gt; Report Terminal Type</span><br></pre></td></tr></table></figure>

<p>è¨­å®šæˆ  <code>xterm-256color</code>ã€‚</p>
<h3 id="ä¿®æ”¹-color-scheme"><a href="#ä¿®æ”¹-color-scheme" class="headerlink" title="ä¿®æ”¹ color scheme"></a>ä¿®æ”¹ color scheme</h3><p>å¾ <a href="https://github.com/mbadolato/iTerm2-Color-Schemes">mbadolato&#x2F;iTerm2-Color-Schemes</a> ä¸‹è¼‰ <code>Solarized Dark - Patched.itermcolors</code>ï¼Œç„¶å¾Œå†å¾</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Preferences &gt; Profiles &gt; Colors &gt; Color Presets...</span><br></pre></td></tr></table></figure>

<p>æŒ‰ <code>importâ€¦</code> å°‡å®ƒè¼‰å…¥ï¼Œå†å¾ <code>Color Presetsâ€¦</code> é¸å®š <code>Solarized Dark - Patched.itermcolors</code> ä½œç‚º iTerm2 çš„ themeã€‚</p>
<h2 id="å­—å‹ç®¡ç†"><a href="#å­—å‹ç®¡ç†" class="headerlink" title="å­—å‹ç®¡ç†"></a>å­—å‹ç®¡ç†</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew tap caskroom/fonts</span></span><br><span class="line"></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">pulumi</span><br><span class="line"></span><br><span class="line">==&gt; Tapping homebrew/cask-fonts</span><br><span class="line">Cloning into &#x27;/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask-fonts&#x27;...</span><br><span class="line">remote: Counting objects: 1198, done.</span><br><span class="line">remote: Compressing objects: 100% (729/729), done.</span><br><span class="line">remote: Total 1198 (delta 762), reused 571 (delta 466), pack-reused 0</span><br><span class="line">Receiving objects: 100% (1198/1198), 228.83 KiB | 134.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (762/762), done.</span><br><span class="line">Tapped 1175 casks (1,215 files, 1MB).</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£-powerline-font-å­—å‹"><a href="#å®‰è£-powerline-font-å­—å‹" class="headerlink" title="å®‰è£ powerline font å­—å‹"></a>å®‰è£ powerline font å­—å‹</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew cask install font-sourcecodepro-nerd-font</span></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Tapping homebrew/cask</span><br><span class="line">Cloning into &#x27;/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask&#x27;...</span><br><span class="line">remote: Counting objects: 4139, done.</span><br><span class="line">remote: Compressing objects: 100% (4126/4126), done.</span><br><span class="line">remote: Total 4139 (delta 25), reused 624 (delta 10), pack-reused 0</span><br><span class="line">Receiving objects: 100% (4139/4139), 1.30 MiB | 1.36 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (25/25), done.</span><br><span class="line">Tapped 1 command and 4041 casks (4,148 files, 4.1MB).</span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading https://github.com/ryanoasis/nerd-fonts/releases/download/v2.0.0</span><br><span class="line">==&gt; Downloading from https://github-production-release-asset-2e65be.s3.amazonaws</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Verifying SHA-256 checksum for Cask &#x27;font-sourcecodepro-nerd-font&#x27;.</span><br><span class="line">==&gt; Installing Cask font-sourcecodepro-nerd-font</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Light Italic Nerd Font Complete.ttf&#x27; to &#x27;/Users/</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Bold Italic Nerd Font Complete.ttf&#x27; to &#x27;/Users/j</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Medium Nerd Font Complete.ttf&#x27; to &#x27;/Users/jerry/</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Medium Italic Nerd Font Complete.ttf&#x27; to &#x27;/Users</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro ExtraLight Nerd Font Complete.ttf&#x27; to &#x27;/Users/je</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro ExtraLight Italic Nerd Font Complete.ttf&#x27; to &#x27;/U</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Black Nerd Font Complete.ttf&#x27; to &#x27;/Users/jerry/L</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Black Italic Nerd Font Complete.ttf&#x27; to &#x27;/Users/</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Nerd Font Complete.ttf&#x27; to &#x27;/Users/jerry/Library</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Semibold Nerd Font Complete.ttf&#x27; to &#x27;/Users/jerr</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Semibold Italic Nerd Font Complete.ttf&#x27; to &#x27;/Use</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Light Nerd Font Complete.ttf&#x27; to &#x27;/Users/jerry/L</span><br><span class="line">==&gt; Moving Font &#x27;Sauce Code Pro Bold Nerd Font Complete.ttf&#x27; to &#x27;/Users/jerry/Li</span><br><span class="line">ğŸº  font-sourcecodepro-nerd-font was successfully installed!</span><br></pre></td></tr></table></figure>

<h3 id="iTerm2-è¨­å®š"><a href="#iTerm2-è¨­å®š" class="headerlink" title="iTerm2 è¨­å®š"></a>iTerm2 è¨­å®š</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Preferences &gt; Profiles &gt; Text &gt; Change Font</span><br></pre></td></tr></table></figure>

<p>é¸æ“‡ <code>SauceCodePro Nerd Font</code>ã€‚</p>
<p>æŸ¥è©¢å…¶ä»– nerd å­—å‹ï¼Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew cask search nerd</span></span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£-zsh"><a href="#å®‰è£-zsh" class="headerlink" title="å®‰è£ zsh"></a>å®‰è£ zsh</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install zsh</span></span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/zsh-5.6.2.high_sierra.bottl</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Pouring zsh-5.6.2.high_sierra.bottle.tar.gz</span><br><span class="line">ğŸº  /usr/local/Cellar/zsh/5.6.2: 1,478 files, 12.8MB</span><br></pre></td></tr></table></figure>

<h3 id="è¨­ç‚ºé è¨­çš„-shell"><a href="#è¨­ç‚ºé è¨­çš„-shell" class="headerlink" title="è¨­ç‚ºé è¨­çš„ shell"></a>è¨­ç‚ºé è¨­çš„ shell</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo sh -c <span class="string">&quot;echo <span class="subst">$(which zsh)</span> &gt;&gt; /etc/shells&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">chsh -s $(<span class="built_in">which</span> zsh)</span></span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£-oh-my-zsh"><a href="#å®‰è£-oh-my-zsh" class="headerlink" title="å®‰è£ oh-my-zsh"></a>å®‰è£ oh-my-zsh</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span></span><br><span class="line"></span><br><span class="line">Cloning Oh My Zsh...</span><br><span class="line">Cloning into &#x27;/Users/jerry/.oh-my-zsh&#x27;...</span><br><span class="line">remote: Counting objects: 898, done.</span><br><span class="line">remote: Compressing objects: 100% (754/754), done.</span><br><span class="line">remote: Total 898 (delta 25), reused 732 (delta 17), pack-reused 0</span><br><span class="line">Receiving objects: 100% (898/898), 595.72 KiB | 755.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (25/25), done.</span><br><span class="line">Looking for an existing zsh config...</span><br><span class="line">Found ~/.zshrc. Backing up to ~/.zshrc.pre-oh-my-zsh</span><br><span class="line">Using the Oh My Zsh template file and adding it to ~/.zshrc</span><br><span class="line">         __                                     __</span><br><span class="line">  ____  / /_     ____ ___  __  __   ____  _____/ /_</span><br><span class="line"> / __ \/ __ \   / __ `__ \/ / / /  /_  / / ___/ __ \</span><br><span class="line">/ /_/ / / / /  / / / / / / /_/ /    / /_(__  ) / / /</span><br><span class="line">\____/_/ /_/  /_/ /_/ /_/\__, /    /___/____/_/ /_/</span><br><span class="line">                        /____/                       ....is now installed!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please look over the ~/.zshrc file to select plugins, themes, and options.</span><br><span class="line"></span><br><span class="line">p.s. Follow us at https://twitter.com/ohmyzsh.</span><br><span class="line"></span><br><span class="line">p.p.s. Get stickers and t-shirts at https://shop.planetargon.com.</span><br></pre></td></tr></table></figure>

<p>å®‰è£å®Œæˆå¾Œæœƒå»ºç«‹è³‡æ–™å¤¾ <code>~/.oh-my-zsh</code></p>
<h3 id="å¥—ç”¨ä¸»é¡Œ"><a href="#å¥—ç”¨ä¸»é¡Œ" class="headerlink" title="å¥—ç”¨ä¸»é¡Œ"></a>å¥—ç”¨ä¸»é¡Œ</h3><p><strong>1. é–‹å•Ÿ <code>.zshrc</code></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">vim ~/.zshrc</span></span><br></pre></td></tr></table></figure>

<p><strong>2. å¥—ç”¨ä¸»é¡Œ</strong></p>
<p>é è¨­é¢¨æ ¼ç‚º <code>ZSH_THEME=&quot;robbyrussell&quot;</code>ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># ä½¿ç”¨agnosterä¸»é¡Œé è¨­ç‚ºrobbyrussell</span></span></span><br><span class="line">ZSH_THEME=&quot;agnoster&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># éš±è—ç”¨æˆ¶åç¨±(user@hostname)</span></span></span><br><span class="line">DEFAULT_USER=`id -un`</span><br></pre></td></tr></table></figure>

<p><strong>3. ç«‹å³å¥—ç”¨</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">exec</span> <span class="variable">$SHELL</span></span></span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£-powerlevel9k-ä¸»é¡Œ"><a href="#å®‰è£-powerlevel9k-ä¸»é¡Œ" class="headerlink" title="å®‰è£ powerlevel9k ä¸»é¡Œ"></a>å®‰è£ powerlevel9k ä¸»é¡Œ</h2><p><strong>1. ä¸‹è¼‰ powerlevel9k</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k</span></span><br><span class="line"></span><br><span class="line">Cloning into &#x27;/Users/jerry/.oh-my-zsh/custom/themes/powerlevel9k&#x27;...</span><br><span class="line">remote: Enumerating objects: 29, done.</span><br><span class="line">remote: Counting objects: 100% (29/29), done.</span><br><span class="line">remote: Compressing objects: 100% (23/23), done.</span><br><span class="line">remote: Total 6963 (delta 7), reused 16 (delta 6), pack-reused 6934</span><br><span class="line">Receiving objects: 100% (6963/6963), 1.96 MiB | 881.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (4447/4447), done.</span><br></pre></td></tr></table></figure>

<p><strong>2. å¥—ç”¨</strong></p>
<p>ä¿®æ”¹ <code>~/.zshrc</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨powerlevel9kä¸»é¡Œäº¦å¯é¸æ“‡ä½¿ç”¨agnosteræˆ–é è¨­robbyrussell</span></span><br><span class="line">ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éš±è—ç”¨æˆ¶åç¨±(user@hostname)</span></span><br><span class="line">DEFAULT_USER=`id -un`</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å«æœ‰iconçš„å­—å‹</span></span><br><span class="line">POWERLEVEL9K_MODE=&#x27;nerdfont-complete&#x27;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">command</span> line å·¦é‚Šæƒ³é¡¯ç¤ºçš„å…§å®¹(è³‡æ–™å¤¾è·¯å¾‘ã€è³‡æ–™å¤¾è®€å¯«ç‹€æ…‹ã€ç‰ˆæœ¬æ§åˆ¶è³‡è¨Š)</span></span><br><span class="line">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir dir_writable vcs) # &lt;= left prompt è¨­äº† &quot;dir&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">command</span> line å³é‚Šæƒ³é¡¯ç¤ºçš„å…§å®¹(ç‹€æ…‹ã€RAMã€CPUã€æ™‚é–“)</span></span><br><span class="line">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status ram load time)</span><br><span class="line">POWERLEVEL9K_PROMPT_ON_NEWLINE=true</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–é¡¯ç¤ºæŒ‡ä»¤å¯åƒè€ƒ <a href="https://github.com/bhilburn/powerlevel9k#available-prompt-segments">Available Prompt Segments</a></p>
<h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><h3 id="å®‰è£-zsh-completions"><a href="#å®‰è£-zsh-completions" class="headerlink" title="å®‰è£ zsh-completions"></a>å®‰è£ zsh-completions</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install zsh-completions</span></span><br><span class="line"></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 2 taps (homebrew/core, homebrew/cask).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">ark               bullet            hapi-fhir-cli     nano              prettier          rustup-init       vips</span><br><span class="line">bind              convox            libphonenumber    ntopng            qt                skaffold          xcodegen</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://github.com/zsh-users/zsh-completions/archive/0.28.0.tar.gz</span><br><span class="line">==&gt; Downloading from https://codeload.github.com/zsh-users/zsh-completions/tar.gz/0.28.0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Caveats</span><br><span class="line">To activate these completions, add the following to your .zshrc:</span><br><span class="line"></span><br><span class="line">  fpath=(/usr/local/share/zsh-completions $fpath)</span><br><span class="line"></span><br><span class="line">You may also need to force rebuild `zcompdump`:</span><br><span class="line"></span><br><span class="line">  rm -f ~/.zcompdump; compinit</span><br><span class="line"></span><br><span class="line">Additionally, if you receive &quot;zsh compinit: insecure directories&quot; warnings when attempting</span><br><span class="line">to load these completions, you may need to run this:</span><br><span class="line"></span><br><span class="line">  chmod go-w &#x27;/usr/local/share&#x27;</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/zsh-completions/0.28.0: 145 files, 1MB, built in 9 seconds</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>~/.zshrc</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">ZSH=$HOME/.oh-my-zsh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">zsh-completions</span></span><br><span class="line">fpath=(/usr/local/share/zsh-completions $fpath)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Rebuild <code>.zcompdump</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">rm</span> -f ~/.zcompdump; compinit</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="å®‰è£-zsh-autosuggestions"><a href="#å®‰è£-zsh-autosuggestions" class="headerlink" title="å®‰è£ zsh-autosuggestions"></a>å®‰è£ zsh-autosuggestions</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span></span><br><span class="line"></span><br><span class="line">Cloning into &#x27;/Users/jerry/.oh-my-zsh/custom/plugins/zsh-autosuggestions&#x27;...</span><br><span class="line">remote: Counting objects: 1783, done.</span><br><span class="line">remote: Total 1783 (delta 0), reused 0 (delta 0), pack-reused 1783</span><br><span class="line">Receiving objects: 100% (1783/1783), 394.96 KiB | 267.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1126/1126), done.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-users&#x2F;zsh-autosuggestions</a> - Fish-like autosuggestions for zsh</p>
<h3 id="å®‰è£-autojump"><a href="#å®‰è£-autojump" class="headerlink" title="å®‰è£ autojump"></a>å®‰è£ autojump</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install autojump</span></span><br><span class="line"></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 2 taps (homebrew/core, homebrew/cask).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">git-archive-all</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/autojump-22.5.1.high_sierra.bottle.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Pouring autojump-22.5.1.high_sierra.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Add the following line to your ~/.bash_profile or ~/.zshrc file (and remember</span><br><span class="line">to source the file to update your current session):</span><br><span class="line">  [ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh</span><br><span class="line"></span><br><span class="line">If you use the Fish shell then add the following line to your ~/.config/fish/config.fish:</span><br><span class="line">  [ -f /usr/local/share/autojump/autojump.fish ]; and source /usr/local/share/autojump/autojump.fish</span><br><span class="line"></span><br><span class="line">zsh completions have been installed to:</span><br><span class="line">  /usr/local/share/zsh/site-functions</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/autojump/22.5.1: 20 files, 168.2KB</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/wting">wting&#x2F;autojump</a> - A cd command that learns - easily navigate directories from the command line</p>
<h3 id="å•Ÿç”¨-plugin"><a href="#å•Ÿç”¨-plugin" class="headerlink" title="å•Ÿç”¨ plugin"></a>å•Ÿç”¨ plugin</h3><p>oh-my-zsh å…§å»ºçš„ plugin éƒ½æ”¾åœ¨ <code>~/.oh-my-zsh/plugins</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> ~/.oh-my-zsh/plugins</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>.zshrc</code> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">plugins=(git autojump zsh-autosuggestions)</span><br></pre></td></tr></table></figure>



<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://medium.com/statementdog-engineering/prettify-your-zsh-command-line-prompt-3ca2acc967f">è¶…ç°¡å–®ï¼ååˆ†é˜æ‰“é€ æ¼‚äº®åˆå¥½ç”¨çš„ zsh command line ç’°å¢ƒ</a></li>
<li><a href="https://andy6804tw.github.io/2018/01/01/iterm2-zsh-intro/#%E5%A5%97%E7%94%A8%E4%B8%BB%E9%A1%8C">macOSå¥½ç”¨çš„çµ‚ç«¯æ©Ÿ(iterm2+zsh+oh-my-zsh)</a></li>
<li><a href="http://huli.logdown.com/posts/402147-iterm2-zsh-better-environment">[å¿ƒå¾—] iTerm2 + zshï¼Œæ‰“é€ æ›´å¥½çš„å·¥ä½œç’°å¢ƒ</a></li>
<li><a href="https://code.tutsplus.com/tutorials/how-to-customize-your-command-prompt--net-24083">How to Customize Your Command Prompt</a></li>
<li>oh-my-zsh çš„ <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/themes">Themes</a></li>
</ul>
]]></content>
      <categories>
        <category>macos</category>
      </categories>
      <tags>
        <tag>iterm2</tag>
        <tag>zsh</tag>
        <tag>oh-my-zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ Telnet æ¸¬è©¦ TCP Port</title>
    <url>/2019/2019041002-use-telnet-to-test-tcp-port.html</url>
    <content><![CDATA[<p>æƒ³çŸ¥é“é ç«¯ port æ˜¯å¦ç”±é–‹é€šï¼Œä½¿ç”¨ telnet æ¸¬è©¦å°±å°äº†ï¼</p>
<span id="more"></span>

<h2 id="å®‰è£-Telnet"><a href="#å®‰è£-Telnet" class="headerlink" title="å®‰è£ Telnet"></a>å®‰è£ Telnet</h2><p>åœ¨ Mac ä¸‹ä½¿ç”¨ <code>Homebrew</code> å®‰è£</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install telnet</span><br></pre></td></tr></table></figure>

<h2 id="æ¸¬è©¦é ç«¯-port"><a href="#æ¸¬è©¦é ç«¯-port" class="headerlink" title="æ¸¬è©¦é ç«¯ port"></a>æ¸¬è©¦é ç«¯ port</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ telnet 172.28.7.100 80</span><br><span class="line"></span><br><span class="line">Trying 172.28.7.100...</span><br><span class="line">Connected to 172.28.7.100.</span><br><span class="line">Escape character is <span class="string">&#x27;^]&#x27;</span>.</span><br></pre></td></tr></table></figure>
<p>é ç«¯é€£ç·šæˆåŠŸï¼Œè¡¨ç¤º 80 port å·²é–‹å•Ÿã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ telnet 172.28.7.100 25</span><br><span class="line"></span><br><span class="line">Trying 172.28.7.100...</span><br><span class="line">telnet: connect to address 172.28.7.100: Connection refused</span><br><span class="line">telnet: Unable to connect to remote host</span><br></pre></td></tr></table></figure>
<p>é ç«¯æ‹’çµ•é€£ç·šï¼Œè¡¨ç¤º 25 port æœªé–‹å•Ÿã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.gtwang.org/linux/troubleshooting-telnet/">ä½¿ç”¨ Telnet è¨ºæ–·å„ç¨®ä¼ºæœå™¨èˆ‡ç¶²è·¯é€£ç·šå•é¡Œ</a></li>
<li><a href="https://netbeez.net/blog/telnet-to-test-connectivity-to-tcp/">How to use telnet to test connectivity to TCP ports</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>telnet</tag>
      </tags>
  </entry>
  <entry>
    <title>HAProxy è² è¼‰æ¨¡å¼è¨­å®š</title>
    <url>/2019/2019041001-haproxy-configuration-balance.html</url>
    <content><![CDATA[<h2 id="æƒ…å¢ƒ"><a href="#æƒ…å¢ƒ" class="headerlink" title="æƒ…å¢ƒ"></a>æƒ…å¢ƒ</h2><p>æŸå¤©æ”¶åˆ°å®¢æˆ¶ç«¯æå‡ºå¸³è™Ÿç™»å…¥å¾Œï¼Œåªè¦ç™»å‡ºå¾Œï¼Œå°±ç„¡æ³•å†ç™»å…¥äº†ã€‚é€™æƒ…æ³åœ¨å°ˆæ¡ˆé©—æ”¶å¾Œä¸€æ®µæ™‚é–“éƒ½æœªç™¼ç”Ÿï¼Œè€Œæ˜¯åœ¨å®¢æˆ¶çš„ç¶²ç®¡å–®ä½é€²è¡Œäº†é‡è¨­ç¶²è·¯å­˜å–è¨­å®šå¾Œæ‰ç™¼ç”Ÿã€‚</p>
 <span id="more"></span>

<h2 id="éƒ¨ç½²æ¶æ§‹åŠé©—è­‰"><a href="#éƒ¨ç½²æ¶æ§‹åŠé©—è­‰" class="headerlink" title="éƒ¨ç½²æ¶æ§‹åŠé©—è­‰"></a>éƒ¨ç½²æ¶æ§‹åŠé©—è­‰</h2><p>éƒ¨ç½²æ¶æ§‹ï¼Œ</p>
<ol>
<li>Web server * 2</li>
<li>HAProxy * 2</li>
<li>DB server * 3 ï¼ˆä»¥ db cluster æ–¹å¼éƒ¨ç½²ï¼‰</li>
<li>ç™»å…¥æ¡ç”¨ JWT æ–¹å¼</li>
</ol>
<p>åŒæ¨£çš„è¨­å®šåŠéƒ¨ç½²æ–¹å¼ï¼ŒåŒ…å«ç¨‹å¼è¨­è¨ˆã€Web åŠ DB çš„éƒ¨ç½²ï¼Œåœ¨å…¶ä»–äºŒå€‹åœ°æ–¹éƒ½æ²’æœ‰ç™¼ç”Ÿï¼ˆæ”¤æ‰‹<br>ä½†åŸºæ–¼æŸäº›å› ç´ ï¼Œç„¡æ³•ç›´æ¥è«‹å®¢æˆ¶çš„ç¶²ç®¡å–®ä½å”åŠ©ï¼ˆOrz</p>
<h2 id="åªæ˜¯ä¸€å€‹è¨­å®šå€¼ï¼Œçµæœå¤§ä¸åŒ"><a href="#åªæ˜¯ä¸€å€‹è¨­å®šå€¼ï¼Œçµæœå¤§ä¸åŒ" class="headerlink" title="åªæ˜¯ä¸€å€‹è¨­å®šå€¼ï¼Œçµæœå¤§ä¸åŒ"></a>åªæ˜¯ä¸€å€‹è¨­å®šå€¼ï¼Œçµæœå¤§ä¸åŒ</h2><p>ç”±åŸå»ºç½® HAProxy çš„åŒäº‹æå‡ºï¼Œæ›´æ”¹ balance åƒæ•¸å€¼ï¼Œè®“åŒä¸€ä¾†æºçš„ client å¯ä»¥æŒçºŒè¨ªå•åŒä¸€ web serverï¼Œæˆ–è¨±å¯ä»¥è§£æ±ºï¼ˆå§ï¼Ÿ</p>
<h3 id="ä¿®æ”¹-config-file"><a href="#ä¿®æ”¹-config-file" class="headerlink" title="ä¿®æ”¹ config file"></a>ä¿®æ”¹ config file</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/haproxy/haproxy.cnf</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ° web server ç›¸é—œçš„è¨­å®š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">listen webserver</span><br><span class="line">    <span class="built_in">bind</span> 172.28.7.100:80 transparent</span><br><span class="line">    balance roundrobin</span><br><span class="line">    mode http</span><br><span class="line">    server web1 192.168.99.244:8080 check fall 5 inter 2000 rise 2</span><br><span class="line">    server web2 192.168.99.245:8080 check fall 5 inter 2000 rise 2</span><br></pre></td></tr></table></figure>
<blockquote>
<p>balance source<br>Of these options only the â€œbalance sourceâ€ requires any real discusion. This method will ensure that a request from the IP address 1.2.3.4 will always go to the same backend, assuming it remains alive. This allows you to sidestep any issues with cookie persistence if sessions are stored locally.</p>
</blockquote>
<p>å°‡ <code>balance roundrobin</code> ä¿®æ”¹æˆ <code>balance source</code>ï¼Œå†é‡å•“ HAProxy</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl restart haproxy</span><br></pre></td></tr></table></figure>

<p>æª¢æŸ¥ HAProxy æ˜¯å¦æ­£å¸¸é‹ä½œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl status haproxy</span><br></pre></td></tr></table></figure>

<p>äºŒå€‹ HAProxy æœå‹™éƒ½é€²è¡Œäº†ä»¥ä¸Šä¿®æ”¹ï¼Œå°±è§£æ±ºäº†ï¼ï¼</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://cbonte.github.io/haproxy-dconv/2.0/configuration.html#balance">HAProxy Documentation - Configuration Manual - balance</a></li>
<li><a href="https://ssorc.tw/5937">HAProxy å¯¦ç¾ load balance è² è¼‰å¹³è¡¡</a></li>
<li><a href="http://network.51cto.com/art/201108/286178.htm">HAProxyè´Ÿè½½å‡è¡¡å™¨çš„é…ç½®ä¸ç®—æ³•</a></li>
<li><a href="http://benjr.tw/95644">HAProxy è² è¼‰æ¨¡å¼</a></li>
<li><a href="https://blog.51cto.com/jinyudong/1910320">Haproxyçš„ä¸‰ç§ä¿æŒå®¢æˆ·ç«¯ä¼šè¯ä¿æŒæ–¹å¼</a></li>
<li><a href="https://segmentfault.com/a/1190000012745434">åŸºäºCookieçš„Haproxyé˜²æ­¢è¿‡é€Ÿè¯·æ±‚çš„æ–¹æ³•</a></li>
<li><a href="https://www.suse.com/zh-tw/documentation/sle-ha-12/book_sleha/data/sec_ha_lb_haproxy.html">ä½¿ç”¨ HAProxy è¨­å®šè² è¼‰å¹³è¡¡</a></li>
</ul>
]]></content>
      <categories>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>haproxy</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åœ¨ workspace å¿«é€Ÿé–‹å•Ÿ VS Code é€²è¡Œç·¨è¼¯</title>
    <url>/2019/2019042301-open-vs-code-from-command-line.html</url>
    <content><![CDATA[<p>ä¸€å®šè¦æœƒçš„æŠ€å·§ - å¾ command line ç›´æ¥é–‹å•Ÿ VS Code!</p>
<span id="more"></span>

<h2 id="æ“ä½œç’°å¢ƒ"><a href="#æ“ä½œç’°å¢ƒ" class="headerlink" title="æ“ä½œç’°å¢ƒ"></a>æ“ä½œç’°å¢ƒ</h2><ol>
<li>macOS: 10.13.6 High Sierra</li>
<li>iTerm2</li>
</ol>
<h2 id="åªè¦å››å€‹æ­¥é©Ÿ"><a href="#åªè¦å››å€‹æ­¥é©Ÿ" class="headerlink" title="åªè¦å››å€‹æ­¥é©Ÿ"></a>åªè¦å››å€‹æ­¥é©Ÿ</h2><ol>
<li>é–‹å•Ÿ VS Codeï¼ŒæŒ‰ä¸‹å¿«é€Ÿéµ <code>command + shift + p</code></li>
<li>åœ¨è·³å‡ºçš„å°è©±æ¡†å‘½ä»¤åˆ—å¾Œè¼¸å…¥æˆ–æ‰¾åˆ° <code>&gt;Shell Command: Install &#39;code&#39; command in PATH</code></li>
<li>ç­‰å¾…å®‰è£å®Œæˆå¾Œï¼Œé–‹å•Ÿ iTerm2</li>
<li>é€²å…¥ workspaceï¼Œç„¶å¾Œåœ¨ command line è¼¸å…¥ <code>code .</code> å°±å¯ä»¥é–‹å§‹ä½¿ç”¨ VS Code ç·¨è¼¯æ•´å€‹å·¥ä½œç›®éŒ„äº† :)</li>
</ol>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://code.visualstudio.com/docs/setup/mac">Visual Studio Code on macOS</a></li>
</ul>
]]></content>
      <categories>
        <category>editor</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†éš” Laravel log file ä»¥è§£æ±º Permission Deny å•é¡Œ</title>
    <url>/2019/2019042401-laravel-isolate-log-file.html</url>
    <content><![CDATA[<p>Laravel ç†ç•¶æœƒå°‡ç™¼ç”Ÿçš„ä¾‹å¤–éŒ¯èª¤ï¼ˆExceptionï¼‰å¯«åˆ° <code>storage/logs/laravel-yyyy-mm-dd.log</code>ï¼Œä½†æŸ¥è©¢è©²æª”æ¡ˆï¼Œå»çœ‹ä¸åˆ°æ‡‰æœ‰çš„éŒ¯èª¤å…§å®¹ï¼</p>
<span id="more"></span>

<h2 id="ç’°å¢ƒ"><a href="#ç’°å¢ƒ" class="headerlink" title="ç’°å¢ƒ"></a>ç’°å¢ƒ</h2><p>Docker å®‰è£çš„å…§å®¹ï¼Œ</p>
<ol>
<li>Ubuntu 18.04</li>
<li>Nginx 1.14</li>
<li>php7.3-fpm</li>
</ol>
<h2 id="æ¬Šé™å•é¡Œ-Permission-Deny"><a href="#æ¬Šé™å•é¡Œ-Permission-Deny" class="headerlink" title="æ¬Šé™å•é¡Œ Permission Deny"></a>æ¬Šé™å•é¡Œ Permission Deny</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ll storage/logs/</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 www-data www-data  30283 Apr 16 23:55 laravel-2019-04-16.log</span><br><span class="line">-rw-r--r--. 1 www-data www-data  30079 Apr 17 23:55 laravel-2019-04-17.log</span><br><span class="line">-rw-r--r--. 1 root     root      30283 Apr 18 23:55 laravel-2019-04-18.log</span><br><span class="line">-rw-r--r--. 1 root     root      38283 Apr 19 23:55 laravel-2019-04-19.log</span><br></pre></td></tr></table></figure>

<p>ç³»çµ±æœ‰ crontab å®šæ™‚è™•ç†äº‹å‹™ï¼Œåœ¨è™•ç†çš„åŒæ™‚æœƒä»¥ <code>Log::info()</code> è¼¸å‡ºï¼Œæ‰€ä»¥ç”¢ç”Ÿçš„ log æª”æ¡ˆï¼Œå…¶ owner æœƒæ˜¯ rootã€‚<br>ç¶²ç«™ç¨‹å¼é‹è¡Œçš„ user æ˜¯ <code>www-data</code>ï¼Œæ‰€ä»¥è‹¥ç™¼ç”Ÿç¨‹å¼çš„ Exception å°±æœƒå› ç‚º Permission Deny è€Œç„¡æ³•å¯«å…¥ï¼Œ</p>
<h2 id="è§£æ±ºæ–¹å¼"><a href="#è§£æ±ºæ–¹å¼" class="headerlink" title="è§£æ±ºæ–¹å¼"></a>è§£æ±ºæ–¹å¼</h2><h3 id="æˆåŠŸçš„è§£æ³•-Success"><a href="#æˆåŠŸçš„è§£æ³•-Success" class="headerlink" title="æˆåŠŸçš„è§£æ³•  Success"></a>æˆåŠŸçš„è§£æ³•  Success</h3><p>åœ¨ <code>bootstrap/app.php</code> æª”æ¡ˆå…§åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œ</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// isolate artisan console log and laravel service log</span></span><br><span class="line"><span class="comment">// https://stackoverflow.com/questions/27674597/laravel-daily-log-created-with-wrong-permissions</span></span><br><span class="line"><span class="variable">$app</span>-&gt;<span class="title function_ invoke__">configureMonologUsing</span>(function (Monolog\Logger <span class="variable">$monolog</span>) &#123;</span><br><span class="line">    <span class="variable">$filename</span> = <span class="title function_ invoke__">storage_path</span>(<span class="string">&#x27;logs/&#x27;</span> . <span class="title function_ invoke__">php_sapi_name</span>() . <span class="string">&#x27;-&#x27;</span> . <span class="title function_ invoke__">posix_getpwuid</span>(<span class="title function_ invoke__">posix_geteuid</span>())[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&#x27;.log&#x27;</span>);</span><br><span class="line">    <span class="variable">$monolog</span>-&gt;<span class="title function_ invoke__">pushHandler</span>(<span class="variable">$handler</span> = <span class="keyword">new</span> <span class="title class_">Monolog\Handler\RotatingFileHandler</span>(<span class="variable">$filename</span>, <span class="number">60</span>));</span><br><span class="line">    <span class="variable">$handler</span>-&gt;<span class="title function_ invoke__">setFilenameFormat</span>(<span class="string">&#x27;laravel-&#123;date&#125;-&#123;filename&#125;&#x27;</span>, <span class="string">&#x27;Y-m-d&#x27;</span>);</span><br><span class="line">    <span class="variable">$formatter</span> = <span class="keyword">new</span> <span class="title class_">LineFormatter</span>(<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable">$formatter</span>-&gt;<span class="title function_ invoke__">includeStacktraces</span>();</span><br><span class="line">    <span class="variable">$handler</span>-&gt;<span class="title function_ invoke__">setFormatter</span>(<span class="variable">$formatter</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ <code>php artisan command</code> åŸ·è¡Œæˆ–æ˜¯ crontab æ‰€ç”¢ç”Ÿçš„ log fileï¼Œå…¶ owner éƒ½æœƒæ˜¯ <code>root</code>ï¼Œ<br>å¦‚æœæ˜¯ç¶²ç«™é‹è¡Œæ™‚çš„ Exception æ‰€å»ºç«‹çš„ log fileï¼Œå‰‡ owner æœƒæ˜¯ <code>www-data</code>ï¼Œç¬¦åˆè¦çš„çµæœã€‚ ğŸ˜„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ll storage/logs/</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 root     root     2652 Apr 24 06:30 laravel-2019-04-24-cli-root.log</span><br><span class="line">-rw-r--r--. 1 www-data www-data  78B Apr 24 04:24 laravel-2019-04-24-fpm-fcgi-www-data.log</span><br></pre></td></tr></table></figure>


<h3 id="ç„¡æ³•å¾—åˆ°é æœŸæ•ˆæœçš„è™•ç†æ–¹å¼-failed"><a href="#ç„¡æ³•å¾—åˆ°é æœŸæ•ˆæœçš„è™•ç†æ–¹å¼-failed" class="headerlink" title="ç„¡æ³•å¾—åˆ°é æœŸæ•ˆæœçš„è™•ç†æ–¹å¼  failed"></a>ç„¡æ³•å¾—åˆ°é æœŸæ•ˆæœçš„è™•ç†æ–¹å¼  failed</h3><h4 id="ç”¨-www-data-åŸ·è¡Œ"><a href="#ç”¨-www-data-åŸ·è¡Œ" class="headerlink" title="ç”¨ www-data åŸ·è¡Œ"></a>ç”¨ www-data åŸ·è¡Œ</h4><p>ä»¥ <code>www-data</code> user é‹è¡Œ <code>php artisan command</code>ï¼Ÿ</p>
<p>åˆ‡æ›åŸ·è¡Œçš„ user èº«ä»½</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ su www-data</span><br><span class="line"></span><br><span class="line">This account is currently not available.</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ <code>www-data</code> user</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/passwd | grep www</span><br><span class="line"></span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br></pre></td></tr></table></figure>

<p>å›  <code>/usr/sbin/nologin</code> çš„é—œä¿‚ï¼Œæ‰€ä»¥ç„¡æ³•åˆ‡æ› userï¼Œ<br>ä¿®æ”¹æˆ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/passwd</span><br><span class="line"></span><br><span class="line">www-data:x:33:33:www-data:/var/www:/bin/bash</span><br></pre></td></tr></table></figure>

<p>ç„¶å¾Œä»¥ <code>www-data</code> èº«ä»½åŸ·è¡Œ php artisan ä»¥ç”¢ç”Ÿ log fileï¼Œæœƒå¾—åˆ° owner ç‚º <code>www-data</code> çš„ log fileï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ su www-data</span><br><span class="line">$ php artisan <span class="built_in">command</span>:xxxx</span><br><span class="line">$ ll storage/logs/</span><br></pre></td></tr></table></figure>

<p><strong>BUT</strong> crontab åŸ·è¡Œç”¢ç”Ÿçš„ log file ä»ç„¶ rootï¼ŒOrz</p>
<h4 id="ä¿®æ”¹-crontab"><a href="#ä¿®æ”¹-crontab" class="headerlink" title="ä¿®æ”¹ crontab"></a>ä¿®æ”¹ crontab</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">$ crontab -e</span><br><span class="line"></span><br><span class="line">* * * * * /usr/bin/php /home/www/code/artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹æˆ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">* * * * * www-data /usr/bin/php /home/www/code/artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>ç„¶å¾ŒåŸ·è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo service cron reload</span><br></pre></td></tr></table></figure>

<p>çµæœ cron ç„¡æ³•é‹ä½œï¼ŒğŸ˜³</p>
<h5 id="å¯èƒ½éœ€è¦é€™æ¨£åšï¼ˆæœªé©—è­‰ï¼‰"><a href="#å¯èƒ½éœ€è¦é€™æ¨£åšï¼ˆæœªé©—è­‰ï¼‰" class="headerlink" title="å¯èƒ½éœ€è¦é€™æ¨£åšï¼ˆæœªé©—è­‰ï¼‰"></a>å¯èƒ½éœ€è¦é€™æ¨£åšï¼ˆæœªé©—è­‰ï¼‰</h5><p>ç‚º <code>www-data</code> å»ºç«‹è‡ªå·±çš„ crontab æ’ç¨‹ï¼Œå¯åƒè€ƒ [å…³äº Laravel æ—¥å¿—æƒé™] <a href="https://learnku.com/articles/6775/about-laravel-log-permissions" title="å…³äº Laravel æ—¥å¿—æƒé™">1</a> ä¸‹æ–¹ç•™è¨€</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ su www-data</span><br><span class="line">$ crontab -u www-data -e</span><br></pre></td></tr></table></figure>

<h4 id="æ”¾æ£„æ¸¬è©¦"><a href="#æ”¾æ£„æ¸¬è©¦" class="headerlink" title="æ”¾æ£„æ¸¬è©¦"></a>æ”¾æ£„æ¸¬è©¦</h4><p>å› ç’°å¢ƒæ˜¯åœ¨ Docker å…§ï¼Œä¸Šè¿°çš„æ­¥é©Ÿå·²ç¶“ç„¡æ³•è¼•æ˜“ä»¥æ’°å¯« shell script é”æˆè¦çš„çµæœï¼Œè‹¥éœ€è¦äººå·¥ä»‹å…¥ä¿®æ”¹ï¼Œå‰‡ä¸ç¬¦åˆä½¿ç”¨ Docker ç„¡ç—›é–‹ç™¼åŸå‰‡ XDã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://stackoverflow.com/questions/27674597/laravel-daily-log-created-with-wrong-permissions">Laravel daily log created with wrong permissions</a></li>
<li><a href="https://laravel.com/docs/5.5/errors#configuration">Laravel 5.5 - Errors &amp; Logging - Configuration</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>laravel</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ Homebrew å®‰è£ anaconda</title>
    <url>/2019/2019042601-install-anaconda-with-homebrew.html</url>
    <content><![CDATA[<p>åªè¦ç°¡å–®å¹¾è¡Œå‘½ä»¤ï¼Œå°±å¯ä»¥å¿«é€Ÿå®‰è£å¥½ [anaconda] <a href="https://www.anaconda.com/" title="anaconda">1</a>ï¼Œä¸¦ä¸”ä½¿ç”¨ [jupyter notebook] <a href="https://jupyter.org/">2</a>ã€‚</p>
<span id="more"></span>

<h2 id="ä½¿ç”¨-Homebrew-å®‰è£-anaconda"><a href="#ä½¿ç”¨-Homebrew-å®‰è£-anaconda" class="headerlink" title="ä½¿ç”¨ Homebrew å®‰è£ anaconda"></a>ä½¿ç”¨ Homebrew å®‰è£ anaconda</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew cask install anaconda</span><br><span class="line"></span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading https://repo.anaconda.com/archive/Anaconda3-2019.03-MacOSX-x86_64.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">###### ################################################################## 100.0%</span></span><br><span class="line"></span><br><span class="line">==&gt; Verifying SHA-256 checksum <span class="keyword">for</span> Cask <span class="string">&#x27;anaconda&#x27;</span>.</span><br><span class="line">==&gt; Installing Cask anaconda</span><br><span class="line">==&gt; Running installer script <span class="string">&#x27;Anaconda3-2019.03-MacOSX-x86_64.sh&#x27;</span></span><br><span class="line">Password:</span><br><span class="line">PREFIX=/usr/local/anaconda3</span><br><span class="line">installing: python-3.7.3-h359304d_0 ...</span><br><span class="line">Python 3.7.3</span><br><span class="line">installing: conda-env-2.6.0-1 ...</span><br><span class="line">installing: blas-1.0-mkl ...</span><br><span class="line">installing: bzip2-1.0.6-h1de35cc_5 ...</span><br><span class="line">installing: ca-certificates-2019.1.23-0 ...</span><br><span class="line">installing: intel-openmp-2019.3-199 ...</span><br><span class="line">installing: jbig-2.1-h4d881f8_0 ...</span><br><span class="line">installing: jpeg-9b-he5867d9_2 ...</span><br><span class="line">installing: libcxxabi-4.0.1-hcfea43d_1 ...</span><br><span class="line">installing: libgfortran-3.0.1-h93005f0_2 ...</span><br><span class="line">installing: libiconv-1.15-hdd342a3_7 ...</span><br><span class="line">installing: libsodium-1.0.16-h3efe00b_0 ...</span><br><span class="line">installing: lz4-c-1.8.1.2-h1de35cc_0 ...</span><br><span class="line">installing: lzo-2.10-h362108e_2 ...</span><br><span class="line">installing: pandoc-2.2.3.2-0 ...</span><br><span class="line">installing: xz-5.2.4-h1de35cc_4 ...</span><br><span class="line">installing: yaml-0.1.7-hc338f04_2 ...</span><br><span class="line">installing: zlib-1.2.11-h1de35cc_3 ...</span><br><span class="line">installing: libcxx-4.0.1-hcfea43d_1 ...</span><br><span class="line">installing: libpng-1.6.36-ha441bb4_0 ...</span><br><span class="line">installing: mkl-2019.3-199 ...</span><br><span class="line">installing: openssl-1.1.1b-h1de35cc_1 ...</span><br><span class="line">installing: tk-8.6.8-ha441bb4_0 ...</span><br><span class="line">installing: zstd-1.3.7-h5bba6e5_0 ...</span><br><span class="line">installing: expat-2.2.6-h0a44026_0 ...</span><br><span class="line">installing: freetype-2.9.1-hb4e5f40_0 ...</span><br><span class="line">installing: gmp-6.1.2-hb37e062_1 ...</span><br><span class="line">installing: hdf5-1.10.4-hfa1e0ec_0 ...</span><br><span class="line">installing: icu-58.2-h4b95b61_1 ...</span><br><span class="line">installing: libffi-3.2.1-h475c297_4 ...</span><br><span class="line">installing: liblief-0.9.0-h2a1bed3_2 ...</span><br><span class="line">installing: libssh2-1.8.0-ha12b0ac_4 ...</span><br><span class="line">installing: libtiff-4.0.10-hcb84e12_2 ...</span><br><span class="line">installing: ncurses-6.1-h0a44026_1 ...</span><br><span class="line">installing: pcre-8.43-h0a44026_0 ...</span><br><span class="line">installing: snappy-1.1.7-he62c110_3 ...</span><br><span class="line">installing: zeromq-4.3.1-h0a44026_3 ...</span><br><span class="line">installing: blosc-1.15.0-hd9629dc_0 ...</span><br><span class="line">installing: gettext-0.19.8.1-h15daf44_3 ...</span><br><span class="line">installing: libedit-3.1.20181209-hb402a30_0 ...</span><br><span class="line">installing: libxml2-2.9.9-hab757c2_0 ...</span><br><span class="line">installing: mpfr-4.0.1-h3018a27_3 ...</span><br><span class="line">installing: readline-7.0-h1de35cc_5 ...</span><br><span class="line">installing: glib-2.56.2-hd9629dc_0 ...</span><br><span class="line">installing: krb5-1.16.1-hddcf347_7 ...</span><br><span class="line">installing: libarchive-3.3.3-h786848e_5 ...</span><br><span class="line">installing: libxslt-1.1.33-h33a18ac_0 ...</span><br><span class="line">installing: mpc-1.1.0-h6ef4df4_1 ...</span><br><span class="line">installing: sqlite-3.27.2-ha441bb4_0 ...</span><br><span class="line">installing: unixodbc-2.3.7-h1de35cc_0 ...</span><br><span class="line">installing: dbus-1.13.6-h90a0687_0 ...</span><br><span class="line">installing: libcurl-7.64.0-h051b688_2 ...</span><br><span class="line">installing: qt-5.9.7-h468cd18_1 ...</span><br><span class="line">installing: alabaster-0.7.12-py37_0 ...</span><br><span class="line">installing: appnope-0.1.0-py37_0 ...</span><br><span class="line">installing: appscript-1.1.0-py37h1de35cc_0 ...</span><br><span class="line">installing: asn1crypto-0.24.0-py37_0 ...</span><br><span class="line">installing: atomicwrites-1.3.0-py37_1 ...</span><br><span class="line">installing: attrs-19.1.0-py37_1 ...</span><br><span class="line">installing: backcall-0.1.0-py37_0 ...</span><br><span class="line">installing: backports-1.0-py37_1 ...</span><br><span class="line">installing: bitarray-0.8.3-py37h1de35cc_0 ...</span><br><span class="line">installing: boto-2.49.0-py37_0 ...</span><br><span class="line">installing: certifi-2019.3.9-py37_0 ...</span><br><span class="line">installing: chardet-3.0.4-py37_1 ...</span><br><span class="line">installing: click-7.0-py37_0 ...</span><br><span class="line">installing: cloudpickle-0.8.0-py37_0 ...</span><br><span class="line">installing: colorama-0.4.1-py37_0 ...</span><br><span class="line">installing: contextlib2-0.5.5-py37_0 ...</span><br><span class="line">installing: curl-7.64.0-ha441bb4_2 ...</span><br><span class="line">installing: dask-core-1.1.4-py37_1 ...</span><br><span class="line">installing: decorator-4.4.0-py37_1 ...</span><br><span class="line">installing: defusedxml-0.5.0-py37_1 ...</span><br><span class="line">installing: docutils-0.14-py37_0 ...</span><br><span class="line">installing: entrypoints-0.3-py37_0 ...</span><br><span class="line">installing: et_xmlfile-1.0.1-py37_0 ...</span><br><span class="line">installing: fastcache-1.0.2-py37h1de35cc_2 ...</span><br><span class="line">installing: filelock-3.0.10-py37_0 ...</span><br><span class="line">installing: future-0.17.1-py37_0 ...</span><br><span class="line">installing: glob2-0.6-py37_1 ...</span><br><span class="line">installing: gmpy2-2.0.8-py37h6ef4df4_2 ...</span><br><span class="line">installing: greenlet-0.4.15-py37h1de35cc_0 ...</span><br><span class="line">installing: heapdict-1.0.0-py37_2 ...</span><br><span class="line">installing: idna-2.8-py37_0 ...</span><br><span class="line">installing: imagesize-1.1.0-py37_0 ...</span><br><span class="line">installing: ipython_genutils-0.2.0-py37_0 ...</span><br><span class="line">installing: itsdangerous-1.1.0-py37_0 ...</span><br><span class="line">installing: jdcal-1.4-py37_0 ...</span><br><span class="line">installing: kiwisolver-1.0.1-py37h0a44026_0 ...</span><br><span class="line">installing: lazy-object-proxy-1.3.1-py37h1de35cc_2 ...</span><br><span class="line">installing: llvmlite-0.28.0-py37h8c7ce04_0 ...</span><br><span class="line">installing: locket-0.2.0-py37_1 ...</span><br><span class="line">installing: lxml-4.3.2-py37hef8c89e_0 ...</span><br><span class="line">installing: markupsafe-1.1.1-py37h1de35cc_0 ...</span><br><span class="line">installing: mccabe-0.6.1-py37_1 ...</span><br><span class="line">installing: mistune-0.8.4-py37h1de35cc_0 ...</span><br><span class="line">installing: mkl-service-1.1.2-py37hfbe908c_5 ...</span><br><span class="line">installing: more-itertools-6.0.0-py37_0 ...</span><br><span class="line">installing: mpmath-1.1.0-py37_0 ...</span><br><span class="line">installing: msgpack-python-0.6.1-py37h04f5b5a_1 ...</span><br><span class="line">installing: numpy-base-1.16.2-py37h6575580_0 ...</span><br><span class="line">installing: olefile-0.46-py37_0 ...</span><br><span class="line">installing: pandocfilters-1.4.2-py37_1 ...</span><br><span class="line">installing: parso-0.3.4-py37_0 ...</span><br><span class="line">installing: pep8-1.7.1-py37_0 ...</span><br><span class="line">installing: pickleshare-0.7.5-py37_0 ...</span><br><span class="line">installing: pkginfo-1.5.0.1-py37_0 ...</span><br><span class="line">installing: pluggy-0.9.0-py37_0 ...</span><br><span class="line">installing: ply-3.11-py37_0 ...</span><br><span class="line">installing: prometheus_client-0.6.0-py37_0 ...</span><br><span class="line">installing: psutil-5.6.1-py37h1de35cc_0 ...</span><br><span class="line">installing: ptyprocess-0.6.0-py37_0 ...</span><br><span class="line">installing: py-1.8.0-py37_0 ...</span><br><span class="line">installing: py-lief-0.9.0-py37h1413db1_2 ...</span><br><span class="line">installing: pycodestyle-2.5.0-py37_0 ...</span><br><span class="line">installing: pycosat-0.6.3-py37h1de35cc_0 ...</span><br><span class="line">installing: pycparser-2.19-py37_0 ...</span><br><span class="line">installing: pycrypto-2.6.1-py37h1de35cc_9 ...</span><br><span class="line">installing: pycurl-7.43.0.2-py37ha12b0ac_0 ...</span><br><span class="line">installing: pyflakes-2.1.1-py37_0 ...</span><br><span class="line">installing: pyodbc-4.0.26-py37h0a44026_0 ...</span><br><span class="line">installing: pyparsing-2.3.1-py37_0 ...</span><br><span class="line">installing: pysocks-1.6.8-py37_0 ...</span><br><span class="line">installing: python-libarchive-c-2.8-py37_6 ...</span><br><span class="line">installing: python.app-2-py37_9 ...</span><br><span class="line">installing: pytz-2018.9-py37_0 ...</span><br><span class="line">installing: pyyaml-5.1-py37h1de35cc_0 ...</span><br><span class="line">installing: pyzmq-18.0.0-py37h0a44026_0 ...</span><br><span class="line">installing: qtpy-1.7.0-py37_1 ...</span><br><span class="line">installing: rope-0.12.0-py37_0 ...</span><br><span class="line">installing: ruamel_yaml-0.15.46-py37h1de35cc_0 ...</span><br><span class="line">installing: send2trash-1.5.0-py37_0 ...</span><br><span class="line">installing: simplegeneric-0.8.1-py37_2 ...</span><br><span class="line">installing: sip-4.19.8-py37h0a44026_0 ...</span><br><span class="line">installing: six-1.12.0-py37_0 ...</span><br><span class="line">installing: snowballstemmer-1.2.1-py37_0 ...</span><br><span class="line">installing: sortedcontainers-2.1.0-py37_0 ...</span><br><span class="line">installing: soupsieve-1.8-py37_0 ...</span><br><span class="line">installing: sphinxcontrib-1.0-py37_1 ...</span><br><span class="line">installing: sqlalchemy-1.3.1-py37h1de35cc_0 ...</span><br><span class="line">installing: tblib-1.3.2-py37_0 ...</span><br><span class="line">installing: testpath-0.4.2-py37_0 ...</span><br><span class="line">installing: toolz-0.9.0-py37_0 ...</span><br><span class="line">installing: tornado-6.0.2-py37h1de35cc_0 ...</span><br><span class="line">installing: tqdm-4.31.1-py37_1 ...</span><br><span class="line">installing: unicodecsv-0.14.1-py37_0 ...</span><br><span class="line">installing: wcwidth-0.1.7-py37_0 ...</span><br><span class="line">installing: webencodings-0.5.1-py37_1 ...</span><br><span class="line">installing: werkzeug-0.14.1-py37_0 ...</span><br><span class="line">installing: wrapt-1.11.1-py37h1de35cc_0 ...</span><br><span class="line">installing: wurlitzer-1.0.2-py37_0 ...</span><br><span class="line">installing: xlrd-1.2.0-py37_0 ...</span><br><span class="line">installing: xlsxwriter-1.1.5-py37_0 ...</span><br><span class="line">installing: xlwt-1.3.0-py37_0 ...</span><br><span class="line">installing: zipp-0.3.3-py37_1 ...</span><br><span class="line">installing: babel-2.6.0-py37_0 ...</span><br><span class="line">installing: backports.os-0.1.1-py37_0 ...</span><br><span class="line">installing: backports.shutil_get_terminal_size-1.0.0-py37_2 ...</span><br><span class="line">installing: beautifulsoup4-4.7.1-py37_1 ...</span><br><span class="line">installing: cffi-1.12.2-py37hb5b8e2f_1 ...</span><br><span class="line">installing: cycler-0.10.0-py37_0 ...</span><br><span class="line">installing: cytoolz-0.9.0.1-py37h1de35cc_1 ...</span><br><span class="line">installing: html5lib-1.0.1-py37_0 ...</span><br><span class="line">installing: importlib_metadata-0.8-py37_0 ...</span><br><span class="line">installing: jedi-0.13.3-py37_0 ...</span><br><span class="line">installing: keyring-18.0.0-py37_0 ...</span><br><span class="line">installing: mkl_random-1.0.2-py37h27c97d8_0 ...</span><br><span class="line">installing: multipledispatch-0.6.0-py37_0 ...</span><br><span class="line">installing: nltk-3.4-py37_1 ...</span><br><span class="line">installing: openpyxl-2.6.1-py37_1 ...</span><br><span class="line">installing: packaging-19.0-py37_0 ...</span><br><span class="line">installing: partd-0.3.10-py37_1 ...</span><br><span class="line">installing: pathlib2-2.3.3-py37_0 ...</span><br><span class="line">installing: pexpect-4.6.0-py37_0 ...</span><br><span class="line">installing: pillow-5.4.1-py37hb68e598_0 ...</span><br><span class="line">installing: pyqt-5.9.2-py37h655552a_2 ...</span><br><span class="line">installing: pyrsistent-0.14.11-py37h1de35cc_0 ...</span><br><span class="line">installing: python-dateutil-2.8.0-py37_0 ...</span><br><span class="line">installing: qtawesome-0.5.7-py37_1 ...</span><br><span class="line">installing: setuptools-40.8.0-py37_0 ...</span><br><span class="line">installing: singledispatch-3.4.0.3-py37_0 ...</span><br><span class="line">installing: sortedcollections-1.1.2-py37_0 ...</span><br><span class="line">installing: sphinxcontrib-websupport-1.1.0-py37_1 ...</span><br><span class="line">installing: sympy-1.3-py37_0 ...</span><br><span class="line">installing: terminado-0.8.1-py37_1 ...</span><br><span class="line">installing: traitlets-4.3.2-py37_0 ...</span><br><span class="line">installing: xlwings-0.15.4-py37_0 ...</span><br><span class="line">installing: zict-0.1.4-py37_0 ...</span><br><span class="line">installing: astroid-2.2.5-py37_0 ...</span><br><span class="line">installing: bleach-3.1.0-py37_0 ...</span><br><span class="line">installing: clyent-1.2.2-py37_1 ...</span><br><span class="line">installing: cryptography-2.6.1-py37ha12b0ac_0 ...</span><br><span class="line">installing: cython-0.29.6-py37h0a44026_0 ...</span><br><span class="line">installing: distributed-1.26.0-py37_1 ...</span><br><span class="line">installing: get_terminal_size-1.0.0-h7520d66_0 ...</span><br><span class="line">installing: gevent-1.4.0-py37h1de35cc_0 ...</span><br><span class="line">installing: isort-4.3.16-py37_0 ...</span><br><span class="line">installing: jinja2-2.10-py37_0 ...</span><br><span class="line">installing: jsonschema-3.0.1-py37_0 ...</span><br><span class="line">installing: jupyter_core-4.4.0-py37_0 ...</span><br><span class="line">installing: navigator-updater-0.2.1-py37_0 ...</span><br><span class="line">installing: networkx-2.2-py37_1 ...</span><br><span class="line">installing: nose-1.3.7-py37_2 ...</span><br><span class="line">installing: path.py-11.5.0-py37_0 ...</span><br><span class="line">installing: pygments-2.3.1-py37_0 ...</span><br><span class="line">installing: pytest-4.3.1-py37_0 ...</span><br><span class="line">installing: wheel-0.33.1-py37_0 ...</span><br><span class="line">installing: conda-verify-3.1.1-py37_0 ...</span><br><span class="line">installing: flask-1.0.2-py37_1 ...</span><br><span class="line">installing: jupyter_client-5.2.4-py37_0 ...</span><br><span class="line">installing: nbformat-4.4.0-py37_0 ...</span><br><span class="line">installing: pip-19.0.3-py37_0 ...</span><br><span class="line">installing: prompt_toolkit-2.0.9-py37_0 ...</span><br><span class="line">installing: pylint-2.3.1-py37_0 ...</span><br><span class="line">installing: pyopenssl-19.0.0-py37_0 ...</span><br><span class="line">installing: pytest-openfiles-0.3.2-py37_0 ...</span><br><span class="line">installing: pytest-remotedata-0.3.1-py37_0 ...</span><br><span class="line">installing: ipython-7.4.0-py37h39e3cac_0 ...</span><br><span class="line">installing: nbconvert-5.4.1-py37_3 ...</span><br><span class="line">installing: urllib3-1.24.1-py37_0 ...</span><br><span class="line">installing: ipykernel-5.1.0-py37h39e3cac_0 ...</span><br><span class="line">installing: requests-2.21.0-py37_0 ...</span><br><span class="line">installing: anaconda-client-1.7.2-py37_0 ...</span><br><span class="line">installing: conda-4.6.11-py37_0 ...</span><br><span class="line">installing: jupyter_console-6.0.0-py37_0 ...</span><br><span class="line">installing: notebook-5.7.8-py37_0 ...</span><br><span class="line">installing: qtconsole-4.4.3-py37_0 ...</span><br><span class="line">installing: sphinx-1.8.5-py37_0 ...</span><br><span class="line">installing: spyder-kernels-0.4.2-py37_0 ...</span><br><span class="line">installing: anaconda-navigator-1.9.7-py37_0 ...</span><br><span class="line">installing: anaconda-project-0.8.2-py37_0 ...</span><br><span class="line">installing: conda-build-3.17.8-py37_0 ...</span><br><span class="line">installing: jupyterlab_server-0.2.0-py37_0 ...</span><br><span class="line">installing: numpydoc-0.8.0-py37_0 ...</span><br><span class="line">installing: widgetsnbextension-3.4.2-py37_0 ...</span><br><span class="line">installing: ipywidgets-7.4.2-py37_0 ...</span><br><span class="line">installing: jupyterlab-0.35.4-py37hf63ae98_0 ...</span><br><span class="line">installing: spyder-3.3.3-py37_0 ...</span><br><span class="line">installing: _ipyw_jlab_nb_ext_conf-0.1.0-py37_0 ...</span><br><span class="line">installing: jupyter-1.0.0-py37_7 ...</span><br><span class="line">installing: bokeh-1.0.4-py37_0 ...</span><br><span class="line">installing: bottleneck-1.2.1-py37h1d22016_1 ...</span><br><span class="line">installing: h5py-2.9.0-py37h3134771_0 ...</span><br><span class="line">installing: imageio-2.5.0-py37_0 ...</span><br><span class="line">installing: matplotlib-3.0.3-py37h54f8f79_0 ...</span><br><span class="line">installing: mkl_fft-1.0.10-py37h5e564d8_0 ...</span><br><span class="line">installing: numpy-1.16.2-py37hacdab7b_0 ...</span><br><span class="line">installing: numba-0.43.1-py37h6440ff4_0 ...</span><br><span class="line">installing: numexpr-2.6.9-py37h7413580_0 ...</span><br><span class="line">installing: pandas-0.24.2-py37h0a44026_0 ...</span><br><span class="line">installing: pytest-arraydiff-0.3-py37h39e3cac_0 ...</span><br><span class="line">installing: pytest-doctestplus-0.3.0-py37_0 ...</span><br><span class="line">installing: pywavelets-1.0.2-py37h1d22016_0 ...</span><br><span class="line">installing: scipy-1.2.1-py37h1410ff5_0 ...</span><br><span class="line">installing: bkcharts-0.2-py37_0 ...</span><br><span class="line">installing: dask-1.1.4-py37_1 ...</span><br><span class="line">installing: patsy-0.5.1-py37_0 ...</span><br><span class="line">installing: pytables-3.5.1-py37h5bccee9_0 ...</span><br><span class="line">installing: pytest-astropy-0.5.0-py37_0 ...</span><br><span class="line">installing: scikit-image-0.14.2-py37h0a44026_0 ...</span><br><span class="line">installing: scikit-learn-0.20.3-py37h27c97d8_0 ...</span><br><span class="line">installing: astropy-3.1.2-py37h1de35cc_0 ...</span><br><span class="line">installing: statsmodels-0.9.0-py37h1d22016_0 ...</span><br><span class="line">installing: seaborn-0.9.0-py37_0 ...</span><br><span class="line">installing: anaconda-2019.03-py37_0 ...</span><br><span class="line">installation finished.</span><br><span class="line">==&gt; Changing ownership of paths required by anaconda; your password may be necessary</span><br><span class="line">ğŸº  anaconda was successfully installed!</span><br></pre></td></tr></table></figure>

<h2 id="è¨­å®šç’°å¢ƒè·¯å¾‘"><a href="#è¨­å®šç’°å¢ƒè·¯å¾‘" class="headerlink" title="è¨­å®šç’°å¢ƒè·¯å¾‘"></a>è¨­å®šç’°å¢ƒè·¯å¾‘</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>åŠ å…¥ anaconda çš„å®‰è£è·¯å¾‘ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/usr/local/anaconda3/bin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p> é‡å•“ terminal æˆ–æ˜¯åŸ·è¡Œ <code>source ~/.zshrc</code> é‡è¼‰å…¥ç’°å¢ƒè®Šæ•¸ã€‚</p>
<h2 id="é–‹å§‹ä½¿ç”¨-jupyter-notebook"><a href="#é–‹å§‹ä½¿ç”¨-jupyter-notebook" class="headerlink" title="é–‹å§‹ä½¿ç”¨ jupyter notebook"></a>é–‹å§‹ä½¿ç”¨ jupyter notebook</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ jupyter notebook</span><br><span class="line"></span><br><span class="line">[I 17:11:37.762 NotebookApp] Writing notebook server cookie secret to /Users/jerryhuang/Library/Jupyter/runtime/notebook_cookie_secret</span><br><span class="line">[I 17:11:38.780 NotebookApp] JupyterLab extension loaded from /usr/local/anaconda3/lib/python3.7/site-packages/jupyterlab</span><br><span class="line">[I 17:11:38.780 NotebookApp] JupyterLab application directory is /usr/local/anaconda3/share/jupyter/lab</span><br><span class="line">[I 17:11:38.781 NotebookApp] Serving notebooks from <span class="built_in">local</span> directory: /Users/jerryhuang/workspace/redfalcon/brazil/carnival.2019</span><br><span class="line">[I 17:11:38.781 NotebookApp] The Jupyter Notebook is running at:</span><br><span class="line">[I 17:11:38.781 NotebookApp] http://localhost:8888/?token=7644583630c119f4ce453430fa6993b6cc8c9fe6258d2026</span><br><span class="line">[I 17:11:38.782 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 17:11:38.793 NotebookApp]</span><br><span class="line"></span><br><span class="line">    To access the notebook, open this file <span class="keyword">in</span> a browser:</span><br><span class="line">        file:///Users/jerryhuang/Library/Jupyter/runtime/nbserver-50420-open.html</span><br><span class="line">    Or copy and <span class="built_in">paste</span> one of these URLs:</span><br><span class="line">        http://localhost:8888/?token=7644583630c119f4ce453430fa6993b6cc8c9fe6258d2026</span><br><span class="line">^C[I 17:12:02.475 NotebookApp] interrupted</span><br><span class="line">Serving notebooks from <span class="built_in">local</span> directory: /Users/jerryhuang/workspace/redfalcon/brazil/carnival.2019</span><br><span class="line">0 active kernels</span><br><span class="line">The Jupyter Notebook is running at:</span><br><span class="line">http://localhost:8888/?token=7644583630c119f4ce453430fa6993b6cc8c9fe6258d2026</span><br></pre></td></tr></table></figure>

<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li>[Install anaconda on macOS with homebrew] <a href="https://medium.com/ayuth/install-anaconda-on-macos-with-homebrew-c94437d63a37">3</a></li>
</ul>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>jupyter notebook</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ Git pre-commit è‡ªå‹•ä¿®æ­£ PHP çš„ Coding Style</title>
    <url>/2019/2019051901-php-coding-style-fix-with-git.html</url>
    <content><![CDATA[<p>åœ¨ VS Code ä¸‹ï¼Œé™¤äº†[ä½¿ç”¨ extension - <code>junstyle.php-cs-fixer</code> é€²è¡Œ PHP çš„ Coding Style ä¿®æ­£] <a href="2017/2017102302-vscode-extension-php-cs-fixer.html">1</a> ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ [Git hooks] <a href="https://githooks.com/">2</a> çš„åŠŸèƒ½ï¼Œåœ¨ commit ä¹‹å‰åŸ·è¡ŒæŒ‡å®šçš„ scriptï¼Œç¨±ç‚º [pre-commit] <a href="https://github.com/git/git/blob/master/templates/hooks--pre-commit.sample">3</a>ï¼Œæ­é… [php-cs-fixer] <a href="https://github.com/friendsofphp/php-cs-fixer">4</a> å°±èƒ½è‡ªå‹•åŒ–çš„å°æœ‰å·®ç•°çš„ PHP æª”æ¡ˆé€²è¡Œ Coding Style çš„ä¿®æ­£ã€‚</p>
<span id="more"></span>

<h2 id="ç’°å¢ƒ"><a href="#ç’°å¢ƒ" class="headerlink" title="ç’°å¢ƒ"></a>ç’°å¢ƒ</h2><ol>
<li>macOS 10.13.6 High Sierra</li>
<li>PHP 7.3.5</li>
</ol>
<h2 id="é–‹å§‹è¨­å®š-pre-commit"><a href="#é–‹å§‹è¨­å®š-pre-commit" class="headerlink" title="é–‹å§‹è¨­å®š pre-commit"></a>é–‹å§‹è¨­å®š pre-commit</h2><h3 id="Step-1-æª¢æŸ¥æ˜¯å¦æœ‰-hooks-ç›®éŒ„"><a href="#Step-1-æª¢æŸ¥æ˜¯å¦æœ‰-hooks-ç›®éŒ„" class="headerlink" title="Step 1. æª¢æŸ¥æ˜¯å¦æœ‰ hooks ç›®éŒ„"></a>Step 1. æª¢æŸ¥æ˜¯å¦æœ‰ hooks ç›®éŒ„</h3><p>æª¢æŸ¥ workspace ä¸‹çš„ <code>.git</code> ç›®éŒ„æ˜¯å¦æœ‰ <code>hooks</code> å­ç›®éŒ„ï¼Œå¦‚ä¸‹ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ll ./.git</span><br><span class="line">total 64</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff     8B May 17 18:02 COMMIT_EDITMSG</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff     0B May 19 12:54 FETCH_HEAD</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff    24B May 17 17:23 HEAD</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff   371B May 17 17:30 config</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff    73B May 17 17:30 description</span><br><span class="line">drwxr-xr-x   14 jerryhuang  staff   448B May 17 17:59 hooks</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff    11K May 17 18:02 index</span><br><span class="line">drwxr-xr-x    3 jerryhuang  staff    96B May 17 17:30 info</span><br><span class="line">drwxr-xr-x    4 jerryhuang  staff   128B May  7 12:15 logs</span><br><span class="line">drwxr-xr-x  143 jerryhuang  staff   4.5K May 17 18:02 objects</span><br><span class="line">drwxr-xr-x    5 jerryhuang  staff   160B May  7 12:16 refs</span><br><span class="line">-rw-r--r--@   1 jerryhuang  staff   174B May 17 18:07 sourcetreeconfig</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰ <code>hooks</code>ï¼Œå‰‡è·³é Step 2ã€‚</p>
<h3 id="Step-2-å»ºç«‹-hooks-ç›®éŒ„"><a href="#Step-2-å»ºç«‹-hooks-ç›®éŒ„" class="headerlink" title="Step 2. å»ºç«‹ hooks ç›®éŒ„"></a>Step 2. å»ºç«‹ hooks ç›®éŒ„</h3><p>åŒæ¨£åœ°åœ¨ workspace ç›®éŒ„ä¸‹ï¼ŒåŸ·è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<p>æ­¤æ™‚æœƒé‡æ–°å»ºç«‹ git åŠå…¶å­ç›®éŒ„ hooks èˆ‡è©²ç›®éŒ„å…§çš„ sample æª”æ¡ˆã€‚</p>
<h3 id="Step-3-æ–°å¢-pre-commit-æª”æ¡ˆå…§å®¹"><a href="#Step-3-æ–°å¢-pre-commit-æª”æ¡ˆå…§å®¹" class="headerlink" title="Step 3. æ–°å¢ pre-commit æª”æ¡ˆå…§å®¹"></a>Step 3. æ–°å¢ pre-commit æª”æ¡ˆå…§å®¹</h3><p>åœ¨ workspace ä¸‹åŸ·è¡Œ <code>vim ./.git/hooks/pre-commit</code>ï¼Œæ–°å¢å¦‚ä¸‹çš„æª”æ¡ˆå…§å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">pass=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">files=$(git diff --cached --name-only --diff-filter=ACMR | grep -E <span class="string">&#x27;\.(php|phtml)$&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$files</span>&quot;</span> != <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Run php syntax check before commit</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">read</span> -r file; <span class="keyword">do</span></span><br><span class="line">        php -l <span class="string">&quot;<span class="variable">$file</span>&quot;</span></span><br><span class="line">        <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">            pass=<span class="literal">false</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span> &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$files</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Run php-cs-fixer validation before commit</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$files</span>&quot;</span> | xargs ./vendor/bin/php-cs-fixer fix --diff --config .php_cs</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">        pass=<span class="literal">false</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Automatically add files that may have been fixed by php-cs-fixer</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$files</span>&quot;</span> | xargs git add</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="variable">$pass</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;PRE-COMMIT HOOK FAILED:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Code style validation failed. Please fix errors and try committing again.&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>è«‹ç•™æ„ <code>echo &quot;$files&quot; | xargs ./vendor/bin/php-cs-fixer fix --diff --config .php_cs</code> é€™æ®µï¼Œ</p>
<ol>
<li><code>./vendor/bin/php-cs-fixer</code>ï¼š æ˜¯ä½¿ç”¨ <code>composer require --dev friendsofphp/php-cs-fixer</code> å®‰è£åœ¨ project å…§ vendor ç›®éŒ„ä¸­çš„ php-cs-fixer é€²è¡Œ Coding Style ä¿®æ­£ã€‚Global å®‰è£æ–¹å¼è«‹åƒè€ƒ [FriendsOfPHP&#x2F;PHP-CS-Fixer] <a href="https://github.com/friendsofphp/php-cs-fixer">6</a>ã€‚</li>
<li><code>.php_cs</code>ï¼š ä½¿ç”¨ [åœ¨ vs code ä½¿ç”¨ php cs fixer é€²è¡Œ coding style çš„æ ¼å¼ä¿®æ­£] <a href="2017/2017102302-vscode-extension-php-cs-fixer.html">1</a> ä¸€æ–‡å…§å»ºç«‹çš„æª”æ¡ˆï¼Œæˆ–åƒè€ƒ [FriendsOfPHP&#x2F;PHP-CS-Fixer] <a href="https://github.com/friendsofphp/php-cs-fixer">6</a> å…§çš„ <code>.php_cs.dist</code> å†ä¾æ“šéœ€æ±‚ä¿®æ”¹ã€‚</li>
</ol>
<h3 id="Step-4-ä¿®æ”¹-pre-commit-çš„æ¬Šé™"><a href="#Step-4-ä¿®æ”¹-pre-commit-çš„æ¬Šé™" class="headerlink" title="Step 4. ä¿®æ”¹ pre-commit çš„æ¬Šé™"></a>Step 4. ä¿®æ”¹ pre-commit çš„æ¬Šé™</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">chmod</span> +x .git/hooks/pre-commit</span><br></pre></td></tr></table></figure>
<p>å¿…é ˆä¿®æ”¹ <code>pre-commit</code> çš„æ¬Šé™ï¼Œé€™æ¨£æ‰èƒ½åœ¨ commit å‰æ­£ç¢ºåŸ·è¡Œå¯« php-cs-fixerã€‚</p>
<p>å®Œæˆä»¥ä¸Šè¨­å®šå¾Œï¼Œæ¯æ¬¡åœ¨ commit å‰ï¼Œåªè¦æœ‰ç”¢ç”Ÿå·®ç•°çš„ PHP æª”æ¡ˆï¼Œå°±æœƒè‡ªå‹•é€²è¡Œ Coding Style ä¿®æ­£ã€‚</p>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li>[Automating Code Style Fixes with Git and PHP Coding Standards Fixer] <a href="https://victor.4devs.io/en/clean-code/automating-code-style-fixes-with-git-and-php-cs-fixer.html">5</a></li>
</ul>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>coding style</tag>
        <tag>php-cs-fixer</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„æ—¥å¸¸ git æ“ä½œ</title>
    <url>/2019/2019062601-my-version-control-specification.html</url>
    <content><![CDATA[<p>å°‡æ—¥å¸¸çš„ git æ“ä½œè¨˜éŒ„ä¸‹ä¾†ä½œç‚ºåœ˜éšŠçš„é–‹ç™¼è¦ç¯„ã€‚</p>
<span id="more"></span>

<h2 id="é–‹ç™¼"><a href="#é–‹ç™¼" class="headerlink" title="é–‹ç™¼"></a>é–‹ç™¼</h2><h3 id="éµå¾ª-Git-flow"><a href="#éµå¾ª-Git-flow" class="headerlink" title="éµå¾ª Git flow"></a>éµå¾ª Git flow</h3><ol>
<li>å‹™å¿…åœ¨å€‹äººé–‹ç™¼ç’°å¢ƒå®‰è£ git flow</li>
<li>å¯ä¾æ“šå€‹äººç¿’æ…£ä½¿ç”¨ command æˆ–æ˜¯ <a href="https://www.sourcetreeapp.com/">sourcetree</a> é€²è¡Œ git å„é …æ“ä½œ</li>
<li>Git flow çš„èªªæ˜å¯åƒè€ƒ <a href="https://gitbook.tw/chapters/gitflow/why-need-git-flow.html">Git Flow æ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼éœ€è¦é€™ç¨®æ±è¥¿ï¼Ÿ</a></li>
<li>å„é …æ“ä½œåƒç…§ <a href="https://danielkummer.github.io/git-flow-cheatsheet/">git-flow cheatsheet</a> æ–‡ç« å…§çš„æ–¹å¼é€²è¡Œ</li>
</ol>
<h3 id="å·¥ä½œè¦ç¯„"><a href="#å·¥ä½œè¦ç¯„" class="headerlink" title="å·¥ä½œè¦ç¯„"></a>å·¥ä½œè¦ç¯„</h3><h4 id="Checkout"><a href="#Checkout" class="headerlink" title="Checkout"></a>Checkout</h4><ol>
<li>å·¥ä½œçš„ branch ä¸€å®šå¾ develop åˆ‡ï¼ˆcheckoutï¼‰å‡º feature branch</li>
<li>æ¯ä¸€ feature branch åªé–‹ç™¼æœ€å°å–®ä½åŠŸèƒ½ï¼Œä»¥é¿å…èˆ‡ develop ç”¢ç”Ÿéå¤§çš„å·®ç•°ï¼Œå°è‡´ merge çš„é›£åº¦æé«˜</li>
</ol>
<h4 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h4><ol>
<li>ç¬¬ä¸€è¡Œç‚ºå¿…å¡«çš„æ¨™é¡Œï¼ˆSubjectï¼‰ï¼Œéœ€é‡é»èªªæ˜ï¼Œå»ºè­°å°‘æ–¼ 50 å­—å…ƒ</li>
<li>ç©ºä¸€è¡Œå¾Œå¯æ’°å¯«è©³ç´°æè¿°ï¼ˆBodyï¼‰ï¼Œç‚ºé¸å¡«ï¼Œåƒ…æ‘˜è¦æè¿°</li>
<li>Commit å¯«æ³•å¯åƒè€ƒ <a href="https://juffalow.com/other/write-good-git-commit-message">Write good git commit message</a></li>
<li>åƒ…å¯èƒ½ä½¿ç”¨è‹±æ–‡ï¼ˆGoogle translator æ˜¯å¥½å¹«æ‰‹ :thumbsup: ï¼‰</li>
</ol>
<h4 id="Pull-åŠ-Push"><a href="#Pull-åŠ-Push" class="headerlink" title="Pull åŠ Push"></a>Pull åŠ Push</h4><ol>
<li>æ¯æ¬¡é€²è¡Œ pull&#x2F; push å‰ï¼Œå…ˆåŸ·è¡Œ fetchï¼Œä»¥å–å¾—æœ€æ–°çš„ branches çš„ç‹€æ…‹ï¼Œä¸¦ä¾æ“šç•¶ä¸‹æƒ…å¢ƒé€²è¡Œæ›´æ–°</li>
<li>å¾ develop é€²è¡Œ checkout å‰ï¼Œéœ€ pull å–å¾—æœ€æ–°ç‹€æ…‹</li>
<li>æ¯æ—¥ä¸‹åˆ 5 é»å°‡ feature branch push åˆ° remote é€²è¡Œä¿å­˜ï¼ˆè²·ä¿éšªçš„æ¦‚å¿µ :smile: ï¼‰</li>
</ol>
<h4 id="Pull-Request"><a href="#Pull-Request" class="headerlink" title="Pull Request"></a>Pull Request</h4><ol>
<li>feature branch é …ç›®å®Œæˆå¾Œï¼Œä¸å¯ç›´æ¥ merge å› develop</li>
<li>è«‹è‡³ repository server ç™¼å‡º pull requestï¼Œè«‹æ±‚å…¶ä»–äººé€²è¡Œ code review</li>
</ol>
<h4 id="Merge-to-develop"><a href="#Merge-to-develop" class="headerlink" title="Merge to develop"></a>Merge to develop</h4><ol>
<li>Code review å®Œæˆå¾Œï¼Œç”±æœ€å¾Œä¸€ä½å°‡ issue closeï¼Œä¸¦å°‡è©² feature branch merge åˆ° develop</li>
</ol>
<hr>
<h2 id="Repository-å‚™ä»½"><a href="#Repository-å‚™ä»½" class="headerlink" title="Repository å‚™ä»½"></a>Repository å‚™ä»½</h2><p>å¯è¡Œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ¯æ—¥æ’ç¨‹å‚™ä»½ repository server çš„è³‡æ–™</li>
<li>repository server çš„è³‡æ–™å­˜æ”¾åœ¨å¦‚ <a href="https://www.gluster.org/">Gluster</a> çš„ file system</li>
</ol>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>è¢« curl å‘½ä»¤è¼¸å‡ºçš„ &quot;* Expire in 0 ms for 1 (transfer 0x7f85f6002000)&quot; æ´—ç‰ˆäº†</title>
    <url>/2021/2021120801-curl-command-outputs-expire-in-x-ms-for-1.html</url>
    <content><![CDATA[<p>ä½¿ç”¨ curl å‘½ä»¤ï¼Œè¢«ä¸€å † <code>* Expire in 0 ms for 1 (transfer 0x7f85f6002000)</code> æ´—ç‰ˆå¾ˆå‚»çœ¼ã€‚ã€‚ã€‚</p>
<span id="more"></span>

<h2 id="ç’°å¢ƒ-Environment"><a href="#ç’°å¢ƒ-Environment" class="headerlink" title="ç’°å¢ƒ  Environment"></a>ç’°å¢ƒ  Environment</h2><ul>
<li>macOS: v10.14.6</li>
<li>iTerm2: Build 3.4.14</li>
<li>curl: v7.64.0</li>
</ul>
<h2 id="ç‹€æ³"><a href="#ç‹€æ³" class="headerlink" title="ç‹€æ³"></a>ç‹€æ³</h2><p>çµ‚æ–¼å—ä¸äº†æ¯æ¬¡ä½¿ç”¨ curl å‘½ä»¤ï¼Œç•«é¢æœƒå‡ºç¾éå¸¸å¤šçš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br></pre></td></tr></table></figure>

<p>çˆ¬æ–‡çœ‹åˆ°æœ‰äººè·Ÿæˆ‘æœ‰ä¸€æ¨£çš„å›°æ“¾ï¼Œçœ‹èµ·ä¾†æ˜¯æŸä¸€ç‰ˆçš„ curl æ‰æœƒå‡ºç¾é€™æ¨£çš„ log outputã€‚è§£æ³•å°±æ˜¯å‡ç´š curlã€‚</p>
<p>æŸ¥çœ‹ curl ç‰ˆæœ¬ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -V</span><br><span class="line">curl 7.64.0 (x86_64-apple-darwin13.4.0) libcurl/7.64.0 OpenSSL/1.1.1b zlib/1.2.11 libssh2/1.8.0</span><br><span class="line">Release-Date: 2019-02-06</span><br><span class="line">Protocols: dict file ftp ftps gopher http https imap imaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp</span><br><span class="line">Features: AsynchDNS IPv6 Largefile GSS-API Kerberos SPNEGO NTLM NTLM_WB SSL libz TLS-SRP UnixSockets HTTPS-proxy</span><br></pre></td></tr></table></figure>

<h2 id="è™•ç†æ–¹å¼"><a href="#è™•ç†æ–¹å¼" class="headerlink" title="è™•ç†æ–¹å¼"></a>è™•ç†æ–¹å¼</h2><p>ä½¿ç”¨ homebrew æ›´æ–°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew upgrade curl</span><br><span class="line"></span><br><span class="line">==&gt; Upgrading curl</span><br><span class="line">  7.79.1_1 -&gt; 7.80.0_1</span><br></pre></td></tr></table></figure>

<p>å‹™å¿…è¦åŸ·è¡Œä»¥ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/usr/local/opt/curl/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br></pre></td></tr></table></figure>

<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://stackoverflow.com/questions/63191648/curl-error-expire-in-1-ms-for-1-transfer-0x">CURL error â€œExpire in 1 ms for 1 (transfer 0xâ€¦)â€</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>curl</tag>
      </tags>
  </entry>
  <entry>
    <title>Makefile çš„å¦ä¸€å€‹é¸æ“‡ Taskfile</title>
    <url>/2022/20220521-taskfile-a-makefile-alternative.html</url>
    <content><![CDATA[<p>åœ¨ macOS ç’°å¢ƒï¼Œé™¤äº†ä½¿ç”¨ Makefile ä¹‹å¤–ï¼Œé‚„æœ‰å¦ä¸€å€‹é¸æ“‡ Taskfileã€‚</p>
<span id="more"></span>

<h2 id="ç’°å¢ƒ-Environment"><a href="#ç’°å¢ƒ-Environment" class="headerlink" title="ç’°å¢ƒ  Environment"></a>ç’°å¢ƒ  Environment</h2><ul>
<li>macOS 12.3.1</li>
<li>Homebrew 3.4.5</li>
</ul>
<h2 id="å®‰è£-Taskfile"><a href="#å®‰è£-Taskfile" class="headerlink" title="å®‰è£ Taskfile"></a>å®‰è£ Taskfile</h2><p>Use <code>brew</code> command to install <code>task</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install go-task/tap/go-task</span><br></pre></td></tr></table></figure>

<h2 id="æ–°å¢-Taskfile"><a href="#æ–°å¢-Taskfile" class="headerlink" title="æ–°å¢ Taskfile"></a>æ–°å¢ Taskfile</h2><p>Create <code>Taskfile.yml</code> and insert the following,</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tasks:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Build</span> <span class="string">the</span> <span class="string">app</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">GOFLAGS=-mod=mod</span> <span class="string">go</span> <span class="string">build</span> <span class="string">-o</span> <span class="string">./bin/app</span> <span class="string">./internal/main.go</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">run:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Run</span> <span class="string">the</span> <span class="string">app</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">GOFLAGS=-mod=mod</span> <span class="string">go</span> <span class="string">run</span> <span class="string">./internal/main.go</span></span><br></pre></td></tr></table></figure>

<p>Display the list of available tasks:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ task --list</span><br><span class="line">task: Available tasks <span class="keyword">for</span> this project:</span><br><span class="line">* build:  Build the app</span><br><span class="line">* run:   Run the app</span><br></pre></td></tr></table></figure>

<h2 id="åŸ·è¡Œ-Taskfile-command"><a href="#åŸ·è¡Œ-Taskfile-command" class="headerlink" title="åŸ·è¡Œ Taskfile command"></a>åŸ·è¡Œ Taskfile command</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ task run</span><br><span class="line">task: [run] GOFLAGS=-mod=mod go run ./internal/main.go</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>é€²éšä½¿ç”¨å¯åƒè€ƒ <a href="https://dev.to/stack-labs/introduction-to-taskfile-a-makefile-alternative-h92">Introduction to Taskfile: a Makefile alternative</a> ã€‚</p>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://dev.to/stack-labs/introduction-to-taskfile-a-makefile-alternative-h92">Introduction to Taskfile: a Makefile alternative</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>makefile</tag>
        <tag>taskfile</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 2.7 é–‹ç™¼ç’°å¢ƒè¨­ç½®</title>
    <url>/2022/2022061201-python2-7-development-setting.html</url>
    <content><![CDATA[<p>Python è»Ÿé«”åŸºé‡‘æœƒï¼ˆPython Software Foundationï¼‰å·²åœ¨ 2020&#x2F;01&#x2F;1ï¼Œæ­£å¼çµ‚æ­¢å° Python 2.7 çš„æ”¯æ´ã€‚é‚£è¦å¦‚ä½•åœ¨æœ¬åœ°ç’°å¢ƒï¼Œé€²è¡ŒåŸºæ–¼ Python 2.7 çš„å°ˆæ¡ˆç¶­è­·æˆ–é–‹ç™¼å‘¢ï¼Ÿç¬¬ä¸€å€‹æƒ³åˆ°çš„å°±æ˜¯ä½¿ç”¨è‡ªè£½çš„ docker imageã€‚çˆ¬æ–‡æ‰¾åˆ°é€™ç¯‡ <a href="https://dev.to/alvarocavalcanti/setting-up-a-python-remote-interpreter-using-docker-1i24">Setting Up a Python Remote Interpreter Using Docker</a> ï¼Œå¯ä»¥ç”¨ VS code è·Ÿ PyCharm é€²è¡Œæ­é… Python 2.7 çš„ docker image é€²è¡Œé–‹ç™¼ğŸ‘ã€‚</p>
<span id="more"></span>

<h2 id="ç’°å¢ƒ-Environment"><a href="#ç’°å¢ƒ-Environment" class="headerlink" title="ç’°å¢ƒ  Environment"></a>ç’°å¢ƒ  Environment</h2><ul>
<li>macOS 12.3.1</li>
<li>Docker version 20.10.12, build e91ed57</li>
<li>Task version: v3.12.0 (h1:viFy8kdDZ2iTcpTuxzzJCeKtTGt9U+5iXMVIpLjvIro&#x3D;)</li>
</ul>
<h2 id="äº‹æƒ…æº–å‚™"><a href="#äº‹æƒ…æº–å‚™" class="headerlink" title="äº‹æƒ…æº–å‚™"></a>äº‹æƒ…æº–å‚™</h2><p>é–‹å§‹å‹•æ‰‹å‰ï¼Œå…ˆæº–å‚™å¥½ä¸€ä¸‹æª”æ¡ˆã€‚ä»¥ä¸‹æª”æ¡ˆéƒ½æ”¾åœ¨ Git repositoryï¼š <a href="https://github.com/jerry771230/my-py2.7-dev">jerry771230&#x2F;my-py2.7-dev</a></p>
<p>Dockerfile å…§å®¹ï¼Œ</p>
<ol>
<li>åªå®‰è£å¿…è¦çš„ packages</li>
<li>å»ºç«‹ root çš„å¯†ç¢¼</li>
<li>è¨­å®šå¯ä»¥é€šé SSH ä»¥å¸³è™Ÿå¯†ç¢¼ç™»å…¥</li>
<li>å•Ÿå‹• <code>ssh</code> æœå‹™</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FROM python:2.7-slim-buster</span><br><span class="line"></span><br><span class="line">RUN apt-get update &amp;&amp; \</span><br><span class="line">    apt-get install -y gcc file make libcurl4-openssl-dev libssl-dev openssh-server curl wget &amp;&amp; \</span><br><span class="line">    apt-get clean -y &amp;&amp; apt-get autoclean -y &amp;&amp; apt-get autoremove -y &amp;&amp; \</span><br><span class="line">    rm -rf /var/lib/apt/lists/* &amp;&amp; \</span><br><span class="line">    mkdir -p /srv</span><br><span class="line"></span><br><span class="line">RUN echo &#x27;root:password&#x27; | chpasswd</span><br><span class="line">RUN sed -i &#x27;s/#PermitRootLogin prohibit-password/PermitRootLogin yes/&#x27; /etc/ssh/sshd_config</span><br><span class="line">RUN sed &#x27;s@session\s*required\s*pam_loginuid.so@session optional pam_loginuid.so@g&#x27; -i /etc/pam.d/sshd</span><br><span class="line"># RUN mkdir /run/sshd</span><br><span class="line">RUN service ssh start</span><br><span class="line">EXPOSE 22</span><br><span class="line">EXPOSE 8787</span><br><span class="line">CMD [&quot;/usr/sbin/sshd&quot;, &quot;-D&quot;]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‚™è¨»ï¼š<br>åœ¨æ–‡ä»¶ <a href="https://code.visualstudio.com/remote/advancedcontainers/develop-remote-host">Develop on a remote Docker host</a> å…§æœ‰æåˆ°ï¼ŒVS code å¯ä»¥ä½¿ç”¨ <code>SSH</code> ç™»å…¥ container é€²è¡Œé–‹ç™¼ã€‚å¦‚æœä¸éœ€è¦ SSH ç™»å…¥ï¼Œå…¶ç›¸é—œ packages è·Ÿæœå‹™æ˜¯éƒ½ä¸éœ€è¦çš„ã€‚</p>
</blockquote>
<p>Taskfile.yml å¾ŒçºŒæŒ‡ä»¤éƒ½æ˜¯ä½¿ç”¨ <code>task</code> ä¾†åŸ·è¡Œï¼Œ</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tasks:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Build</span> <span class="string">&quot;py2.7-dev&quot;</span> <span class="string">image</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">py2.7-dev</span> <span class="string">.</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">down:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Remove</span> <span class="string">containers</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker-compose</span> <span class="string">down</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">up:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Run</span> <span class="string">containers</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker-compose</span> <span class="string">up</span> <span class="string">-d</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">exec:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Get</span> <span class="string">into</span> <span class="string">&quot;py2.7&quot;</span> <span class="string">container</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker</span> <span class="string">exec</span> <span class="string">-ti</span> <span class="string">py2.7</span> <span class="string">/bin/bash</span></span><br><span class="line">  <span class="attr">stop:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Stop</span> <span class="string">containers</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker-compose</span> <span class="string">stop</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">start:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Start</span> <span class="string">containers</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker-compose</span> <span class="string">start</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">restart:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">Restart</span> <span class="string">containers</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">docker-compose</span> <span class="string">restart</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">login:</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">SSH</span> <span class="string">to</span> <span class="string">&quot;py2.7&quot;</span> <span class="string">container</span></span><br><span class="line">    <span class="attr">cmds:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ssh</span> <span class="string">-p</span> <span class="number">2222</span> <span class="string">-t</span> <span class="string">root@127.0.0.1</span> <span class="string">&#x27;cd /srv ; bash&#x27;</span></span><br></pre></td></tr></table></figure>

<p>åŸºç¤çš„ Python 2.7 docker image å»ºç«‹å¾Œï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>docker-compose</code> é€²è¡Œæ“ä½œï¼Œ <code>docker-compose.yml</code> å¦‚ä¸‹ï¼Œ</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">py:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">py2.7-dev:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">py2.7</span></span><br><span class="line">    <span class="attr">tty:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8787:8787&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2222:22&quot;</span></span><br><span class="line">    <span class="attr">working_dir:</span> <span class="string">/srv</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./code:/srv</span></span><br></pre></td></tr></table></figure>

<p>Python 2.7 å°ˆæ¡ˆéœ€è¦å®‰è£çš„ packages å°±é  <code>code\requirement.txt</code> ç®¡ç†äº†ï¼Œ</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">Flask</span><br><span class="line">flask_restful</span><br><span class="line">flask-httpauth==4.5.0</span><br><span class="line">zerorpc</span><br><span class="line">urllib3</span><br><span class="line">strgen</span><br><span class="line">requests</span><br><span class="line">psycopg2-binary</span><br><span class="line">flask_sqlalchemy</span><br><span class="line">bcrypt</span><br><span class="line">ping</span><br><span class="line">psutil</span><br><span class="line">pyjwt</span><br><span class="line">pyOpenSSL</span><br><span class="line">python-dateutil</span><br><span class="line">flask-migrate</span><br></pre></td></tr></table></figure>

<h2 id="é–‹å§‹è£½ä½œå°ˆæ¡ˆç”¨-Python-2-7-docker-image"><a href="#é–‹å§‹è£½ä½œå°ˆæ¡ˆç”¨-Python-2-7-docker-image" class="headerlink" title="é–‹å§‹è£½ä½œå°ˆæ¡ˆç”¨ Python 2.7 docker image"></a>é–‹å§‹è£½ä½œå°ˆæ¡ˆç”¨ Python 2.7 docker image</h2><h3 id="1-å»ºç«‹-â€œpy2-7-devâ€-docker-image"><a href="#1-å»ºç«‹-â€œpy2-7-devâ€-docker-image" class="headerlink" title="1. å»ºç«‹ â€œpy2.7-devâ€ docker image"></a>1. å»ºç«‹ â€œpy2.7-devâ€ docker image</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task build</span><br></pre></td></tr></table></figure>

<p>å»ºç«‹å®Œæˆå¾Œ, åˆ—å‡º â€œpy2.7-devâ€ docker image,</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images | grep py2.7</span><br><span class="line"></span><br><span class="line">py2.7-dev         latest           10e84e2626e0   9 seconds ago   329MB</span><br></pre></td></tr></table></figure>

<h3 id="2-é‹è¡Œ-container"><a href="#2-é‹è¡Œ-container" class="headerlink" title="2. é‹è¡Œ container"></a>2. é‹è¡Œ container</h3><p>ä½¿ç”¨å‰›æ‰å»ºç«‹çš„ docker image <code>py2.7-dev:latest</code> ä¾†é‹è¡Œ container</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task up</span><br></pre></td></tr></table></figure>

<p>é¡¯ç¤ºå·²é‹è¡Œçš„ containers</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">CONTAINER ID   IMAGE              COMMAND               CREATED         STATUS         PORTS                                          NAMES</span><br><span class="line">f8dc4ba33f2e   py2.7-dev:latest   <span class="string">&quot;/usr/sbin/sshd -D&quot;</span>   5 seconds ago   Up 3 seconds   0.0.0.0:8787-&gt;8787/tcp, 0.0.0.0:2222-&gt;22/tcp   py2.7</span><br></pre></td></tr></table></figure>

<h3 id="3-SSH-to-container"><a href="#3-SSH-to-container" class="headerlink" title="3. SSH to container"></a>3. SSH to container</h3><p>ä½¿ç”¨ <code>SSH</code> å‘½ä»¤ç™»å…¥ â€œpy2.7â€ container,</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task login</span><br></pre></td></tr></table></figure>

<p>æ­¤æ™‚éœ€è¦è¼¸å…¥å¯†ç¢¼æ‰èƒ½ç™»å…¥ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>authorized_key</code> é€²è¡Œ SSH ç™»å…¥ï¼Œé€™æ¨£å°±å¯ä»¥å…é™¤è¼¸å…¥å¯†ç¢¼ã€‚ä½¿ç”¨ä¸‹æ–¹å‘½ä»¤ï¼Œå°‡ key è¤‡è£½åˆ° containerï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -p 2222 root@127.0.0.1</span><br></pre></td></tr></table></figure>

<p>å®Œæˆå¾Œå†æ¬¡ä½¿ç”¨ <code>SSH</code> å‘½ä»¤ç™»å…¥ï¼Œæ­¤æ™‚ä¸éœ€è¦å¯†ç¢¼å°±å¯ä»¥ç™»å…¥ container å…§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task login</span><br></pre></td></tr></table></figure>

<h3 id="4-Docker-å‘½ä»¤é€²å…¥-container"><a href="#4-Docker-å‘½ä»¤é€²å…¥-container" class="headerlink" title="4. Docker å‘½ä»¤é€²å…¥ container"></a>4. Docker å‘½ä»¤é€²å…¥ container</h3><p>åœ¨æ²’æœ‰å®‰è£åŠè¨­å®š <code>SSH</code> å‰ï¼Œä½¿ç”¨ <code>docker exec</code> å¯ä»¥ç›´æ¥é€²å…¥ containerã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task <span class="built_in">exec</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‚™è¨»ï¼š<br>æ²’æœ‰ç‰¹åˆ¥éœ€æ±‚æ™‚ï¼Œä½¿ç”¨ <code>docker exec</code> æ¯” <code>SSH</code> æ–¹ä¾¿ï¼Œä¹Ÿä¸éœ€è¦å®‰è£ <code>SSH</code> ç›¸é—œçš„ packagesï¼ˆä½”ç©ºé–“ï¼‰ã€‚</p>
</blockquote>
<h3 id="5-å®‰è£-Python-å°ˆæ¡ˆéœ€è¦çš„-packages"><a href="#5-å®‰è£-Python-å°ˆæ¡ˆéœ€è¦çš„-packages" class="headerlink" title="5. å®‰è£ Python å°ˆæ¡ˆéœ€è¦çš„ packages"></a>5. å®‰è£ Python å°ˆæ¡ˆéœ€è¦çš„ packages</h3><p>åœ¨é€²å…¥ container å¾Œï¼ŒåŸ·è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /srv &amp;&amp;\</span><br><span class="line">pip install pip -U &amp;&amp;\</span><br><span class="line">pip install pycurl -U &amp;&amp;\</span><br><span class="line">pip install -r ./requirement.txt</span><br></pre></td></tr></table></figure>

<p>å®Œæˆå¾Œé›¢é–‹ containerï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<h3 id="6-æäº¤ï¼ˆCommitï¼‰ä¿®æ”¹åˆ°-image"><a href="#6-æäº¤ï¼ˆCommitï¼‰ä¿®æ”¹åˆ°-image" class="headerlink" title="6. æäº¤ï¼ˆCommitï¼‰ä¿®æ”¹åˆ° image"></a>6. æäº¤ï¼ˆCommitï¼‰ä¿®æ”¹åˆ° image</h3><p>åˆ—å‡ºé‹è¡Œä¸­çš„ containerï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">CONTAINER ID   IMAGE              COMMAND               CREATED         STATUS         PORTS                                          NAMES</span><br><span class="line">f8dc4ba33f2e   py2.7-dev:latest   <span class="string">&quot;/usr/sbin/sshd -D&quot;</span>   2 minutes ago   Up 2 minutes   0.0.0.0:8787-&gt;8787/tcp, 0.0.0.0:2222-&gt;22/tcp   py2.7</span><br></pre></td></tr></table></figure>

<p>å°‡ container NAMES ç‚º â€˜py2.7â€™ çš„ <code>CONTAINER ID</code> è¤‡è£½èµ·ä¾†ã€‚</p>
<p>ä½¿ç”¨ <code>docker commit</code> å°‡ä¿®æ”¹å…§å®¹å»ºç«‹æˆæ–°çš„ docker imageã€‚ä»¥ä¸‹æ˜¯å‘½ä»¤çš„èªæ³•ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker commit [CONTAINER ID] [new_image_name]</span><br></pre></td></tr></table></figure>

<p>åŸ·è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œå°‡å»ºç«‹æ–°çš„ docker image å‘½åæˆ <code>my-py2.7-dev</code>ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker commit f8dc4ba33f2e my-py2.7-dev</span><br></pre></td></tr></table></figure>

<p>å®Œæˆå¾Œï¼Œåˆ—å‡º docker imagesï¼Œå¯ä»¥çœ‹åˆ° <code>my-py2.7-dev</code> image çš„å®¹é‡é•·å¤§äº†ä¸å°‘ :)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images | grep py2.7</span><br><span class="line"></span><br><span class="line">my-py2.7-dev      latest           cd7c2ab0d9b3   6 seconds ago    453MB</span><br><span class="line">py2.7-dev         latest           10e84e2626e0   16 minutes ago   329MB</span><br></pre></td></tr></table></figure>

<h3 id="7-ä½¿ç”¨æ–°çš„-image"><a href="#7-ä½¿ç”¨æ–°çš„-image" class="headerlink" title="7. ä½¿ç”¨æ–°çš„ image"></a>7. ä½¿ç”¨æ–°çš„ image</h3><p>å…ˆç§»é™¤é‹è¡Œä¸­çš„ containerï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task down</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>docker-compose.yml</code>ï¼Œå°‡ â€˜services &gt; py &gt; image: py2.7-dev:latestâ€™ æ”¹æˆå‰›æ‰å»ºç«‹çš„ â€˜image: my-py2.7-dev:latestâ€™ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">py:</span></span><br><span class="line">    <span class="comment"># image: py2.7-dev:latest</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">my-py2.7-dev:latest</span></span><br></pre></td></tr></table></figure>

<p>å†æ¬¡é‹è¡Œ containerï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">task up</span><br></pre></td></tr></table></figure>

<p>åˆ—å‡ºé‹è¡Œä¸­çš„ containerï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND               CREATED              STATUS              PORTS                                          NAMES</span><br><span class="line">f462db97314f   my-py2.7-dev:latest   <span class="string">&quot;/usr/sbin/sshd -D&quot;</span>   About a minute ago   Up About a minute   0.0.0.0:8787-&gt;8787/tcp, 0.0.0.0:2222-&gt;22/tcp   py2.7</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ­¥é©Ÿå®Œæˆå¾Œï¼Œå°±å¯ä»¥ä¾è³´ docker image - â€˜my-py2.7-dev:latestâ€™ï¼Œä¾†è¨­å®š VS code æˆ– PyCharm ä»¥ docker container é€²è¡Œ Python 2.7 çš„é–‹ç™¼ï¼ˆå¸Œæœ›å¦‚æ­¤ XDï¼‰ã€‚</p>
<hr>
<h2 id="å…¶ä»–å¥½ç”¨çš„-docker-å‘½ä»¤"><a href="#å…¶ä»–å¥½ç”¨çš„-docker-å‘½ä»¤" class="headerlink" title="å…¶ä»–å¥½ç”¨çš„ docker å‘½ä»¤"></a>å…¶ä»–å¥½ç”¨çš„ docker å‘½ä»¤</h2><p>Get IP Address of container</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker inspect --format=<span class="string">&#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27;</span> py2.7</span><br></pre></td></tr></table></figure>

<p>Use <code>docker</code> command to run container</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -td --name py2.7 \</span><br><span class="line">         -p <span class="string">&quot;8787:8787&quot;</span> \</span><br><span class="line">         -p <span class="string">&quot;2222:22&quot;</span> \</span><br><span class="line">         -v <span class="variable">$PWD</span>:/srv \</span><br><span class="line">         -w /srv \</span><br><span class="line">         my-py2.7-dev:latest</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://www.python.org/doc/sunset-python-2/">Sunsetting Python 2</a></li>
<li><a href="https://www.cyberciti.biz/faq/use-ssh-copy-id-with-an-openssh-server-listing-on-a-different-port/">Use ssh-copy-id with an OpenSSH Server Listening On a Different Port</a></li>
<li><a href="https://www.ssh.com/academy/ssh/copy-id">Ssh-copy-id for copying SSH keys to servers</a></li>
<li><a href="https://phoenixnap.com/kb/how-to-commit-changes-to-docker-image">How to Commit Changes to a Docker Image with Examples</a></li>
<li><a href="https://dev.to/alvarocavalcanti/setting-up-a-python-remote-interpreter-using-docker-1i24">Setting Up a Python Remote Interpreter Using Docker</a></li>
<li><a href="https://code.visualstudio.com/remote/advancedcontainers/develop-remote-host">Develop on a remote Docker host</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>PyCharm è¨­å®š Interpreter - Python 2.7</title>
    <url>/2022/2022061202-pycharm-interpreter-python2-7.html</url>
    <content><![CDATA[<p>ä½¿ç”¨ PyCharm Professional Edition å°‡å°ˆæ¡ˆçš„ interpreter è¨­å®šæˆå‰ä¸€ç¯‡ <a href="/2022/2022061201-python2-7-development-setting.html">Python 2.7 é–‹ç™¼ç’°å¢ƒè¨­ç½®</a>è‡ªè£½çš„ docker image Python 2.7ã€‚</p>
<span id="more"></span>

<h2 id="å¯«åœ¨å‰é¢-Make-the-long-story-short"><a href="#å¯«åœ¨å‰é¢-Make-the-long-story-short" class="headerlink" title="å¯«åœ¨å‰é¢  Make the long story short"></a>å¯«åœ¨å‰é¢  Make the long story short</h2><p>ä»˜è²»çš„ PyCharm Professional Edition æ˜¯æœ€ä½³é¸æ“‡ï¼ŒçœŸå¿ƒä¸é¨™ã€‚PyCharm Professional Edition æ‰æœ‰æ”¯æ´ <a href="https://www.jetbrains.com/pycharm/features/">Remote development capabilities</a> é€™å¾ˆé‡è¦ï¼Œå› ç‚ºéœ€è¦è¨­å®š interpreter æŒ‡å®šç›®æ¨™æ˜¯ docker image - Python 2.7.18ï¼Œè€Œä¸”æ­¥é©Ÿå¾ˆç°¡å–®ã€‚</p>
<p>é›–ç„¶ VS Code æœ‰æ”¯æ´ <a href="https://code.visualstudio.com/remote/advancedcontainers/develop-remote-host">Develop on a remote Docker host</a> ï¼Œä¹Ÿåƒè€ƒäº† <a href="https://dev.to/alvarocavalcanti/setting-up-a-python-remote-interpreter-using-docker-1i24">Setting Up a Python Remote Interpreter Using Docker</a> ï¼Œè‹¦æˆ°äº†ä¸€ä¸‹åˆï¼Œä»ç„¶ç„¡æ³•å°‡ interpreter è¨­å®šæˆ Python 2.7ã€‚æœ€çµ‚åƒè€ƒ <a href="https://www.jetbrains.com/help/pycharm/using-docker-as-a-remote-interpreter.html">Configure an interpreter using Docker</a> ä¸€ä¸‹å­å°±è¨­å®šå®Œæˆäº†ï¼</p>
<h2 id="ç’°å¢ƒ-Environment"><a href="#ç’°å¢ƒ-Environment" class="headerlink" title="ç’°å¢ƒ  Environment"></a>ç’°å¢ƒ  Environment</h2><ul>
<li>macOS 12.3.1</li>
<li>PyCharm 2022.1.2</li>
</ul>
<h2 id="è¨­å®šæ­¥é©Ÿ-Steps"><a href="#è¨­å®šæ­¥é©Ÿ-Steps" class="headerlink" title="è¨­å®šæ­¥é©Ÿ  Steps"></a>è¨­å®šæ­¥é©Ÿ  Steps</h2><p>é–‹å•Ÿ Preferenceï¼ˆ<code>CMD + ,</code>ï¼‰ã€‚é»é¸ <strong>Project: &lt;project name&gt; &gt; Python Interpreter</strong> ï¼Œé»æ“Š <code>Python Interpreter</code> æ¬„ä½å¾Œæ–¹çš„é½’è¼ªåœ–ç¤ºï¼Œä¸¦æŒ‰ä¸‹ <code>Add</code> æœƒé–‹å•Ÿæ–°è¦–çª—ï¼Œ<br><img src="/uploads/20220601_python_interpreter.png" alt="python_interpreter"></p>
<p>åœ¨æ–°è¦–çª—ä¸­å·¦åˆ—é¸å– <strong>Docker</strong> ï¼Œæ¥è‘—åœ¨è¦–çª—å³åˆ—çš„ <code>Image name</code> æ¬„ä½ï¼Œå¾ä¸‹æ‹‰é¸é …ä¸­é¸å– <code>my-py2.7-dev:latest</code> å¾ŒæŒ‰ä¸‹ <code>OK</code> å¥—ç”¨è¨­å®šã€‚<br><img src="/uploads/20220601_assign_docker_image.png" alt="assign_docker_image"></p>
<p>å›åˆ°åŸä¾†çš„è¦–çª—ä¸­ï¼Œæª¢æŸ¥ <code>Python Interpreter</code> æ¬„ä½ï¼ŒæŒ‰ä¸‹ <code>OK</code> å¥—ç”¨è¨­å®šã€‚<br><img src="/uploads/20220601_interpreter_docker_image.png" alt="interpreter_docker_image"></p>
<p>ä»¥ä¸Šæ­¥é©Ÿå³å°‡å°ˆæ¡ˆçš„ interpreter è¨­å®šæˆè‡ªè£½çš„ docker image - <code>my-py2.7.dev</code>ï¼Œ<strong>æ˜¯ä¸æ˜¯å¾ˆç°¡å–®</strong> :)ã€‚</p>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://www.jetbrains.com/help/pycharm/using-docker-as-a-remote-interpreter.html">Configure an interpreter using Docker</a></li>
<li><a href="https://code.visualstudio.com/remote/advancedcontainers/develop-remote-host">Develop on a remote Docker host</a></li>
<li><a href="https://dev.to/alvarocavalcanti/setting-up-a-python-remote-interpreter-using-docker-1i24">Setting Up a Python Remote Interpreter Using Docker</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pycharm</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ git mv è§£æ±º macOS é è¨­å°æª”æ¡ˆä¸åˆ†å¤§å°å¯«å•é¡Œ</title>
    <url>/2018/2018030201-macos-correct-case-sentitive.html</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>macOS çš„ Disk é è¨­å°æª”æ¡ˆæ˜¯ä¸åˆ†å¤§å°å¯«çš„ï¼Œç•¶ç¨‹å¼éƒ¨ç½²åˆ° linux ä¸‹ï¼Œæ‰æœƒçŸ¥é“æœ‰å¤§å°å¯«éŒ¯èª¤å•é¡Œã€‚</p>
 <span id="more"></span>

<h2 id="ä½¿ç”¨-git-mv-æŒ‡ä»¤é€²è¡Œä¿®æ­£"><a href="#ä½¿ç”¨-git-mv-æŒ‡ä»¤é€²è¡Œä¿®æ­£" class="headerlink" title="ä½¿ç”¨ git mv æŒ‡ä»¤é€²è¡Œä¿®æ­£"></a>ä½¿ç”¨ <code>git mv</code> æŒ‡ä»¤é€²è¡Œä¿®æ­£</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># way 1</span><br><span class="line">$ git mv --force filename Filename</span><br><span class="line">$ git commit -m &quot;Set correct case for filename&quot;</span><br><span class="line"></span><br><span class="line"># way 2</span><br><span class="line">$ git mv filename tmp_filename</span><br><span class="line">$ git mv tmp_filename Filename</span><br><span class="line">$ git commit -m &quot;Set correct case for filename&quot;</span><br></pre></td></tr></table></figure>


<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://coderwall.com/p/mgi8ja/case-sensitive-git-in-mac-os-x-like-a-pro">Case-sensitive git in Mac OS X like a Pro</a> - æ–‡ç« æœ‰æåˆ°ï¼Œå¤–æ¥ä¸€å€‹ diskï¼Œä¸¦ä¸”æ ¼å¼åŒ–æˆ â€œMac OS Extended (Case-sensitive, Journaled)â€ï¼Œå°±ä¸æœƒæœ‰é€™æ¨£çš„å›°æ“¾ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>macos</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>macos</tag>
      </tags>
  </entry>
  <entry>
    <title>OSX åŸ·è¡Œ gvm pkgset use ç™¼ç”ŸéŒ¯èª¤</title>
    <url>/2017/2017042601-osx-gvm-pkgset-use-error.html</url>
    <content><![CDATA[<h2 id="ç¬¬ä¸€æ¬¡å®‰è£-gvm-å°±è¸©åˆ°å¥‡æ€ªçš„é›·"><a href="#ç¬¬ä¸€æ¬¡å®‰è£-gvm-å°±è¸©åˆ°å¥‡æ€ªçš„é›·" class="headerlink" title="ç¬¬ä¸€æ¬¡å®‰è£ gvm å°±è¸©åˆ°å¥‡æ€ªçš„é›·"></a>ç¬¬ä¸€æ¬¡å®‰è£ gvm å°±è¸©åˆ°å¥‡æ€ªçš„é›·</h2><p><a href="https://github.com/moovweb/gvm">gvm</a> æ˜¯ <a href="https://golang.org/">golang</a> çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ˆè·Ÿ nvm å¾ˆåƒï¼‰ï¼Œä½†æ˜¯ç«Ÿç„¶åœ¨ OSX ä¸‹è¸©åˆ°å¥‡æ€ªçš„é›·ï¼Œ<br>åœ¨ <code>~/.bash_profile</code> å…§çš„ <code>export GREP_OPTIONS=&#39;--color=always&#39;</code> æœƒé€ æˆ <code>gvm use</code> æˆ– <code>gvm pkgset use</code> ç„¡æ³•æ­£å¸¸é‹ä½œã€‚</p>
<span id="more"></span>

<h2 id="è§£æ±ºæ–¹å¼ï¼š"><a href="#è§£æ±ºæ–¹å¼ï¼š" class="headerlink" title="è§£æ±ºæ–¹å¼ï¼š"></a>è§£æ±ºæ–¹å¼ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ vim $HOME/.gvm/scripts/env/pkgset-use</span><br><span class="line">$ vim $HOME/.gvm/scripts/env/use</span><br></pre></td></tr></table></figure>


<p>åœ¨ <code>$GREP_PATH</code> å¾Œé¢åŠ ä¸Š <code>--color=never</code>ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹æˆ <code>$GREP_PATH --color=never</code></p>
]]></content>
      <categories>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>gvm</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨æœ¬åœ°ç«¯ä½¿ç”¨ Nodejs &amp; Ngrok é€²è¡Œ Line Bot é–‹ç™¼æ¸¬è©¦</title>
    <url>/2017/2017060201-nodejs-line-bot-p1.html</url>
    <content><![CDATA[<p>Chat Bot æ­£å¤¯ï¼Œå‰›å¥½å…¬å¸çš„å°ˆæ¡ˆæœ‰ Line Bot çš„æ‡‰ç”¨ï¼Œæ‰€ä»¥åƒè€ƒäº† <a href="https://goo.gl/ePtTRw">ä¸å¿…çœŸçš„æ¶ç«™ä¹Ÿèƒ½ 5 åˆ†é˜å¯¦æ©Ÿé«”é©— LINE bot â€“ æ•™å­¸ ( by node.js &amp; ngrok )</a>ã€<a href="http://www.oxxostudio.tw/articles/201701/line-bot.html">LINE BOT å¯¦æˆ° ( åŸç†ç¯‡ )</a>ã€<a href="http://www.oxxostudio.tw/articles/201701/line-bot-2.html">LINE BOT å¯¦æˆ° ( èŠå¤©ç¯‡ )</a> ç­‰æ–‡ç« ä¾†é€²è¡Œ Nodejs çš„ Line bot é–‹ç™¼å¯¦ä½œç·´ç¿’ã€‚</p>
<span id="more"></span>

<h2 id="é–‹ç™¼ç’°å¢ƒ"><a href="#é–‹ç™¼ç’°å¢ƒ" class="headerlink" title="é–‹ç™¼ç’°å¢ƒ"></a>é–‹ç™¼ç’°å¢ƒ</h2><ul>
<li>macOS Sierraï¼š 10.12.5</li>
<li>Nodejsï¼š 7.10.0</li>
<li>Packagesï¼š<ul>
<li><a href="https://www.npmjs.com/package/express">express</a></li>
<li><a href="https://www.npmjs.com/package/linebot">linebot</a></li>
</ul>
</li>
<li>Githubï¼š <a href="https://github.com/jerry771230/node-line-bot-practice">https://github.com/jerry771230/node-line-bot-practice</a></li>
</ul>
<h2 id="æœ¬æ¬¡å¯¦ä½œæœ‰ä»¥ä¸‹éšæ®µï¼š"><a href="#æœ¬æ¬¡å¯¦ä½œæœ‰ä»¥ä¸‹éšæ®µï¼š" class="headerlink" title="æœ¬æ¬¡å¯¦ä½œæœ‰ä»¥ä¸‹éšæ®µï¼š"></a>æœ¬æ¬¡å¯¦ä½œæœ‰ä»¥ä¸‹éšæ®µï¼š</h2><ul>
<li><a href="#linebotaccount">ç”³è«‹ Line Bot å¸³è™Ÿ</a></li>
<li><a href="#usingngrok">ngrok è®“ localhost ä¹Ÿå¯ä»¥ä½¿ç”¨ HTTPS</a></li>
<li><a href="#webhookservice">ä½¿ç”¨ Nodejs åœ¨æœ¬åœ°ç«¯éƒ¨ç½² webhook service</a></li>
<li><a href="#sendlinebot">ä½¿ç”¨ Line App å‚³è¨Šæ¯çµ¦ Line Bot</a></li>
</ul>
<h2 id="ç”³è«‹-Line-Bot-å¸³è™Ÿ"><a href="#ç”³è«‹-Line-Bot-å¸³è™Ÿ" class="headerlink" title="ç”³è«‹ Line Bot å¸³è™Ÿ"></a><a id="linebotaccount"></a>ç”³è«‹ Line Bot å¸³è™Ÿ</h2><ol>
<li><p>åˆ° <a href="https://business.line.me/zh-hant">LINE Business Center</a> ç”³è«‹å•†ç”¨å¸³è™Ÿã€‚é»æ“Šã€Œå¸³è™Ÿæ¸…å–®ã€ï¼Œå†é»æ“Šã€Œå»ºç«‹å•†ç”¨å¸³è™Ÿã€<br> <img src="https://lh3.googleusercontent.com/maPhifD7BVwbpWvElCZzWdhXqULQfbGYofmqazlAE8S0ArKXVb5kWk2r8JmAb-CBZvpH2WuQ_NubG63u-5rW0GYIpBE4-7ryoDbXmJn-YwnZWn9x2xaAuhm-0M0FsLEyBfoe=w715-h409-no" alt="ç”³è«‹å•†ç”¨å¸³æˆ¶"></p>
</li>
<li><p>æ‰¾åˆ° Messageing APIï¼Œé»æ“Šã€Œé–‹å§‹ä½¿ç”¨Developer Trialã€<br> <img src="https://lh3.googleusercontent.com/2s8QshZMPK-b4hRv3fkYZGzP0Pw_7iKf9vMnpOOyv6G6J0jtDrSrFm4NSdoGdxEC8khRDLpzsDsUKZDQ4UWQyx4JPvWYcPFh7-HRiy_g12Q5ON861Aj8oWStncau_0ZubOl5=w1022-h480-no" alt="é–‹å§‹ä½¿ç”¨Developer Trial"></p>
</li>
<li><p>è¼¸å…¥ Bot çš„å¸³è™Ÿåç¨±ï¼Œæ›´æ›åœ–ç‰‡ä»¥åŠé¸æ“‡æ¥­ç¨®ï¼Œå†æŒ‰ä¸‹ç¢ºå®šå°±æœƒå»ºç«‹æ©Ÿå™¨äººå°ˆç”¨å¸³è™Ÿ<br> <img src="https://lh3.googleusercontent.com/eKQOGxTfs3hb3rgwyQIQ9qnLWkI7pcWyHt9BOBmXEiDEOON6upYlcJMM50vahJvA03M5WKT_V5o_x-CZ68ttR8EMGh1RJSE-Hk6eMYFwpMQHlw6dCVXBBm4whOwCohEFXw4DyQ=w481-h639-no" alt="å»ºç«‹æ©Ÿå™¨äººå°ˆç”¨å¸³è™Ÿ"></p>
</li>
<li><p>åœ¨ç”³è«‹å®Œæˆçš„é é¢ä¸‹æ–¹é»æ“Šã€Œå‰å¾€LINE@MANAGERã€<br> <img src="https://lh3.googleusercontent.com/YH-sM08j0AJpFLwzbU00WMYXlnskuQBaiq7qhwXZ0LT5qFeBx6re1L8CXsMT1pLUj3K3dxb0SHEMJXbMe5h--YlYOBe0-P2G5oL94srLxVCl-KRz4GUnE5ls2hIW4F0AdHlHPw=w529-h639-no"></p>
</li>
<li><p>é–‹å§‹ä½¿ç”¨ APIã€‚é€²å…¥ LINE@ MANAGER å¾Œï¼Œåœ¨å·¦é‚Šé¸å–® ã€ŒSettingsã€-&gt; é»æ“Šã€ŒBot Settingsã€-&gt; å†æŒ‰ä¸‹ã€ŒEnable APIã€<br> <img src="https://lh3.googleusercontent.com/g0NzW_h7LR7bAlgPEwkdbxMolf5yW-MqNg2RahHGiFvuW__r2kbsh5mn7nayUb3gGC10BFX8uwBg2o4kAoIr8ukP1ksws83y6o5kfCy4MnD6Jn_y3qMOyFHbu13nJYyMTj5o4A=w957-h639-no" alt="Enable API"></p>
</li>
</ol>
<p> <img src="https://lh3.googleusercontent.com/QSvYxtP7f-wSNrPryDskR7VjB6OtpYDU8WCA-37YuC3j_QfdXH3wrraumzypogezaX7kd6-A83kh7Kpsc1xK3l1_Jg9v90X2kdaRy-1g2J15sJrEq1X3NAu4_-8ld7JbvViZRw=w611-h393-no" alt="Enabling Confirm"><br> è¨»ï¼šLINE@ MANAGER çš„ç¶²å€æœƒæ˜¯ <code>https://admin-official.line.me/</code> é–‹é ­</p>
<ol start="6">
<li>Bot Settings çš„éƒ¨ä»½è¦ç•™æ„ Usable APIs æ˜¯å¦æœ‰ <code>REPLY_MESSAGE</code> åŠ <code>PUSH_MESSAGE</code>ã€‚å¦‚æœæ²’æœ‰ <code>PUSH_MESSAGE</code> æ˜¯ä¸èƒ½é€²è¡Œ Bot ä¸»å‹•ç™¼è¨Šæ¯çµ¦ Client App çš„ã€‚<br> <img src="https://lh3.googleusercontent.com/hZmeGk-OPkAUxrjMuIqYgYbfmWmv1jVEWxQA8KT-FpjncQ-KD34K3Ur-IqGZlYg1Gp1c_QPqmdvbhNC55nOmC-NG2Gzz1frSfUNWASVxHO-F4tcsS2clrtU0Hmm8lMYNfTIj6A=w871-h639-no" alt="Use webhooks"><br> Request Settings è£¡çš„ Use webhooks è«‹å‹¾é¸ ã€ŒAllowã€ã€‚<br> Details çš„ Allow Bot to join group chatsã€Auto Reply Message åŠ Greeting Message éƒ½å‹¾é¸ ã€ŒDonâ€™t Allowã€ã€‚</li>
</ol>
<h2 id="ngrok-è®“-localhost-ä¹Ÿå¯ä»¥ä½¿ç”¨-HTTPS"><a href="#ngrok-è®“-localhost-ä¹Ÿå¯ä»¥ä½¿ç”¨-HTTPS" class="headerlink" title="ngrok è®“ localhost ä¹Ÿå¯ä»¥ä½¿ç”¨ HTTPS"></a><a id="usingngrok"></a>ngrok è®“ localhost ä¹Ÿå¯ä»¥ä½¿ç”¨ HTTPS</h2><p>Line Bot éœ€è¦æœ‰ HTTPS çš„ webhook service æ‰èƒ½æ¥å—åŠè½‰ç™¼è¨Šæ¯ï¼Œé€™æ™‚å€™å¾Œç«¯é–‹ç™¼å¿…å‚™ç¥å™¨ - <a href="https://ngrok.com/">ngrok</a>ï¼Œå¯ä»¥è®“ localhost ä½¿ç”¨ HTTPS çš„éš¨æ©Ÿç¶²å€ï¼Œé”æˆ webhook service æ¸¬è©¦ï¼Œçœå»äº†å¿…é ˆä¸Šå‚³åˆ° Server å¾Œæ‰èƒ½å¾—åˆ°æ¸¬è©¦çµæœçš„æ™‚é–“èŠ±è²»ã€‚</p>
<h3 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><p>Mac çš„éƒ¨ä»½å¯ä»¥åœ¨ <a href="https://ngrok.com/">ngrok</a> å®˜ç¶²ä¸‹è¼‰ç¨‹å¼ï¼Œè§£å£“ç¸®å¾Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚æˆ–è€…æ˜¯ä¸Ÿåˆ° <code>/usr/local/bin</code>ï¼Œæ–¹ä¾¿ä¹‹å¾Œä½¿ç”¨ã€‚</p>
<p>Termial æŒ‡ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ngrok http 8080</span></span><br></pre></td></tr></table></figure>

<p>ä»£è¡¨æŠŠå¤–ç•Œçš„æµé‡å°åˆ° localhost çš„ 8080 portã€‚åŸ·è¡Œå¾Œæœƒæœ‰ä»¥ä¸‹ç•«é¢ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ngrok by @inconshreveable          (Ctrl+C to quit)</span><br><span class="line"></span><br><span class="line">Session Status                online</span><br><span class="line">Account                       YOUR_ACCOUNT (Plan: Free)</span><br><span class="line">Version                       2.2.4</span><br><span class="line">Region                        United States (us)</span><br><span class="line">Web Interface                 http://127.0.0.1:4040</span><br><span class="line">Forwarding                    http://85ceccf9.ngrok.io -&gt; localhost:8080</span><br><span class="line"></span><br><span class="line">Connections                   ttl     opn     rt1     rt5     p50     p90</span><br><span class="line">                              0       0       0.00    0.00    0.00    0.00</span><br></pre></td></tr></table></figure>

<p>æŒ‰ä¸‹ <code>Ctrl + C</code> è·³å‡ºä¸¦åœæ­¢é‹ä½œã€‚</p>
<h3 id="ç”³è«‹-HTTPS-protocol"><a href="#ç”³è«‹-HTTPS-protocol" class="headerlink" title="ç”³è«‹ HTTPS protocol"></a>ç”³è«‹ HTTPS protocol</h3><p>åˆ° <a href="https://ngrok.com/">ngrok</a> å®˜ç¶²è¨»å†Šï¼Œå¯ä»¥ä½¿ç”¨ Github æˆ– Google ç™»å…¥ã€‚<br>ç™»å…¥çš„ç•«é¢å¦‚ä¸‹ï¼š<br><img src="https://lh3.googleusercontent.com/ZRyTQA8tuz-QiC3bJh3MjzC6U2_AliofTUUfHdnieoQJ4vO3rYt80AqR7yNyXA2KBERCuS0KXIcaTbX0ay3G2-Msz9oEj6TylLSQOqY-uYOOMKm-1M1IC4as3lP6kMkRuGdWhQ=w742-h639-no" alt="ngrok Dashborad"></p>
<p>åœ¨ Terminal ä¸‹åŸ·è¡ŒæŒ‡ä»¤ï¼Œé€™æ¨£å°±å¯ä»¥ä½¿ç”¨ https çš„ç¶²å€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ngrok authtoken &#123;token&#125;</span><br><span class="line">$ ngrok http 8080</span><br><span class="line"></span><br><span class="line">ngrok by @inconshreveable           (Ctrl+C to quit)</span><br><span class="line"></span><br><span class="line">Session Status                online</span><br><span class="line">Account                       YOUR_ACCOUNT (Plan: Free)</span><br><span class="line">Version                       2.2.4</span><br><span class="line">Region                        United States (us)</span><br><span class="line">Web Interface                 http://127.0.0.1:4040</span><br><span class="line">Forwarding                    http://ec041dbf.ngrok.io -&gt; localhost:8080</span><br><span class="line">Forwarding                    https://ec041dbf.ngrok.io -&gt; localhost:8080</span><br><span class="line"></span><br><span class="line">Connections                   ttl     opn     rt1     rt5     p50     p90</span><br><span class="line">                              0       0       0.00    0.00    0.00    0.00</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–æŒ‡ä»¤åƒè€ƒ</p>
<ul>
<li>HTTP Auth</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ngrok http -auth <span class="string">&quot;user:passwd&quot;</span> 80</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è½‰å€åˆ° local domainï¼ˆä¿®æ”¹ &#x2F;etc&#x2F;hostsï¼‰</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ngrok http -host-header=myweb.dev myweb.dev:80</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Š ngrok çš„åŸºæœ¬ä½¿ç”¨æ˜¯åƒè€ƒ <a href="https://coder.tw/?p=7211">Ngrok â€“ è®“æœ¬æ©Ÿä¹Ÿå¯ä»¥é–‹ç™¼ webhook å…éƒ¨ç½²ç’°å¢ƒçš„ç¥å™¨</a></p>
<h2 id="ä½¿ç”¨-Nodejs-åœ¨æœ¬åœ°ç«¯éƒ¨ç½²-webhook-service"><a href="#ä½¿ç”¨-Nodejs-åœ¨æœ¬åœ°ç«¯éƒ¨ç½²-webhook-service" class="headerlink" title="ä½¿ç”¨ Nodejs åœ¨æœ¬åœ°ç«¯éƒ¨ç½² webhook service"></a><a id="webhookservice"></a>ä½¿ç”¨ Nodejs åœ¨æœ¬åœ°ç«¯éƒ¨ç½² webhook service</h2><h3 id="é–‹å§‹å»ºç«‹-Nodejs-å°ˆæ¡ˆ"><a href="#é–‹å§‹å»ºç«‹-Nodejs-å°ˆæ¡ˆ" class="headerlink" title="é–‹å§‹å»ºç«‹ Nodejs å°ˆæ¡ˆ"></a>é–‹å§‹å»ºç«‹ Nodejs å°ˆæ¡ˆ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> node-line-bot</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> node-line-bot</span></span><br></pre></td></tr></table></figure>

<p>å»ºç«‹ <code>package.json</code> æª”æ¡ˆï¼Œä¸¦ä¿®æ”¹ â€œscriptsâ€ï¼Œå¢åŠ  <code>&quot;start&quot;: &quot;node .&quot;</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm init</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;node-line-bot&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;node .&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;Jerry Huang&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;MIT&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®‰è£æ¨¡çµ„ <code>linebot</code> åŠ <code>express</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm install linebot express --save</span></span><br><span class="line"></span><br><span class="line">node-line-bot@1.0.0 /Users/jerryhuang/workspace/practice/nodejs/node-line-bot</span><br><span class="line">â”œâ”€â”¬ express@4.15.3</span><br><span class="line">â”‚ â”œâ”€â”¬ accepts@1.3.3</span><br><span class="line">â”‚ â”‚ â”œâ”€â”¬ mime-types@2.1.15</span><br><span class="line">â”‚ â”‚ â”‚ â””â”€â”€ mime-db@1.27.0</span><br><span class="line">â”‚ â”‚ â””â”€â”€ negotiator@0.6.1</span><br><span class="line">â”‚ â”œâ”€â”€ array-flatten@1.1.1</span><br><span class="line">â”‚ â”œâ”€â”€ content-disposition@0.5.2</span><br><span class="line">â”‚ â”œâ”€â”€ content-type@1.0.2</span><br><span class="line">â”‚ â”œâ”€â”€ cookie@0.3.1</span><br><span class="line">â”‚ â”œâ”€â”€ cookie-signature@1.0.6</span><br><span class="line">â”‚ â”œâ”€â”¬ debug@2.6.7</span><br><span class="line">â”‚ â”‚ â””â”€â”€ ms@2.0.0</span><br><span class="line">â”‚ â”œâ”€â”€ depd@1.1.0</span><br><span class="line">â”‚ â”œâ”€â”€ encodeurl@1.0.1</span><br><span class="line">â”‚ â”œâ”€â”€ escape-html@1.0.3</span><br><span class="line">â”‚ â”œâ”€â”€ etag@1.8.0</span><br><span class="line">â”‚ â”œâ”€â”¬ finalhandler@1.0.3</span><br><span class="line">â”‚ â”‚ â””â”€â”€ unpipe@1.0.0</span><br><span class="line">â”‚ â”œâ”€â”€ fresh@0.5.0</span><br><span class="line">â”‚ â”œâ”€â”€ merge-descriptors@1.0.1</span><br><span class="line">â”‚ â”œâ”€â”€ methods@1.1.2</span><br><span class="line">â”‚ â”œâ”€â”¬ on-finished@2.3.0</span><br><span class="line">â”‚ â”‚ â””â”€â”€ ee-first@1.1.1</span><br><span class="line">â”‚ â”œâ”€â”€ parseurl@1.3.1</span><br><span class="line">â”‚ â”œâ”€â”€ path-to-regexp@0.1.7</span><br><span class="line">â”‚ â”œâ”€â”¬ proxy-addr@1.1.4</span><br><span class="line">â”‚ â”‚ â”œâ”€â”€ forwarded@0.1.0</span><br><span class="line">â”‚ â”‚ â””â”€â”€ ipaddr.js@1.3.0</span><br><span class="line">â”‚ â”œâ”€â”€ qs@6.4.0</span><br><span class="line">â”‚ â”œâ”€â”€ range-parser@1.2.0</span><br><span class="line">â”‚ â”œâ”€â”¬ send@0.15.3</span><br><span class="line">â”‚ â”‚ â”œâ”€â”€ destroy@1.0.4</span><br><span class="line">â”‚ â”‚ â”œâ”€â”¬ http-errors@1.6.1</span><br><span class="line">â”‚ â”‚ â”‚ â””â”€â”€ inherits@2.0.3</span><br><span class="line">â”‚ â”‚ â””â”€â”€ mime@1.3.4</span><br><span class="line">â”‚ â”œâ”€â”€ serve-static@1.12.3</span><br><span class="line">â”‚ â”œâ”€â”€ setprototypeof@1.0.3</span><br><span class="line">â”‚ â”œâ”€â”€ statuses@1.3.1</span><br><span class="line">â”‚ â”œâ”€â”¬ type-is@1.6.15</span><br><span class="line">â”‚ â”‚ â””â”€â”€ media-typer@0.3.0</span><br><span class="line">â”‚ â”œâ”€â”€ utils-merge@1.0.0</span><br><span class="line">â”‚ â””â”€â”€ vary@1.1.1</span><br><span class="line">â””â”€â”¬ linebot@1.3.0</span><br><span class="line">  â”œâ”€â”¬ body-parser@1.17.2</span><br><span class="line">  â”‚ â”œâ”€â”€ bytes@2.4.0</span><br><span class="line">  â”‚ â”œâ”€â”€ iconv-lite@0.4.15</span><br><span class="line">  â”‚ â””â”€â”€ raw-body@2.2.0</span><br><span class="line">  â””â”€â”¬ node-fetch@1.7.0</span><br><span class="line">    â”œâ”€â”€ encoding@0.1.12</span><br><span class="line">    â””â”€â”€ is-stream@1.1.0</span><br><span class="line"></span><br><span class="line">npm WARN node-line-bot@1.0.0 No description</span><br><span class="line">npm WARN node-line-bot@1.0.0 No repository field.</span><br></pre></td></tr></table></figure>

<p>å»ºç«‹ <code>index.js</code> æª”æ¡ˆçš„å…§å®¹å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> linebot = <span class="built_in">require</span>(<span class="string">&#x27;linebot&#x27;</span>),</span><br><span class="line">    express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;./config.json&#x27;</span>),</span><br><span class="line">    util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bot = <span class="title function_">linebot</span>(&#123;</span><br><span class="line">    <span class="attr">channelId</span>: <span class="string">&#x27;Line Bot Channel ID&#x27;</span>,</span><br><span class="line">    <span class="attr">channelSecret</span>: <span class="string">&#x27;Line Bot Channel Secret&#x27;</span>,</span><br><span class="line">    <span class="attr">channelAccessToken</span>: <span class="string">&#x27;Line Bot Access Token&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> linebotParser = bot.<span class="title function_">parser</span>(),</span><br><span class="line">    app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">bot.<span class="title function_">on</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// æŠŠæ”¶åˆ°è¨Šæ¯çš„ event å°å‡ºä¾†</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/webhook&#x27;</span>, linebotParser);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ localhost èµ° 8080 port</span></span><br><span class="line"><span class="keyword">let</span> server = app.<span class="title function_">listen</span>(process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">8080</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> port = server.<span class="title function_">address</span>().<span class="property">port</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;My Line bot App running on port&quot;</span>, port);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="å¦‚ä½•å–å¾—-Line-Bot-çš„-Channel-ID-åŠè¨­å®š-Webhook"><a href="#å¦‚ä½•å–å¾—-Line-Bot-çš„-Channel-ID-åŠè¨­å®š-Webhook" class="headerlink" title="å¦‚ä½•å–å¾— Line Bot çš„ Channel ID åŠè¨­å®š Webhook"></a>å¦‚ä½•å–å¾— Line Bot çš„ Channel ID åŠè¨­å®š Webhook</h3><p>Channel IDã€Channel Secret åŠ Channel Access Token å¯ä»¥å¾ LINE Business Center é€²å…¥å¾Œå–å¾—</p>
<h4 id="å–å¾—-Channel-IDã€Channel-Secret-åŠ-Channel-Access-Token"><a href="#å–å¾—-Channel-IDã€Channel-Secret-åŠ-Channel-Access-Token" class="headerlink" title="å–å¾— Channel IDã€Channel Secret åŠ Channel Access Token"></a>å–å¾— Channel IDã€Channel Secret åŠ Channel Access Token</h4><p>å›åˆ° LINE Business Center æŒ‰ä¸‹ Messaging API å³é‚Šçš„ã€ŒLINE Developersã€<br> <img src="https://lh3.googleusercontent.com/i2ZbXKUPnLO3EB-GpOH7CwbwLHB5xVFTI8J5ZSHm2GyGNmfIFmkpyjWLBoGA0Lo7J-xAS0OwC4C4jiqOG1SAKCksmeNr_LRmVB5pn0E5EZBg9C9Xx_rq0EyywNEWJZpkqDHriw=w738-h583-no" alt="å‰å¾€ LINE Developers"></p>
<p>åœ¨ LINE developers ä¸‹çš„ â€œBasic informationâ€ï¼Œå°‡ â€œChannel IDâ€ã€â€Channel Secretâ€ï¼ˆé»é¸ SHOW æœƒå‡ºç¾ï¼‰ã€ â€œChannel Access Tokenâ€ è¤‡è£½è²¼åˆ° index.js è£¡å°æ‡‰çš„ç¨‹å¼ä¸­<br> <img src="https://lh3.googleusercontent.com/nhK_bbRrgxY-cCb0D_79yUV-e_ARnRydKBXgj9QpUaoQh0-Lv5AdU7MsNgbK1LmB8VUuFUbOkRRfbLbX1kj8ZNNfIMJq7yo2oz8eSPlvmZOB5_Ce7LW45X8e9fuNujyJHEdaJQ=w654-h639-no" alt="å–å¾— Channel ID"></p>
<p>é»é¸ ISSUE æœƒç”¢ç”Ÿ â€œChannel Access Tokenâ€<br> <img src="https://lh3.googleusercontent.com/HXbB5WOezmhLSsokuOp4TZEFOn1xC10jdNXsZj76RH3fI5-OvJYd4TGYR6VN6AYLGgFIeLJCfXPznvnaZadwbFI6nVnx9cVW1ybWFcu5lFDkt0dgkUA5vHGHaqlpe9j2_OK9Kw=w633-h639-no" alt="å–å¾— Channel Access Token"></p>
<h4 id="è¨­å®š-Webhook-URL"><a href="#è¨­å®š-Webhook-URL" class="headerlink" title="è¨­å®š Webhook URL"></a>è¨­å®š Webhook URL</h4><p>åŒæ¨£åœ¨ â€œBasic informationâ€ ä¸‹ï¼ŒæŒ‰ä¸‹å³ä¸‹è§’çš„ â€œEDITâ€ï¼Œç„¶å¾Œå°‡ ngrok ç”¢ç”Ÿçš„ç¶²å€ä»¥åŠ index.js å…§ç›£è½ post mehtod çš„è·¯å¾‘çµ„åˆ <code>https://ec041dbf.ngrok.io/webhook</code> è²¼åˆ° â€œWebhook URLâ€ ä¸­<br> <img src="https://lh3.googleusercontent.com/ptb0MmQ-AwOc4Ze5EywsFwy94QzjbOlWkXLmQtisBig5qHSCxpgVhIpNbOC2iJHk9PrwJHcBfHO9aKvB5biE95TkuQ-pqIgX4yi0b8BNrJO3qeI9OcnBCYPP2qpvw71IaiPWCg=w600-h639-no" alt="è¨­å®š Webhook URL"></p>
<p>å›åˆ° Terminal ç•«é¢ï¼Œå•Ÿå‹• webhook service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">node index.js</span></span><br></pre></td></tr></table></figure>

<p>å†å› LINE developers çš„ â€œBasic informationâ€ï¼ŒæŒ‰ä¸‹ Webhoo URL å³æ–¹çš„ â€œVERIFYâ€ ä»¥é©—è­‰æ˜¯å¦æ­£ç¢ºã€‚</p>
<p>Terminal ç•«é¢æœƒæœ‰ä»¥ä¸‹è³‡è¨Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123; replyToken: &#x27;00000000000000000000000000000000&#x27;,</span><br><span class="line">  type: &#x27;message&#x27;,</span><br><span class="line">  timestamp: 1451617200000,</span><br><span class="line">  source:</span><br><span class="line">   &#123; type: &#x27;user&#x27;,</span><br><span class="line">     userId: &#x27;UdeadbeefdeadbeefdeLINEBOTUSERID&#x27;,</span><br><span class="line">     profile: [Function] &#125;,</span><br><span class="line">  message:</span><br><span class="line">   &#123; id: &#x27;100001&#x27;,</span><br><span class="line">     type: &#x27;text&#x27;,</span><br><span class="line">     text: &#x27;Hello,world&#x27;,</span><br><span class="line">     content: [Function] &#125;,</span><br><span class="line">  reply: [Function] &#125;</span><br><span class="line">&#123; replyToken: &#x27;ffffffffffffffffffffffffffffffff&#x27;,</span><br><span class="line">  type: &#x27;message&#x27;,</span><br><span class="line">  timestamp: 1451617210000,</span><br><span class="line">  source:</span><br><span class="line">   &#123; type: &#x27;user&#x27;,</span><br><span class="line">     userId: &#x27;UdeadbeefdeadbeefdeLINEBOTUSERID&#x27;,</span><br><span class="line">     profile: [Function] &#125;,</span><br><span class="line">  message:</span><br><span class="line">   &#123; id: &#x27;100002&#x27;,</span><br><span class="line">     type: &#x27;sticker&#x27;,</span><br><span class="line">     packageId: &#x27;1&#x27;,</span><br><span class="line">     stickerId: &#x27;1&#x27;,</span><br><span class="line">     content: [Function] &#125;,</span><br><span class="line">  reply: [Function] &#125;</span><br></pre></td></tr></table></figure>


<h2 id="ä½¿ç”¨-Line-App-å‚³è¨Šæ¯çµ¦-Line-Bot"><a href="#ä½¿ç”¨-Line-App-å‚³è¨Šæ¯çµ¦-Line-Bot" class="headerlink" title="ä½¿ç”¨ Line App å‚³è¨Šæ¯çµ¦ Line Bot"></a><a id="sendlinebot"></a>ä½¿ç”¨ Line App å‚³è¨Šæ¯çµ¦ Line Bot</h2><p>æ‰‹æ©Ÿ Line App æƒæ  LINE developers çš„ â€œBasic informationâ€ ç•«é¢ä¸­çš„ QR Code å°‡ Line Bot åŠ å…¥ï¼Œç„¶å¾Œè¼¸å…¥æ–‡å­—ï¼Œæ¸¬è©¦ Line Bot æ˜¯å¦æœ‰æ­£ç¢ºæ¥æ”¶åˆ°ã€‚<br> <img src="https://lh3.googleusercontent.com/M6x09wRnbeDagDnrCe0m7rQAPocOIOnhooSD6mOnLbBG-ygU2M-VRi7UWcYVQ6jHkkQyy9htxI54rehBjWBQFwzpw_EI5QQSTzIct5UtFO3aB0sgykQllqpd3ehUjeq4gNF7wA=w317-h181-no"></p>
<p>å¦‚æœæœ‰æ­£ç¢ºæ”¶åˆ°è¨Šæ¯ï¼Œå‰‡ Terminal ç•«é¢æœƒé¡¯ç¤ºä»¥ä¸‹è³‡è¨Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123; type: &#x27;message&#x27;,</span><br><span class="line">  replyToken: &#x27;98eb2ca92bdb468c9REPLYTOKEN&#x27;,</span><br><span class="line">  source:</span><br><span class="line">   &#123; userId: &#x27;U08cee31d0f3a94CLIENTAPPUSERID&#x27;,</span><br><span class="line">     type: &#x27;user&#x27;,</span><br><span class="line">     profile: [Function] &#125;,</span><br><span class="line">  timestamp: 1496462418683,</span><br><span class="line">  message:</span><br><span class="line">   &#123; type: &#x27;text&#x27;,</span><br><span class="line">     id: &#x27;618217MSGID&#x27;,</span><br><span class="line">     text: &#x27;é–‹ç™¼æ¸¬è©¦Q Q&#x27;,</span><br><span class="line">     content: [Function] &#125;,</span><br><span class="line">  reply: [Function] &#125;</span><br></pre></td></tr></table></figure>


<h3 id="å°‡æ”¶åˆ°çš„è¨Šæ¯ï¼Œå›è¦†çµ¦-Client-App"><a href="#å°‡æ”¶åˆ°çš„è¨Šæ¯ï¼Œå›è¦†çµ¦-Client-App" class="headerlink" title="å°‡æ”¶åˆ°çš„è¨Šæ¯ï¼Œå›è¦†çµ¦ Client App"></a>å°‡æ”¶åˆ°çš„è¨Šæ¯ï¼Œå›è¦†çµ¦ Client App</h3><p>ä¿®æ”¹ä¸€ä¸‹ on â€˜messageâ€™ çš„å…§å®¹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">bot.<span class="title function_">on</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// æŠŠæ”¶åˆ°è¨Šæ¯çš„ event å°å‡ºä¾†</span></span><br><span class="line">    <span class="comment">//console.log(event);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡è¤‡ client è¼¸å…¥çš„å…§å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">message</span>.<span class="property">type</span> = <span class="string">&#x27;text&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> msg = event.<span class="property">message</span>.<span class="property">text</span>;</span><br><span class="line">        event.<span class="title function_">reply</span>(msg).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">            <span class="comment">// success</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">            <span class="comment">// error</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¨˜å¾—è¦é‡å•Ÿ nodejs server å–” :)</p>
<p> <img src="https://lh3.googleusercontent.com/hx85cXamDUf7tD3pktZZtgP1w46UyMydyGa1PcO3bdVvSBJhCJbZuDBDeQCC4VFaEpV9fhGyJVB1sdnFEMjiMqo6zCaVSmI7wQHpSXX4Fb3xx2--T-x_wnNRh_i7z-5p2X3mvw=w319-h282-no" alt="é‡è¤‡ client è¼¸å…¥çš„å…§å®¹"></p>
<h3 id="ä¸»å‹•ç™¼é€è¨Šæ¯"><a href="#ä¸»å‹•ç™¼é€è¨Šæ¯" class="headerlink" title="ä¸»å‹•ç™¼é€è¨Šæ¯"></a>ä¸»å‹•ç™¼é€è¨Šæ¯</h3><p>è®“ server å•Ÿå‹•å¾Œ 3 ç§’ï¼Œç™¼é€è¨Šæ¯çµ¦ Client Appï¼Œè«‹åœ¨ index.js åŠ å…¥ä»¥ä¸‹ç¨‹å¼ï¼Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸»å‹•ç™¼é€è¨Šæ¯çµ¦ Client App</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> userId = <span class="string">&#x27;Client App User ID&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> sendMsg = <span class="string">&quot;push msg to one user&quot;</span>;</span><br><span class="line">    bot.<span class="title function_">push</span>(userId, [sendMsg]);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userId: &#x27;</span> + userId);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send: &#x27;</span> + sendMsg);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<p> <img src="https://lh3.googleusercontent.com/bq-9Ck0gZ8aS5gcP6TKdcSjUAsdSVBpF-EcJqSSmEWTyHxfLKDEBgxfBKCMG0P1267Apl_tcaxr24omYJiGqruOYbdpr4BxiUWQh_dOmIytlfAw3kfHdQppgwF8gd0y9JnWaZw=w320-h335-no" alt="ä¸»å‹•ç™¼é€è¨Šæ¯"></p>
<h2 id="åƒè€ƒè³‡æ–™ï¼š"><a href="#åƒè€ƒè³‡æ–™ï¼š" class="headerlink" title="åƒè€ƒè³‡æ–™ï¼š"></a>åƒè€ƒè³‡æ–™ï¼š</h2><ul>
<li><a href="http://www.oxxostudio.tw/articles/201701/line-bot.html">LINE BOT å¯¦æˆ° ( åŸç†ç¯‡ )</a></li>
<li><a href="http://www.oxxostudio.tw/articles/201701/line-bot-2.html">LINE BOT å¯¦æˆ° ( èŠå¤©ç¯‡ )</a></li>
<li><a href="https://goo.gl/ePtTRw">ä¸å¿…çœŸçš„æ¶ç«™ä¹Ÿèƒ½ 5 åˆ†é˜å¯¦æ©Ÿé«”é©— LINE bot â€“ æ•™å­¸ ( by node.js &amp; ngrok )</a></li>
<li><a href="https://coder.tw/?p=7211">Ngrok â€“ è®“æœ¬æ©Ÿä¹Ÿå¯ä»¥é–‹ç™¼ webhook å…éƒ¨ç½²ç’°å¢ƒçš„ç¥å™¨</a></li>
<li><a href="https://ngrok.com/">ngrok.com</a></li>
</ul>
<h3 id="Line-Bot-çš„åœ–ç‰‡ä¾†æº"><a href="#Line-Bot-çš„åœ–ç‰‡ä¾†æº" class="headerlink" title="Line Bot çš„åœ–ç‰‡ä¾†æº"></a>Line Bot çš„åœ–ç‰‡ä¾†æº</h3><ul>
<li><a href="https://tgram.ru/bots/topics_bot">tgram.ru</a></li>
<li><a href="https://tgram.ru/wiki/bots/image/topics_bot.jpg">https://tgram.ru/wiki/bots/image/topics_bot.jpg</a></li>
</ul>
]]></content>
      <categories>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
        <tag>line bot</tag>
        <tag>ngrok</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo å®‰è£ç­†è¨˜</title>
    <url>/2017/2017081801-hexo-install-notes.html</url>
    <content><![CDATA[<h2 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/GITPAGEUSERNAME/GITPAGEUSERNAME.github.io.git .deploy/GITPAGEUSERNAME.github.io</span><br></pre></td></tr></table></figure>


<h2 id="Shell-Script"><a href="#Shell-Script" class="headerlink" title="Shell Script"></a>Shell Script</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">hexo generate</span><br><span class="line">cp -R public/* .deploy/codefuntw.github.io</span><br><span class="line">cd .deploy/codefuntw.github.io</span><br><span class="line">git add .</span><br><span class="line">git commit -m â€œupdateâ€</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>


<h2 id="Custom-Domain-Setting-Reference"><a href="#Custom-Domain-Setting-Reference" class="headerlink" title="Custom Domain Setting Reference"></a>Custom Domain Setting Reference</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://help.github.com/articles/setting-up-an-apex-domain/</span><br><span class="line">https://help.github.com/articles/setting-up-an-apex-domain/#configuring-a-records-with-your-dns-provider</span><br><span class="line">https://help.github.com/articles/adding-or-removing-a-custom-domain-for-your-github-pages-site/</span><br></pre></td></tr></table></figure>

<h3 id="Custom-Domain-å°æ‡‰åˆ°-GitHub-page"><a href="#Custom-Domain-å°æ‡‰åˆ°-GitHub-page" class="headerlink" title="Custom Domain å°æ‡‰åˆ° GitHub page"></a>Custom Domain å°æ‡‰åˆ° GitHub page</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ dig blog.codefun.tw +nostats +nocomments +nocmd</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; blog.codefun.tw +nostats +nocomments +nocmd</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;blog.codefun.tw.       IN  A</span><br><span class="line">blog.codefun.tw.    3599    IN  CNAME   GITPAGEUSERNAME.github.io.</span><br><span class="line">GITPAGEUSERNAME.github.io.  3599    IN  CNAME   github.map.fastly.net.</span><br><span class="line">github.map.fastly.net.  2865    IN  CNAME   prod.github.map.fastlylb.net.</span><br><span class="line">prod.github.map.fastlylb.net. 13 IN A   151.101.100.133</span><br></pre></td></tr></table></figure>


<h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><h3 id="å¸¸ç”¨åŸºæœ¬æŒ‡ä»¤"><a href="#å¸¸ç”¨åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨åŸºæœ¬æŒ‡ä»¤"></a>å¸¸ç”¨åŸºæœ¬æŒ‡ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo g  # æˆ–è€… hexo generate</span><br><span class="line">$ hexo s  # æˆ–è€… hexo serverï¼Œå¯ä»¥åœ¨ http://localhost:4000/ æŸ¥çœ‹</span><br><span class="line">$ hexo deploy (hexo d)  # éƒ¨ç½²åˆ°é ç«¯</span><br><span class="line">$ hexo new &quot;postName&quot;  # æ–°å»ºæ–‡ç« </span><br><span class="line">$ hexo new page &quot;pageName&quot;  # æ–°å»ºé é¢</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨ç°¡å¯«"><a href="#å¸¸ç”¨ç°¡å¯«" class="headerlink" title="å¸¸ç”¨ç°¡å¯«"></a>å¸¸ç”¨ç°¡å¯«</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo n == hexo new</span><br><span class="line">$ hexo g == hexo generate</span><br><span class="line">$ hexo s == hexo server</span><br><span class="line">$ hexo d == hexo deploy</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸ç”¨çµ„åˆ"><a href="#å¸¸ç”¨çµ„åˆ" class="headerlink" title="å¸¸ç”¨çµ„åˆ"></a>å¸¸ç”¨çµ„åˆ</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo d -g  # ç”Ÿæˆéƒ¨ç½²</span><br><span class="line">$ hexo s -g  # ç”Ÿæˆé è¦½</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-feed</span><br><span class="line">$ npm install hexo-generator-sitemap</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨ Google Hangouts é€²è¡Œé ç«¯å¤šäººæœƒè­°</title>
    <url>/2017/2017081802-google-hangouts-multi-person-meeting.html</url>
    <content><![CDATA[<ol>
<li>é–‹å•Ÿ Google Chrome ç€è¦½å™¨ä¸¦ä¸”ç™»å…¥ Google å¸³è™Ÿï¼Œç„¶å¾Œåœ¨ç¶²å€åˆ—æœå°‹ <code>Google Hangouts</code> æˆ–ç›´æ¥é–‹å•Ÿé€£çµ <a href="https://hangouts.google.com/?hl=zh-TW">https://hangouts.google.com/?hl=zh-TW</a> ã€‚</li>
</ol>
 <span id="more"></span>

<ol start="2">
<li><p>é€²å…¥ <a href="https://hangouts.google.com/?hl=zh-TW">https://hangouts.google.com/?hl=zh-TW</a> é é¢å¾Œé»æ“Š <code>è¦–è¨Šé€šè©±</code>ã€‚<br><img src="https://lh3.googleusercontent.com/AlFUgzsOF6r7JUqpzjdfq5D1af5WpFffSDOuWE94uCZQjUDvay_gIb7Ab_01fsDXcuyLeiT7IT-Iohm0bFuN5rilRxYpbxvzKEm9jCXHsb9g8Qldxfc022gsid-IXbTBpyb-Fg285g=w1015-h598-no" alt="é–‹å•Ÿè¦–è¨Šé€šè©±"></p>
</li>
<li><p>åŒæ„ Google Hangouts å–ç”¨æ”å½±æ©ŸåŠéº¥å…‹é¢¨çš„æ¬Šé™ï¼Œå³å¯æ­£å¼é–‹å•Ÿæœƒè­°ã€‚<br><img src="https://lh3.googleusercontent.com/komj3VnPhw7yi-KjjhBGMzh_FWEjp_rHLrB-fuF1cD2thBBGST1xnm0K_HwKmLAzsIqCS66qkK9D6oiM-QpggSjEmR0IppLB6NqsjcnpDXMK61iOx7OQ-6ob0Cev-AFrCX-Icc-b4A=w1026-h717-no" alt="åŒæ„å–ç”¨æ”å½±æ©ŸåŠéº¥å…‹é¢¨"></p>
</li>
<li><p>é‚€è«‹é€²å…¥æœƒè­°çš„æ–¹å¼æœ‰äºŒï¼Œä¸€æ˜¯é€é email é‚€è«‹ï¼ŒäºŒæ˜¯åˆ†äº«é€£çµã€‚<br><img src="https://lh3.googleusercontent.com/7funsf3-O_S6Pn7PDDOy8ufZfE4yLcnFdYshes6aVDhyyTzwMdA-F6JHoG4agLqYxWIwVVMx_IrhZXerDaFkWGac-sPETDDnxktLK8zuRZKziQfLJLtzvlIPlejRiaehZNs2zmt--w=w1097-h802-no" alt="é‚€è«‹é€²å…¥æœƒè­°çš„æ–¹å¼"></p>
</li>
<li><p>è¦åˆ†äº«å ±å‘Šçš„å…§å®¹çµ¦å…¶ä»–äººæ™‚ï¼Œå¯ä»¥é»æ“Šå³ä¸Šè§’ã€‚<br><img src="https://lh3.googleusercontent.com/2dApM7z6B2B4J5OUJmLsqeV0aDH4DgVAAleQJHWxga_6LaF_Cd_gK5o_TR3cgQfPwSK0Va6eS_AS_G88Pi7AW5_9eMiGBBAhniwnv3KG8KqANnZoXa_BaxnJ_Kz0Mx1WsmRB4AMbQA=w933-h705-no" alt="é–‹å•Ÿè¢å¹•åˆ†äº«"></p>
</li>
<li><p>ç„¶å¾Œé»æ“Š <code>åˆ†äº«è¢å¹•ç•«é¢</code><br><img src="https://lh3.googleusercontent.com/aj9yUUt70f5zdQ5X-InP-J_CJTD2SDb8EkTYU9B-6jf-Io7rsxAyZp1BzmPDvMO3VIykYCJ-rUxZQ7LLltmNkVtcXDJYy-84wgdFusiNJsvNt60fVrV_zJ4INBpZseRjxRtudYPvTQ=w1097-h802-no" alt="åˆ†äº«è¢å¹•ç•«é¢"></p>
</li>
<li><p>å†é¸æ“‡è¦åˆ†äº«è¢å¹•ï¼ˆYour Entire Screenï¼‰é‚„æ˜¯æ‡‰ç”¨ç¨‹å¼ï¼ˆApplication Windowï¼‰ã€‚<br><img src="https://lh3.googleusercontent.com/4l7x9qHKu-th4PQqFmaxzIB2Ri5tqYaIJNB0s_Ku3FgrhQcC43ch7E7JlMhT2AihQ3GY4bfYmem1zi3sqZeK1n0zFtxqZjvEsRN2cIN0MRQtM1xGQbQ0z4l6npF64mfzrIm4Dos12A=w617-h523-no" alt="åˆ†äº«æ•´å€‹è¢å¹•ç•«é¢"><br><img src="https://lh3.googleusercontent.com/9EmKhj4VscJAmj9nL3GUGgOiYqoPs8iKlpEkzCH5gPECBEuvz9TSrvUlTamRs3u5Z4zza9UqLJMT0D6mgQxwcToRTdfin2pL6d2zdxnPKonmVIBQg_pNnaiHEvzWcoC7UJEDk51-XQ=w619-h523-no" alt="åˆ†äº«æ‡‰ç”¨ç¨‹å¼"></p>
</li>
<li><p>å†é»æ“Š <code>Share</code>ï¼Œæ­¤æ™‚ä½ çš„ Google Hangouts ç•«é¢å°±æœƒæ˜¯è¦åˆ†äº«çš„å…§å®¹ã€‚</p>
</li>
<li><p>è¦çœ‹å…¶ä»–äººåˆ†äº«çš„è¢å¹•ï¼Œé»æ“Šä¸»è¦–çª—ä¸‹æ–¹çš„å…¶ä»–äººçš„å°è¦–çª—å°±å¯ä»¥é€²è¡Œåˆ‡æ›ã€‚<br><img src="https://lh3.googleusercontent.com/sedtAm7wrJNBXCEaVVhg5PBIinaNEtYXNzzZL4rYf39v2-p6d3hDeYFzoXZk6s5ZOpGs_5I0R9LVDkQrBkXp_e59ZF6D6cWxqQuF-Bpp9xFV7r-AJPGdhKp73NeNy58SlMdXHy52ag=w1182-h673-no" alt="åˆ‡æ›åˆ°ä»–äººåˆ†äº«çš„è¢å¹•"></p>
</li>
</ol>
<p>ä»¥ä¸Šæˆªåœ–å…§å®¹æ˜¯åœ¨ MAC OS ä¸‹æ“ä½œçš„ç•«é¢ï¼Œå…¶ä»– OS å¯èƒ½æœƒæœ‰å‡ºå…¥ã€‚</p>
]]></content>
      <categories>
        <category>notes</category>
      </categories>
      <tags>
        <tag>IM</tag>
        <tag>Google Hangouts</tag>
      </tags>
  </entry>
  <entry>
    <title>é–‹ç™¼å»£å‘Šç³»çµ±ï¼ˆDSPï¼‰ä¸èƒ½ä¸çŸ¥é“çš„é—œéµå­—ï¼</title>
    <url>/2017/2017081803-cpc-cpa-ad-keywords.html</url>
    <content><![CDATA[<h2 id="é—œéµå­—"><a href="#é—œéµå­—" class="headerlink" title="é—œéµå­—"></a>é—œéµå­—</h2><ul>
<li>DSP: Demand Side Platform ç¶²è·¯å»£å‘Šä¸­çš„éœ€æ±‚æ–¹å¹³å°ï¼Œå¯ä»¥è®“å»£å‘Šä¸»é€²è¡Œè·¨åª’é«”çš„è‡ªå‹•åŒ–å»£å‘ŠæŠ•æ”¾ã€‚J: è²·å»£å‘Šç‰ˆä½</li>
<li>SSP: Supply Side Platform æ˜¯ç¶²è·¯åª’é«”ä¸­çš„ä¾›æ‡‰æ–¹å¹³å°ã€‚SSP å¹³å°å¹«åŠ©ç¶²è·¯åª’é«”è¨—ç®¡å…¶å»£å‘Šä½å’Œå»£å‘Šäº¤æ˜“ï¼Œèˆ‡ç¶²è·¯äº¤æ˜“å¹³å°å°æ¥ï¼Œå¾è€Œå°‡ä»–å€‘çš„æµé‡è®Šç¾ã€‚J: è³£å»£å‘Šç‰ˆä½</li>
<li>DMP: Data-Management Platform æ˜¯å°ˆé–€ç‚ºå»£å‘Šä¸»ã€åª’é«”ç­‰é–‹ç™¼çš„å»£å‘Šæ•¸æ“šç®¡ç†å¹³å°ï¼Œä¸»è¦åˆ†æã€å„²å­˜ç”¨æˆ¶è¡Œç‚ºæ•¸æ“šï¼Œä¸¦ç®¡ç†ç›¸é—œè³‡æ–™ï¼Œç‚ºå»£å‘Šä¸»æä¾›ç²¾æº–çš„ç”¨æˆ¶è¡Œç‚ºåˆ†æã€‚</li>
</ul>
<span id="more"></span>

<ul>
<li>RTB: Real Time Billing</li>
<li>CPC: Cost Per Click æ¯æ¬¡é»æ“Šè¨ˆåƒ¹</li>
<li>CPM: Cost Per Milleï¼Œæˆ–è€…Cost Per Thousand;Cost Per Impressionsï¼Œæ¯åƒæ¬¡å±•ç¤ºè¨ˆåƒ¹</li>
<li>CPA: Cost Per Action ä»¥å¯¦éš›è¡Œå‹•æ•ˆæœä¾†è¨ˆç®—æˆæœ¬</li>
<li>CPS: Cost Per Sales æ¯æ¬¡æœ‰æ•ˆéŠ·å”®å®šåƒ¹</li>
<li>CPV: Cost Per View æ¯æ¬¡è§€çœ‹æˆæœ¬</li>
<li>AD Exchange: ç¶²è·¯å»£å‘Šäº¤æ˜“å¹³å°ï¼ŒåŠŸèƒ½å°±æ˜¯è¯ç¹«å»£å‘Šçš„è³£æ–¹ï¼ˆåª’é«”ã€ç¶²ç«™ä¸»ï¼‰å’Œè²·æ–¹ï¼ˆå»£å‘Šä¸»ï¼‰ã€‚Ad Exchange å¹³å°äº¤æ˜“çš„å…¬å¸åŒ…æ‹¬æœ‰ Yahooã€Googleã€The Rubicon Projectã€OpenXã€AppNexus ç­‰</li>
<li>AD Network: è¯æ’­ç¶²</li>
<li>ROI: Return On Investment æ¯æŠ•è³‡ä¸€å¡ŠéŒ¢æ‰€å¾—åˆ°å›é¥‹çš„ç™¾åˆ†æ¯”</li>
<li>ROAS: Return On AD Spending å»£å‘Šæ²’æŠ•å…¥ä¸€å¡ŠéŒ¢å¯ç²å¾—çš„ç‡Ÿæ”¶</li>
</ul>
<hr>
<h2 id="DSP-å„ªé»"><a href="#DSP-å„ªé»" class="headerlink" title="DSP å„ªé»"></a>DSP å„ªé»</h2><ul>
<li>ç²¾ç¢ºçš„å—çœ¾å®šå‘</li>
<li>ç°¡å–®å¥½ç”¨çš„ä½¿ç”¨è€…ç•Œé¢</li>
<li>å¼·å¤§çš„ RTB æŠ€è¡“</li>
<li>è³¼è²·æµç¨‹æ›´å¿«æ›´ç°¡å–®</li>
<li>æ•´åˆå¤šç¨®æœå‹™ï¼ŒæŒçºŒç²¾é€²ä¸€ç«™åŒ–</li>
<li>å¯¦ç¾è·¨å¹³å°çµ±ä¸€ç®¡ç†</li>
</ul>
<hr>
<h2 id="åƒè€ƒæ–‡ç« "><a href="#åƒè€ƒæ–‡ç« " class="headerlink" title="åƒè€ƒæ–‡ç« "></a>åƒè€ƒæ–‡ç« </h2><ul>
<li><a href="https://goo.gl/BFs31A">é—œæ–¼RTB, DSP, DMPçš„ä¸€äº›å°äº‹åŠç°¡å–®èªçŸ¥</a></li>
<li><a href="https://www.bnext.com.tw/ext_rss/view/id/651447">è¡ŒéŠ·äººå¿…çŸ¥ï¼ DSPå»£å‘Šå¹³å°è¿·æ€æ±‚è§£7å¤§å®ˆå‰‡</a></li>
<li><a href="https://www.inside.com.tw/2016/07/01/what-is-dsp-ssp-dmp">ã€ç¡¬å¡ç§‘æŠ€å­—å…¸ã€‘ä»€éº¼æ˜¯ DSP éœ€æ±‚æ–¹å¹³å°&#x2F; SSP ä¾›æ‡‰æ–¹å¹³å°&#x2F; DMP æ•¸æ“šç®¡ç†å¹³å°ï¼Ÿ</a></li>
<li><a href="https://www.inside.com.tw/2016/07/01/what-is-ad-exchange">ã€ç¡¬å¡ç§‘æŠ€å­—å…¸ã€‘ä»€éº¼æ˜¯ Ad Exchangeï¼Ÿ</a></li>
<li><a href="https://www.inside.com.tw/2014/05/30/every-local-advertiser-needs-rtb">ä»€éº¼æ˜¯ RTB å¯¦æ™‚ç«¶åƒ¹å»£å‘Šï¼Ÿä»–å°‡æ˜¯æœªä¾†è¶¨å‹¢ï¼</a></li>
<li><a href="https://goo.gl/eG52L7">å¸¸è¦‹çš„ç¶²è·¯å»£å‘Šå¹³å°é‹ä½œåŸç†æ·ºæ</a></li>
<li><a href="https://goo.gl/FwuOx8">APPå»£å‘Šã€ç¶²è·¯åª’é«”å¸¸èªªåˆ°æ‰€è¬‚çš„CPMã€CPCã€CPAã€CPIåˆ°åº•æ˜¯ç”šéº¼æ„æ€?</a></li>
</ul>
]]></content>
      <categories>
        <category>marketing</category>
      </categories>
      <tags>
        <tag>marketing</tag>
        <tag>ad keyword</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ wget ç ç«™</title>
    <url>/2017/2017081804-wget-download-web-pages.html</url>
    <content><![CDATA[<p>wget æ˜¯ linux ä¸­é™¤äº† curl å¤–å¦ä¸€å€‹æª”æ¡ˆä¸‹è¼‰çš„å¥½ç”¨å·¥å…·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒä¾†â€œç ç«™â€ã€‚<br>ä½†æ˜¯ç„¡æ³•æ­£ç¢ºæŠ“å»ä½¿ç”¨ <code>vue-router</code> ç­‰ js æ’°å¯«çš„å‹•æ…‹å‘ˆç¾ç¶²é çš„å…§å®¹ã€‚</p>
<span id="more"></span>

<p>ç”¨æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ wget -m -k -E -p -F --restrict-file-names=windows -nH --header=&quot;Accept: text/html&quot; --user-agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:21.0) Gecko/20100101 Firefox/21.0&quot; 127.0.0.1</span><br></pre></td></tr></table></figure>

<p>æŒ‡ä»¤èªªæ˜</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-m,  --mirror                ç›¸ç­‰æ–¼ -N -r -l inf --no-remove-listing é¸é …</span><br><span class="line">-k,  --convert-links         å°‡åŸæœ¬ç¶²ç«™å…§æ‰€æœ‰ç«™å…§çš„é€£çµå…¨éƒ½æ”¹ç‚º Local é€£çµï¼Œé€™æ¨£ä¸‹è¼‰ç¶²ç«™å¾Œæ‰å¯ä»¥é›¢ç·šä½¿ç”¨ã€‚</span><br><span class="line">-E,  --adjust-extension      save HTML/CSS documents with proper extensions.</span><br><span class="line">-p,  --page-requisites       ä¸‹è¼‰æ‰€æœ‰é¡¯ç¤ºç¶²é æ‰€éœ€çš„æª”æ¡ˆï¼Œä¾‹å¦‚åœ–ç‰‡ç­‰</span><br><span class="line">-F,  --force-html            ä»¥ HTML æ–¹å¼è™•ç†è¼¸å…¥æª”</span><br><span class="line">-N,  --timestamping          é™¤éé ç«¯æª”æ¡ˆæ¯”è¼ƒæ–°ï¼Œå¦å‰‡ä¸ä¸‹è¼‰é ç«¯æª”æ¡ˆ</span><br><span class="line">-r,  --recursive             éè¿´ä¸‹è¼‰</span><br><span class="line">-l,  --level=æ•¸å­—             æœ€å¤§æœå°‹æ·±åº¦ (inf æˆ– 0 è¡¨ç¤ºç„¡é™)</span><br><span class="line">--no-remove-listing          ä¸åˆªé™¤ â€˜.listingâ€™ æª”æ¡ˆ</span><br><span class="line">--restrict-file-names=OS     åªä½¿ç”¨ä½œæ¥­ç³»çµ±èƒ½å¤ æ¥å—çš„å­—å…ƒä½œç‚ºæª”æ¡ˆå­—å…ƒ</span><br><span class="line">-nH, --no-host-directories   ä¸å»ºç«‹å«æœ‰é ç«¯ä¸»æ©Ÿåç¨±çš„ç›®éŒ„</span><br><span class="line">--header=å­—ä¸²                 åœ¨é€£ç·šè³‡æ–™æ¨™é ­ä¸­åŠ å…¥æŒ‡å®šå­—ä¸²</span><br><span class="line">-U,  --user-agent=AGENT      å®£ç¨±ç‚º AGENT è€Œä¸æ˜¯ Wget/VERSION</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><ul>
<li><a href="https://www.gnu.org/software/wget/manual/wget.html">GNU Wget 1.18 Manual</a></li>
<li><a href="https://john24318.wordpress.com/2013/08/18/wget-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95%E8%88%87%E6%95%99%E5%AD%B8/">wget æŒ‡ä»¤ç”¨æ³•èˆ‡æ•™å­¸</a></li>
<li><a href="https://www.lifewire.com/uses-of-command-wget-2201085">How to Use the wget Linux Command to Download Web Pages and Files</a></li>
</ul>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>wget</tag>
      </tags>
  </entry>
  <entry>
    <title>Homebrew å®‰è£ Nginxã€PHP71 ç­†è¨˜</title>
    <url>/2017/2017082701-brew-install-nginx-php71-fpm.html</url>
    <content><![CDATA[<p>åœ¨ macOX Sierra é€é <code>brew</code> æŒ‡ä»¤å®‰è£ <code>php71</code>ï¼ˆå¸¶æœ‰ <code>php-fpm</code>ï¼‰åŠ <code>nginx</code>ã€‚<br>Install NGINX with PHP71 on Mac OS Sierra with Homebrew.</p>
<span id="more"></span>

<h2 id="å‰è¨€-Prologue"><a href="#å‰è¨€-Prologue" class="headerlink" title="å‰è¨€  Prologue"></a>å‰è¨€  Prologue</h2><p>è‡¨æ™‚æœ‰éœ€è¦è®“ localhost é€éä½¿ç”¨ <a href="https://ngrok.com/">ngrok</a> çš„å°å¤–æœå‹™ï¼Œä»¥æ¸¬è©¦ webhook åŠŸèƒ½ï¼ŒBUT nginx å°±åœ¨é€™å€‹æ™‚å€™å‡ºå•é¡Œäº†ã€‚<br>æœ¬ä¾†ä»¥ç‚ºæ˜¯ç”¨äº† <a href="https://laravel.com/docs/master/valet">Laravel Valet</a> çš„é—œä¿‚ï¼Œä½†å³ä½¿æ˜¯åœç”¨ Valetï¼Œä¿®æ”¹ hosts æˆ–é‡å»º nginx.conf éƒ½æ–¼äº‹ç„¡è£œï¼Œåªå¥½å¾å®‰è£ PHP åˆ° Nginx é‡æ–°åšèµ·ã€‚</p>
<h2 id="ç’°å¢ƒ-Environment"><a href="#ç’°å¢ƒ-Environment" class="headerlink" title="ç’°å¢ƒ  Environment"></a>ç’°å¢ƒ  Environment</h2><ul>
<li>macOS Sierraï¼š 10.12.5</li>
<li>homebrewï¼š 1.3.1</li>
</ul>
<h2 id="Install-Commandline-Tools"><a href="#Install-Commandline-Tools" class="headerlink" title="Install Commandline Tools"></a>Install Commandline Tools</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xcode-select â€”install</span><br></pre></td></tr></table></figure>

<h2 id="Install-Homebrew"><a href="#Install-Homebrew" class="headerlink" title="Install Homebrew"></a>Install Homebrew</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br></pre></td></tr></table></figure>

<h3 id="Check-Installation"><a href="#Check-Installation" class="headerlink" title="Check Installation"></a>Check Installation</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew doctor</span><br></pre></td></tr></table></figure>

<h3 id="Update-Brew-and-Packages"><a href="#Update-Brew-and-Packages" class="headerlink" title="Update Brew and Packages"></a>Update Brew and Packages</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew update &amp;&amp; brew upgrade</span><br></pre></td></tr></table></figure>

<h3 id="Install-brew-services"><a href="#Install-brew-services" class="headerlink" title="Install brew services"></a>Install brew services</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew tap homebrew/services</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£-DNSMasq"><a href="#å®‰è£-DNSMasq" class="headerlink" title="å®‰è£ DNSMasq"></a>å®‰è£ DNSMasq</h2><p>DNSMasq is used to resolve all domains that end with .dev to 127.0.0.1.<br>DNSMasq å°‡ .env çµå°¾çš„ç¶²å€å°æ‡‰åˆ° 127.0.0.1ï¼Œå°±ä¸éœ€è¦å†ä¿®æ”¹ <code>/etc/hosts</code> æª”æ¡ˆ</p>
<h3 id="å®‰è£-Install"><a href="#å®‰è£-Install" class="headerlink" title="å®‰è£  Install"></a>å®‰è£  Install</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew install dnsmasq</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®-Configure"><a href="#é…ç½®-Configure" class="headerlink" title="é…ç½®  Configure"></a>é…ç½®  Configure</h3><p>æª”æ¡ˆ <code>/usr/local/etc/dnsmasq.conf</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">address=/.dev/127.0.0.1</span><br><span class="line">listen-address=127.0.0.1</span><br></pre></td></tr></table></figure>

<p>æª”æ¡ˆ <code>/etc/resolver/dev</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nameserver 127.0.0.1</span><br></pre></td></tr></table></figure>

<h3 id="startã€stopã€restart-DNSMasq"><a href="#startã€stopã€restart-DNSMasq" class="headerlink" title="startã€stopã€restart DNSMasq"></a><code>start</code>ã€<code>stop</code>ã€<code>restart</code> DNSMasq</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo brew services start dnsmasq</span><br><span class="line">$ sudo brew services stop dnsmasq</span><br><span class="line">$ sudo brew services restart dnsmasq</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¬è©¦-Testing"><a href="#æ¸¬è©¦-Testing" class="headerlink" title="æ¸¬è©¦  Testing"></a>æ¸¬è©¦  Testing</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ dig testing.dev @127.0.0.1</span><br><span class="line">dig testing.dev @127.0.0.1</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; testing.dev @127.0.0.1</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 21966</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;testing.dev.           IN  A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">testing.dev.        0   IN  A   127.0.0.1</span><br><span class="line"></span><br><span class="line">;; Query time: 1 msec</span><br><span class="line">;; SERVER: 127.0.0.1#53(127.0.0.1)</span><br><span class="line">;; WHEN: Sun Aug 27 22:39:50 2017</span><br><span class="line">;; MSG SIZE  rcvd: 45</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£-PHP-FPM"><a href="#å®‰è£-PHP-FPM" class="headerlink" title="å®‰è£ PHP-FPM"></a>å®‰è£ PHP-FPM</h2><h3 id="Install-php71"><a href="#Install-php71" class="headerlink" title="Install php71"></a>Install php71</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew tap homebrew/dupes &amp;&amp; \</span><br><span class="line">$ brew tap homebrew/php</span><br><span class="line"></span><br><span class="line">$ brew install php71</span><br><span class="line">==&gt; Installing php71 from homebrew/php</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles-php/php71-7.1.1_12.sierra.bottle.tar.gz</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring php71-7.1.1_12.sierra.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">The php.ini file can be found in:</span><br><span class="line">    /usr/local/etc/php/7.1/php.ini</span><br><span class="line"></span><br><span class="line">âœ©âœ©âœ©âœ© Extensions âœ©âœ©âœ©âœ©</span><br><span class="line"></span><br><span class="line">If you are having issues with custom extension compiling, ensure that</span><br><span class="line">you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">      PATH=&quot;/usr/local/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">PHP71 Extensions will always be compiled against this PHP. Please install them</span><br><span class="line">using --without-homebrew-php to enable compiling against system PHP.</span><br><span class="line"></span><br><span class="line">âœ©âœ©âœ©âœ© PHP CLI âœ©âœ©âœ©âœ©</span><br><span class="line"></span><br><span class="line">If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc,</span><br><span class="line">~/.zshrc, ~/.profile or your shell&#x27;s equivalent configuration file:</span><br><span class="line"></span><br><span class="line">      export PATH=&quot;$(brew --prefix homebrew/php/php71)/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">âœ©âœ©âœ©âœ© FPM âœ©âœ©âœ©âœ©</span><br><span class="line"></span><br><span class="line">To launch php-fpm on startup:</span><br><span class="line">    mkdir -p ~/Library/LaunchAgents</span><br><span class="line">    cp /usr/local/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</span><br><span class="line">    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</span><br><span class="line"></span><br><span class="line">The control script is located at /usr/local/opt/php71/sbin/php71-fpm</span><br><span class="line"></span><br><span class="line">OS X 10.8 and newer come with php-fpm pre-installed, to ensure you are using the brew version you need to make sure /usr/local/sbin is before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">  PATH=&quot;/usr/local/sbin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">You may also need to edit the plist to use the correct &quot;UserName&quot;.</span><br><span class="line"></span><br><span class="line">Please note that the plist was called &#x27;homebrew-php.josegonzalez.php71.plist&#x27; in old versions</span><br><span class="line">of this formula.</span><br><span class="line"></span><br><span class="line">With the release of macOS Sierra the Apache module is now not built by default. If you want to build it on your system</span><br><span class="line">you have to install php with the --with-httpd24 option. See  brew options php71  for more details.</span><br><span class="line"></span><br><span class="line">To have launchd start homebrew/php/php71 now and restart at login:</span><br><span class="line">  brew services start homebrew/php/php71</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/php71/7.1.1_12: 344 files, 39.7M</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®-Configure-1"><a href="#é…ç½®-Configure-1" class="headerlink" title="é…ç½®  Configure"></a>é…ç½®  Configure</h3><p>ç·¨è¼¯æª”æ¡ˆ <code>/usr/local/etc/php/7.1/php-fpm.d/www.conf</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">user = YOUR_USERNAME</span><br><span class="line">group = staff</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¬è©¦-Testing-1"><a href="#æ¸¬è©¦-Testing-1" class="headerlink" title="æ¸¬è©¦  Testing"></a>æ¸¬è©¦  Testing</h3><p>å•Ÿå‹• php-fpm</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo brew services start php71</span><br></pre></td></tr></table></figure>

<p>Show running processes</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lsof -Pni4 | grep LISTEN | grep php</span><br></pre></td></tr></table></figure>


<h2 id="å®‰è£-NGINX"><a href="#å®‰è£-NGINX" class="headerlink" title="å®‰è£ NGINX"></a>å®‰è£ NGINX</h2><h3 id="Install-NGINX"><a href="#Install-NGINX" class="headerlink" title="Install NGINX"></a>Install NGINX</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew tap homebrew/nginx</span><br><span class="line"></span><br><span class="line">$ brew install nginx</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/nginx-1.12.1.sierra.bottle.tar.gz</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring nginx-1.12.1.sierra.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Docroot is: /usr/local/var/www</span><br><span class="line"></span><br><span class="line">The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that</span><br><span class="line">nginx can run without sudo.</span><br><span class="line"></span><br><span class="line">nginx will load all files in /usr/local/etc/nginx/servers/.</span><br><span class="line"></span><br><span class="line">To have launchd start nginx now and restart at login:</span><br><span class="line">  brew services start nginx</span><br><span class="line">Or, if you don&#x27;t want/need a background service you can just run:</span><br><span class="line">  nginx</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/nginx/1.12.1: 23 files, 1MB</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£æ¸¬è©¦-Testing"><a href="#å®‰è£æ¸¬è©¦-Testing" class="headerlink" title="å®‰è£æ¸¬è©¦  Testing"></a>å®‰è£æ¸¬è©¦  Testing</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## Start Nginx</span><br><span class="line">$ sudo brew services start nginx</span><br><span class="line"></span><br><span class="line">## Check if Nginx is running on default port</span><br><span class="line">$ curl -IL http://127.0.0.1:8080</span><br><span class="line">curl -IL http://127.0.0.1:8080</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.12.1</span><br><span class="line">Date: Sun, 27 Aug 2017 14:59:30 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 274</span><br><span class="line">Last-Modified: Sat, 26 Aug 2017 14:05:36 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: &quot;59a18030-112&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br></pre></td></tr></table></figure>

<h3 id="Stop-Nginx"><a href="#Stop-Nginx" class="headerlink" title="Stop Nginx"></a>Stop Nginx</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo brew services stop nginx</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®-Configure-2"><a href="#é…ç½®-Configure-2" class="headerlink" title="é…ç½®  Configure"></a>é…ç½®  Configure</h3><h4 id="å»ºç«‹ç›®éŒ„-Create-directories"><a href="#å»ºç«‹ç›®éŒ„-Create-directories" class="headerlink" title="å»ºç«‹ç›®éŒ„  Create directories"></a>å»ºç«‹ç›®éŒ„  Create directories</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ mkdir -p /usr/local/etc/nginx/sites-available &amp;&amp; \</span><br><span class="line">$ mkdir -p /usr/local/etc/nginx/sites-enabled &amp;&amp; \</span><br><span class="line">$ mkdir -p /usr/local/etc/nginx/conf.d &amp;&amp; \</span><br><span class="line">$ mkdir -p /usr/local/etc/nginx/ssl</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®æª”æ¡ˆ-nginx-conf"><a href="#é…ç½®æª”æ¡ˆ-nginx-conf" class="headerlink" title="é…ç½®æª”æ¡ˆ nginx.conf"></a>é…ç½®æª”æ¡ˆ nginx.conf</h4><p>åˆªé™¤é è¨­æª”æ¡ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ rm /usr/local/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
<p>å»ºç«‹æ–°æª” <code>$ vim /usr/local/etc/nginx/nginx.conf</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include             mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    #sendfile            on;</span><br><span class="line">    sendfile            off;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout   65;</span><br><span class="line">    keepalive_timeout   1;</span><br><span class="line"></span><br><span class="line">    index index.html index.php;</span><br><span class="line"></span><br><span class="line">    include /usr/local/etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å•Ÿå‹•ä¸¦æ¸¬è©¦-Nginx-Start-and-Test-Nginx"><a href="#å•Ÿå‹•ä¸¦æ¸¬è©¦-Nginx-Start-and-Test-Nginx" class="headerlink" title="å•Ÿå‹•ä¸¦æ¸¬è©¦ Nginx  Start and Test Nginx"></a>å•Ÿå‹•ä¸¦æ¸¬è©¦ Nginx  Start and Test Nginx</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## Start Nginx</span><br><span class="line">$ sudo brew services start nginx</span><br><span class="line"></span><br><span class="line">## Check if Nginx is running on default port</span><br><span class="line">$ curl -IL http://localhost</span><br><span class="line">curl -IL http://localhost</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.12.1</span><br><span class="line">Date: Sun, 27 Aug 2017 15:12:35 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 274</span><br><span class="line">Last-Modified: Sat, 26 Aug 2017 14:05:36 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: &quot;59a18030-112&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br></pre></td></tr></table></figure>



<h2 id="è¨­å®š-SSL-Setup-SSL"><a href="#è¨­å®š-SSL-Setup-SSL" class="headerlink" title="è¨­å®š SSL  Setup SSL"></a>è¨­å®š SSL  Setup SSL</h2><p>Generate 4096 bit RSA keys and the self-sign the certificates</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 -subj &quot;/C=US/ST=State/L=Town/O=Office/CN=localhost&quot; -keyout /usr/local/etc/nginx/ssl/localhost.key -out /usr/local/etc/nginx/ssl/localhost.crt</span><br></pre></td></tr></table></figure>
<p>RSA keys å­˜æ”¾åœ¨è³‡æ–™å¤¾ <code>/usr/local/etc/nginx/ssl</code></p>
<h2 id="å»ºç«‹-Virtual-Hosts-ç¶²ç«™æª”æ¡ˆ"><a href="#å»ºç«‹-Virtual-Hosts-ç¶²ç«™æª”æ¡ˆ" class="headerlink" title="å»ºç«‹ Virtual Hosts ç¶²ç«™æª”æ¡ˆ"></a>å»ºç«‹ Virtual Hosts ç¶²ç«™æª”æ¡ˆ</h2><p>æª”æ¡ˆ <code>/usr/local/etc/nginx/sites-available/default</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root       /YOUR/DOCUMENT/ROOT;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/default.access.log  main;</span><br><span class="line">    error_log  /var/log/nginx/default.error.log  debug;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        include   /usr/local/etc/nginx/conf.d/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /info &#123;</span><br><span class="line">        allow   127.0.0.1;</span><br><span class="line">        deny    all;</span><br><span class="line">        rewrite (.*) /.info.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æª”æ¡ˆ <code>/usr/local/etc/nginx/sites-available/default-ssl</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root       /YOUR/DOCUMENT/ROOT;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/default-ssl.access.log  main;</span><br><span class="line">    error_log  /var/log/nginx/default-ssl.error.log  debug;</span><br><span class="line"></span><br><span class="line">    ssl                  on;</span><br><span class="line">    ssl_certificate      ssl/localhost.crt;</span><br><span class="line">    ssl_certificate_key  ssl/localhost.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1;</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers   on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        include   /usr/local/etc/nginx/conf.d/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /info &#123;</span><br><span class="line">        allow   127.0.0.1;</span><br><span class="line">        deny    all;</span><br><span class="line">        rewrite (.*) /.info.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æª”æ¡ˆ <code>/usr/local/etc/nginx/conf.d/php-fpm</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    try_files      $uri = 404;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Activate-Virtual-Hosts"><a href="#Activate-Virtual-Hosts" class="headerlink" title="Activate Virtual Hosts"></a>Activate Virtual Hosts</h3><p>åœ¨ <code>sites-enabled</code> ç›®éŒ„ä¸‹å»ºç«‹ Symbolic linkã€‚å°‡è¦ enable çš„ virtal host æŒ‡å‘ <code>sites-available</code> ç›®éŒ„å…§çš„ virtal host config fileã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ln -sfv /usr/local/etc/nginx/sites-available/default /usr/local/etc/nginx/sites-enabled/default</span><br><span class="line">$ ln -sfv /usr/local/etc/nginx/sites-available/default-ssl /usr/local/etc/nginx/sites-enabled/default-ssl</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¬è©¦-Testing-2"><a href="#æ¸¬è©¦-Testing-2" class="headerlink" title="æ¸¬è©¦ Testing"></a>æ¸¬è©¦ Testing</h3><p>å»ºç«‹ <code>/YOUR/DOCUMENT/ROOT/info.php</code> å…§å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>é‡æ–°å•Ÿå‹• Nginx ä¸¦æ¸¬è©¦</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo brew services restart nginx</span><br><span class="line"></span><br><span class="line">$ curl -IL http://localhost/info.php</span><br><span class="line">curl -IL http://localhost/info.php</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.12.1</span><br><span class="line">Date: Sun, 27 Aug 2017 15:24:46 GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Powered-By: PHP/7.1.8</span><br></pre></td></tr></table></figure>


<h2 id="å®‰è£å…¶ä»–-Libraries"><a href="#å®‰è£å…¶ä»–-Libraries" class="headerlink" title="å®‰è£å…¶ä»– Libraries"></a>å®‰è£å…¶ä»– Libraries</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew install php71-mcrypt php71-imagick</span><br></pre></td></tr></table></figure>

<p><code>brew info</code> æŸ¥çœ‹ PHP åŠå…¶ç›¸é—œ Libraries çš„è³‡è¨Š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew info php71</span><br><span class="line">homebrew/php/php71: stable 7.1.8 (bottled), HEAD</span><br><span class="line">PHP Version 7.1</span><br><span class="line">https://php.net</span><br><span class="line">Conflicts with:</span><br><span class="line">  php53 (because different php versions install the same binaries.)</span><br><span class="line">  php54 (because different php versions install the same binaries.)</span><br><span class="line">  php55 (because different php versions install the same binaries.)</span><br><span class="line">  php56 (because different php versions install the same binaries.)</span><br><span class="line">  php70 (because different php versions install the same binaries.)</span><br><span class="line">  php72 (because different php versions install the same binaries.)</span><br><span class="line">/usr/local/Cellar/php71/7.1.8_20 (349 files, 39.5MB) *</span><br><span class="line">  Poured from bottle on 2017-08-26 at 16:34:27</span><br><span class="line">From: https://github.com/Homebrew/homebrew-php/blob/master/Formula/php71.rb</span><br><span class="line">==&gt; Dependencies</span><br><span class="line">Required: freetype âœ”, gettext âœ”, icu4c âœ”, jpeg âœ”, libpng âœ”, libxml2 âœ”, unixodbc âœ”, readline âœ”, openssl âœ”</span><br><span class="line">Optional: enchant âœ˜, gmp âœ˜, webp âœ˜, homebrew/apache/httpd24 âœ”, homebrew/apache/httpd22 âœ˜</span><br><span class="line">==&gt; Requirements</span><br><span class="line">Optional: postgresql âœ˜</span><br><span class="line">==&gt; Options</span><br><span class="line">--with-cgi</span><br><span class="line">	Enable building of the CGI executable (implies --without-fpm)</span><br><span class="line">--with-debug</span><br><span class="line">	Compile with debugging symbols</span><br><span class="line">--with-enchant</span><br><span class="line">	Build with enchant support</span><br><span class="line">--with-gmp</span><br><span class="line">	Build with gmp support</span><br><span class="line">--with-homebrew-curl</span><br><span class="line">	Include Curl support via Homebrew</span><br><span class="line">--with-homebrew-libressl</span><br><span class="line">	Include LibreSSL instead of OpenSSL via Homebrew</span><br><span class="line">--with-homebrew-libxml2</span><br><span class="line">	Include Libxml2 support via Homebrew</span><br><span class="line">--with-homebrew-libxslt</span><br><span class="line">	Include LibXSLT support via Homebrew</span><br><span class="line">--with-httpd22</span><br><span class="line">	Enable building of shared Apache 2.2 Handler module</span><br><span class="line">--with-httpd24</span><br><span class="line">	Enable building of shared Apache 2.4 Handler module</span><br><span class="line">--with-imap</span><br><span class="line">	Include IMAP extension</span><br><span class="line">--with-libmysql</span><br><span class="line">	Include (old-style) libmysql support instead of mysqlnd</span><br><span class="line">--with-mssql</span><br><span class="line">	Include MSSQL-DB support</span><br><span class="line">--with-pdo-oci</span><br><span class="line">	Include Oracle databases (requries ORACLE_HOME be set)</span><br><span class="line">--with-pear</span><br><span class="line">	Build with PEAR</span><br><span class="line">--with-phpdbg</span><br><span class="line">	Enable building of the phpdbg SAPI executable</span><br><span class="line">--with-postgresql</span><br><span class="line">	Build with postgresql support</span><br><span class="line">--with-thread-safety</span><br><span class="line">	Build with thread safety</span><br><span class="line">--with-webp</span><br><span class="line">	Build with webp support</span><br><span class="line">--without-bz2</span><br><span class="line">	Build without bz2 support</span><br><span class="line">--without-fpm</span><br><span class="line">	Disable building of the fpm SAPI executable</span><br><span class="line">--without-ldap</span><br><span class="line">	Build without LDAP support</span><br><span class="line">--without-legacy-mysql</span><br><span class="line">	Do not include the deprecated mysql_ functions</span><br><span class="line">--without-mysql</span><br><span class="line">	Remove MySQL/MariaDB support</span><br><span class="line">--without-pcntl</span><br><span class="line">	Build without Process Control support</span><br><span class="line">--without-unixodbc</span><br><span class="line">	Build without unixODBC support</span><br><span class="line">--HEAD</span><br><span class="line">	Install HEAD version</span><br><span class="line">==&gt; Caveats</span><br><span class="line">The php.ini file can be found in:</span><br><span class="line">    /usr/local/etc/php/7.1/php.ini</span><br><span class="line"></span><br><span class="line">âœ©âœ©âœ©âœ© Extensions âœ©âœ©âœ©âœ©</span><br><span class="line"></span><br><span class="line">If you are having issues with custom extension compiling, ensure that you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">      PATH=&quot;/usr/local/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">PHP71 Extensions will always be compiled against this PHP. Please install them using --without-homebrew-php to enable compiling against system PHP.</span><br><span class="line"></span><br><span class="line">âœ©âœ©âœ©âœ© PHP CLI âœ©âœ©âœ©âœ©</span><br><span class="line"></span><br><span class="line">If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc, ~/.zshrc, ~/.profile or your shell&#x27;s equivalent configuration file:</span><br><span class="line">  export PATH=&quot;$(brew --prefix homebrew/php/php71)/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">âœ©âœ©âœ©âœ© FPM âœ©âœ©âœ©âœ©</span><br><span class="line"></span><br><span class="line">To launch php-fpm on startup:</span><br><span class="line">    mkdir -p ~/Library/LaunchAgents</span><br><span class="line">    cp /usr/local/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</span><br><span class="line">    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</span><br><span class="line"></span><br><span class="line">The control script is located at /usr/local/opt/php71/sbin/php71-fpm</span><br><span class="line"></span><br><span class="line">OS X 10.8 and newer come with php-fpm pre-installed, to ensure you are using the brew version you need to make sure /usr/local/sbin is before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">  PATH=&quot;/usr/local/sbin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">You may also need to edit the plist to use the correct &quot;UserName&quot;.</span><br><span class="line"></span><br><span class="line">Please note that the plist was called &#x27;homebrew-php.josegonzalez.php71.plist&#x27; in old versions of this formula.</span><br><span class="line"></span><br><span class="line">With the release of macOS Sierra the Apache module is now not built by default. If you want to build it on your system you have to install php with the --with-httpd24 option. See  brew options php71 for more details.</span><br><span class="line"></span><br><span class="line">To have launchd start homebrew/php/php71 now and restart at login:</span><br><span class="line">  brew services start homebrew/php/php71</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å¾Œè¨˜-Epilogue"><a href="#å¾Œè¨˜-Epilogue" class="headerlink" title="å¾Œè¨˜ Epilogue"></a>å¾Œè¨˜ Epilogue</h2><p>å¦‚æœ <code>$ curl -IL http://127.0.0.1:8080</code> å‡ºç¾ <code>curl: (7) Failed to connect to 127.0.0.1 port 8080: Connection refused</code>ï¼Œè«‹è¨˜å¾—æª¢æŸ¥</p>
<ol>
<li>php-fpm æ˜¯ä¸æ˜¯å•Ÿå‹•</li>
<li>nginx æ˜¯å¦æœ‰ restart</li>
<li><code>/usr/loca/etc/php/7.1/php-fpm.d/www.conf</code> å…§ <code>user</code> åŠ <code>group</code> æ˜¯å¦æ­£ç¢ºè¨­å®š</li>
<li><code>/usr/local/etc/nginx/conf.d/php-fpm</code> æª”æ¡ˆæ˜¯å¦å»ºç«‹</li>
</ol>
<hr>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://gist.github.com/dtomasi/ab76d14338db82ec24a1fc137caff75b">Install NGINX with PHP7-FPM on Mac OS X with Homebrew</a></li>
<li><a href="https://gist.github.com/pixeline/51c43c787f51b018d484597f30be3d2b">pixeline&#x2F;php_upgrade_to_71.sh</a></li>
</ul>
]]></content>
      <categories>
        <category>lemp</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>php71</tag>
        <tag>php-fpm</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ EditorConfig çµ±ä¸€å°ˆæ¡ˆçš„ Coding Style</title>
    <url>/2017/2017082901-editorconfig-settings.html</url>
    <content><![CDATA[<p>ä½¿ç”¨ <a href="http://editorconfig.org/">EditorConfig</a> çµ±ä¸€å°ˆæ¡ˆçš„ Coding Styleã€‚å¤§éƒ¨åˆ†çš„ç·¨è¼¯å™¨æœ¬èº«æˆ–å¤–æ›éƒ½æœ‰æ”¯æ´ EditorConfigã€‚</p>
<span id="more"></span>

<p>åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ <code>.editorconfig</code> å…§å®¹å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8</span><br><span class="line">end_of_line = lf</span><br><span class="line">indent_size = 2</span><br><span class="line">indent_style = space</span><br><span class="line">insert_final_newline = true</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"></span><br><span class="line">[*.&#123;js,json,vue&#125;]</span><br><span class="line">indent_size = 2</span><br><span class="line">indent_style = space</span><br><span class="line"></span><br><span class="line">[*.php]</span><br><span class="line">indent_size = 4</span><br><span class="line">indent_style = space</span><br><span class="line"></span><br><span class="line">[Makefile]</span><br><span class="line">indent_size = 2</span><br><span class="line">indent_style = tab</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>coding style</tag>
        <tag>editorconfig</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®¡ç†æˆ–åˆ†äº« vs code çš„ workspace extensions</title>
    <url>/2017/2017102301-vscode-workspace-recommended-extensions.html</url>
    <content><![CDATA[<p>å¤šäººé–‹ç™¼ä½¿ç”¨ vs code ç•¶æˆé è¨­çš„ editor æ™‚ï¼Œé€éåˆ†äº« <code>Workspace Recommended Extensions</code> çš„æ–¹å¼è®“å¤§å®¶éƒ½ä½¿ç”¨åŒæ¨£çš„ extension é”æˆé–‹ç™¼æˆ–æª¢æŸ¥çš„ä¸€è‡´æ€§ã€‚</p>
 <span id="more"></span>

<h2 id="åˆ—å‡ºå·²ç¶“å®‰è£çš„-extensions"><a href="#åˆ—å‡ºå·²ç¶“å®‰è£çš„-extensions" class="headerlink" title="åˆ—å‡ºå·²ç¶“å®‰è£çš„ extensions"></a>åˆ—å‡ºå·²ç¶“å®‰è£çš„ extensions</h2><p>Command line åŸ·è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ code --list-extensions</span><br></pre></td></tr></table></figure>

<p>çµæœ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2gua.rainbow-brackets</span><br><span class="line">alefragnani.project-manager</span><br><span class="line">alexdima.copy-relative-path</span><br><span class="line">apility.beautify-blade</span><br><span class="line">batisteo.vscode-django</span><br><span class="line">bmewburn.vscode-intelephense-client</span><br><span class="line">christian-kohler.npm-intellisense</span><br><span class="line">christian-kohler.path-intellisense</span><br><span class="line">cmstead.jsrefactor</span><br><span class="line">codezombiech.gitignore</span><br><span class="line">DavidAnson.vscode-markdownlint</span><br><span class="line">dbaeumer.vscode-eslint</span><br><span class="line">donjayamanne.githistory</span><br><span class="line">dracula-theme.theme-dracula</span><br><span class="line">eamodio.gitlens</span><br><span class="line">EditorConfig.EditorConfig</span><br><span class="line">eg2.vscode-npm-script</span><br><span class="line">felipecaputo.git-project-manager</span><br><span class="line">felixfbecker.php-debug</span><br><span class="line">formulahendry.auto-close-tag</span><br><span class="line">formulahendry.auto-rename-tag</span><br><span class="line">golang.Go</span><br><span class="line">henriiik.docker-linter</span><br><span class="line">HookyQR.beautify</span><br><span class="line">humao.rest-client</span><br><span class="line">janisdd.vscode-edit-csv</span><br><span class="line">JerryHong.autofilename</span><br><span class="line">joelday.docthis</span><br><span class="line">junstyle.php-cs-fixer</span><br><span class="line">magicstack.MagicPython</span><br><span class="line">marclipovsky.string-manipulation</span><br><span class="line">mikestead.dotenv</span><br><span class="line">ms-azuretools.vscode-docker</span><br><span class="line">ms-python.python</span><br><span class="line">neilbrayfield.php-docblocker</span><br><span class="line">nhoizey.gremlins</span><br><span class="line">octref.vetur</span><br><span class="line">oderwat.indent-rainbow</span><br><span class="line">odubuc.mysql-inline-decorator</span><br><span class="line">onecentlin.laravel-blade</span><br><span class="line">onecentlin.laravel5-snippets</span><br><span class="line">PKief.material-icon-theme</span><br><span class="line">quicktype.quicktype</span><br><span class="line">redhat.vscode-yaml</span><br><span class="line">richie5um2.vscode-sort-json</span><br><span class="line">robinbentley.sass-indented</span><br><span class="line">shardulm94.trailing-spaces</span><br><span class="line">shd101wyy.markdown-preview-enhanced</span><br><span class="line">SirTori.indenticator</span><br><span class="line">streetsidesoftware.code-spell-checker</span><br><span class="line">Tyriar.sort-lines</span><br><span class="line">VisualStudioExptTeam.vscodeintellicode</span><br><span class="line">vscode-icons-team.vscode-icons</span><br><span class="line">wholroyd.jinja</span><br><span class="line">wix.vscode-import-cost</span><br><span class="line">wmaurer.change-case</span><br><span class="line">wwm.better-align</span><br><span class="line">xabikos.JavaScriptSnippets</span><br><span class="line">yomed.theme-dracula-soft</span><br><span class="line">yzhang.markdown-all-in-one</span><br></pre></td></tr></table></figure>

<p>å°‡åˆ—å‡ºçš„ extensions å…¨éƒ¨è¤‡è£½èµ·ä¾†ï¼Œå¾ŒçºŒæœƒç”¨åˆ°ã€‚</p>
<h2 id="åœ¨-workspace-åŒ¯å…¥åŠå®‰è£-extensions"><a href="#åœ¨-workspace-åŒ¯å…¥åŠå®‰è£-extensions" class="headerlink" title="åœ¨ workspace åŒ¯å…¥åŠå®‰è£ extensions"></a>åœ¨ workspace åŒ¯å…¥åŠå®‰è£ extensions</h2><ol>
<li>æ‰“é–‹ vs code æŒ‰ä¸‹å¿«é€Ÿéµ <code>command + shift + p</code></li>
<li>åœ¨è·³å‡ºçš„å°è©±æ¡†å‘½ä»¤åˆ—å¾Œè¼¸å…¥æˆ–æ‰¾åˆ° <code>&gt;Extensions: Configure Recommended Extensions (Workspace Folder)</code></li>
<li>æ¥è‘—ä¿®æ”¹é–‹å•Ÿçš„ <code>.vscode/extensions.json</code> æª”æ¡ˆï¼Œä»¥ JOSN æ ¼å¼ç·¨è¼¯è²¼ä¸Šå‰›æ‰è¤‡è£½çš„ extensions<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // See http://go.microsoft.com/fwlink/?LinkId=827846 to learn about workspace recommendations.</span><br><span class="line">  // Extension identifier format: $&#123;publisher&#125;.$&#123;name&#125;. Example: vscode.csharp</span><br><span class="line">  // List of extensions which should be recommended for users of this workspace.</span><br><span class="line">  &quot;recommendations&quot;: [</span><br><span class="line">    &quot;2gua.rainbow-brackets&quot;,</span><br><span class="line">    &quot;alefragnani.project-manager&quot;,</span><br><span class="line">    &quot;alexdima.copy-relative-path&quot;,</span><br><span class="line">    &quot;apility.beautify-blade&quot;,</span><br><span class="line">    &quot;batisteo.vscode-django&quot;,</span><br><span class="line">    &quot;bmewburn.vscode-intelephense-client&quot;,</span><br><span class="line">    &quot;christian-kohler.npm-intellisense&quot;,</span><br><span class="line">    &quot;christian-kohler.path-intellisense&quot;,</span><br><span class="line">    &quot;cmstead.jsrefactor&quot;,</span><br><span class="line">    &quot;codezombiech.gitignore&quot;,</span><br><span class="line">    &quot;DavidAnson.vscode-markdownlint&quot;,</span><br><span class="line">    &quot;dbaeumer.vscode-eslint&quot;,</span><br><span class="line">    &quot;donjayamanne.githistory&quot;,</span><br><span class="line">    &quot;dracula-theme.theme-dracula&quot;,</span><br><span class="line">    &quot;eamodio.gitlens&quot;,</span><br><span class="line">    &quot;EditorConfig.EditorConfig&quot;,</span><br><span class="line">    &quot;eg2.vscode-npm-script&quot;,</span><br><span class="line">    &quot;felipecaputo.git-project-manager&quot;,</span><br><span class="line">    &quot;felixfbecker.php-debug&quot;,</span><br><span class="line">    &quot;formulahendry.auto-close-tag&quot;,</span><br><span class="line">    &quot;formulahendry.auto-rename-tag&quot;,</span><br><span class="line">    &quot;golang.Go&quot;,</span><br><span class="line">    &quot;henriiik.docker-linter&quot;,</span><br><span class="line">    &quot;HookyQR.beautify&quot;,</span><br><span class="line">    &quot;humao.rest-client&quot;,</span><br><span class="line">    &quot;janisdd.vscode-edit-csv&quot;,</span><br><span class="line">    &quot;JerryHong.autofilename&quot;,</span><br><span class="line">    &quot;joelday.docthis&quot;,</span><br><span class="line">    &quot;junstyle.php-cs-fixer&quot;,</span><br><span class="line">    &quot;magicstack.MagicPython&quot;,</span><br><span class="line">    &quot;marclipovsky.string-manipulation&quot;,</span><br><span class="line">    &quot;mikestead.dotenv&quot;,</span><br><span class="line">    &quot;ms-azuretools.vscode-docker&quot;,</span><br><span class="line">    &quot;ms-python.python&quot;,</span><br><span class="line">    &quot;neilbrayfield.php-docblocker&quot;,</span><br><span class="line">    &quot;nhoizey.gremlins&quot;,</span><br><span class="line">    &quot;octref.vetur&quot;,</span><br><span class="line">    &quot;oderwat.indent-rainbow&quot;,</span><br><span class="line">    &quot;odubuc.mysql-inline-decorator&quot;,</span><br><span class="line">    &quot;onecentlin.laravel-blade&quot;,</span><br><span class="line">    &quot;onecentlin.laravel5-snippets&quot;,</span><br><span class="line">    &quot;PKief.material-icon-theme&quot;,</span><br><span class="line">    &quot;quicktype.quicktype&quot;,</span><br><span class="line">    &quot;redhat.vscode-yaml&quot;,</span><br><span class="line">    &quot;richie5um2.vscode-sort-json&quot;,</span><br><span class="line">    &quot;robinbentley.sass-indented&quot;,</span><br><span class="line">    &quot;shardulm94.trailing-spaces&quot;,</span><br><span class="line">    &quot;shd101wyy.markdown-preview-enhanced&quot;,</span><br><span class="line">    &quot;SirTori.indenticator&quot;,</span><br><span class="line">    &quot;streetsidesoftware.code-spell-checker&quot;,</span><br><span class="line">    &quot;Tyriar.sort-lines&quot;,</span><br><span class="line">    &quot;VisualStudioExptTeam.vscodeintellicode&quot;,</span><br><span class="line">    &quot;vscode-icons-team.vscode-icons&quot;,</span><br><span class="line">    &quot;wholroyd.jinja&quot;,</span><br><span class="line">    &quot;wix.vscode-import-cost&quot;,</span><br><span class="line">    &quot;wmaurer.change-case&quot;,</span><br><span class="line">    &quot;wwm.better-align&quot;,</span><br><span class="line">    &quot;xabikos.JavaScriptSnippets&quot;,</span><br><span class="line">    &quot;yomed.theme-dracula-soft&quot;,</span><br><span class="line">    &quot;yzhang.markdown-all-in-one&quot;</span><br><span class="line">  ],</span><br><span class="line">  // List of extensions recommended by VS Code that should not be recommended for users of this workspace.</span><br><span class="line">  &quot;unwantedRecommendations&quot;: [</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="å®‰è£-Recommended-Extensions"><a href="#å®‰è£-Recommended-Extensions" class="headerlink" title="å®‰è£ Recommended Extensions"></a>å®‰è£ Recommended Extensions</h3><p>é»æ“Šå·¦å´ <code>EXPLOER</code> é¸å–® ICON çš„ <code>Extensions</code>ï¼ˆæˆ–å¿«é€Ÿéµ <code>shift + command + x</code>ï¼‰ï¼Œåœ¨å±•é–‹çš„æ¸…å–®è¦–çª—å³ä¸Šè§’é»æ“Š <code>...</code> åœ–ç¤ºï¼Œé¸å– <code>Show Recommended Extensions</code>ï¼Œç„¶å¾ŒæŒ‘é¸æƒ³è¦çš„ extension é€²è¡Œå®‰è£ã€‚ä¹Ÿå¯ä»¥å…¨éƒ¨å®‰è£å¾Œï¼Œå†æŠŠä¸æƒ³ä½¿ç”¨çš„ extension disable :)</p>
<h3 id="è¨­å®š-Workspace-Settings"><a href="#è¨­å®š-Workspace-Settings" class="headerlink" title="è¨­å®š Workspace Settings"></a>è¨­å®š Workspace Settings</h3><ol>
<li>æ‰“é–‹ vs code æŒ‰ä¸‹å¿«é€Ÿéµ <code>command + shift + p</code></li>
<li>åœ¨è·³å‡ºçš„å°è©±æ¡†å‘½ä»¤åˆ—å¾Œè¼¸å…¥æˆ–æ‰¾åˆ° <code>&gt;Preferences: Open User Settings</code></li>
<li>é»æ“Šæœå°‹åˆ—ä¸‹æ–¹çš„ <code>...</code> åœ–ç¤ºï¼Œä¸¦é¸å– ã€ŒOpen settings.jsonã€ï¼Œå³å¯é€²è¡Œç·¨è¼¯</li>
</ol>
<h3 id="Extensions-çš„å®‰è£è·¯å¾‘"><a href="#Extensions-çš„å®‰è£è·¯å¾‘" class="headerlink" title="Extensions çš„å®‰è£è·¯å¾‘"></a>Extensions çš„å®‰è£è·¯å¾‘</h3><ul>
<li><strong>Windows</strong> <code>%USERPROFILE%\.vscode\extensions</code></li>
<li><strong>Mac</strong> <code>~/.vscode/extensions</code></li>
<li><strong>Linux</strong> <code>~/.vscode/extensions</code></li>
</ul>
<h2 id="è¨­å®š-User-Settings"><a href="#è¨­å®š-User-Settings" class="headerlink" title="è¨­å®š User Settings"></a>è¨­å®š User Settings</h2><ol>
<li>æ‰“é–‹ vs code æŒ‰ä¸‹å¿«é€Ÿéµ <code>command + shift + p</code></li>
<li>åœ¨è·³å‡ºçš„å°è©±æ¡†å‘½ä»¤åˆ—å¾Œè¼¸å…¥æˆ–æ‰¾åˆ° <code>&gt;Preferences: Open User Settings</code></li>
<li>é»æ“Šæœå°‹åˆ—ä¸‹æ–¹çš„ <code>...</code> åœ–ç¤ºï¼Œä¸¦é¸å– ã€ŒOpen settings.jsonã€ï¼Œè²¼ä¸Šä¸‹åˆ—å…§å®¹<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;auto-rename-tag.activationOnLanguage&quot;: [</span><br><span class="line">        &quot;html&quot;,</span><br><span class="line">        &quot;xml&quot;,</span><br><span class="line">        &quot;php&quot;,</span><br><span class="line">        &quot;javascript&quot;,</span><br><span class="line">        &quot;vue&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;editor.formatOnSave&quot;: false,</span><br><span class="line">    &quot;editor.minimap.enabled&quot;: false,</span><br><span class="line">    &quot;editor.minimap.renderCharacters&quot;: false,</span><br><span class="line">    &quot;editor.rulers&quot;: [</span><br><span class="line">        80,</span><br><span class="line">        120</span><br><span class="line">    ],</span><br><span class="line">    &quot;gitlens.advanced.messages&quot;: &#123;</span><br><span class="line">        &quot;suppressShowKeyBindingsNotice&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;prettier.singleQuote&quot;: true,</span><br><span class="line">    &quot;todo-tree.customHighlight&quot;: &#123;</span><br><span class="line">        &quot;FIXME&quot;: &#123;&#125;,</span><br><span class="line">        &quot;TODO&quot;: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;todo-tree.defaultHighlight&quot;: &#123;</span><br><span class="line">        &quot;foreground&quot;: &quot;green&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;none&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;todohighlight.include&quot;: [</span><br><span class="line">        &quot;**/*.js&quot;,</span><br><span class="line">        &quot;**/*.jsx&quot;,</span><br><span class="line">        &quot;**/*.ts&quot;,</span><br><span class="line">        &quot;**/*.tsx&quot;,</span><br><span class="line">        &quot;**/*.html&quot;,</span><br><span class="line">        &quot;**/*.php&quot;,</span><br><span class="line">        &quot;**/*.css&quot;,</span><br><span class="line">        &quot;**/*.scss&quot;,</span><br><span class="line">        &quot;**/*.cs&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;workbench.colorTheme&quot;: &quot;Dracula Soft&quot;,</span><br><span class="line">    &quot;workbench.iconTheme&quot;: &quot;vscode-icons&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://code.visualstudio.com/docs/editor/extension-gallery#_command-line-extension-management">Command line extension management</a></li>
<li><a href="https://code.visualstudio.com/docs/editor/extension-gallery#_workspace-recommended-extensions">Workspace Recommended Extensions</a></li>
<li><a href="http://www.css88.com/archives/9507">ä½¿ç”¨é¡¶çº§ VSCode æ‰©å±•æ¥åŠ å¿«å¼€å‘ JavaScript</a></li>
<li><a href="https://gist.github.com/doggy8088/6539a140f28924d3a1f053a8d3a9f49e">Will ä¿å“¥çš„ VSCode ä½¿ç”¨è€…è¨­å®šæª”</a></li>
</ul>
]]></content>
      <categories>
        <category>editor</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>extensions</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨ vs code ä½¿ç”¨ php cs fixer é€²è¡Œ coding style çš„æ ¼å¼ä¿®æ­£</title>
    <url>/2017/2017102302-vscode-extension-php-cs-fixer.html</url>
    <content><![CDATA[<p>åœ¨ vs code ä¸­ï¼Œä½¿ç”¨ PSR1ã€PSR2 åŠ Symfony çš„ Coding Style é€²è¡Œæ ¼å¼ä¿®æ­£ã€‚</p>
<h2 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h2><ol>
<li><p>åœ¨ command line ä½¿ç”¨ homebrew å®‰è£ php cs fixer</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ brew install php-cs-fixer</span><br></pre></td></tr></table></figure>
 <span id="more"></span>
</li>
<li><p>åœ¨ vs code å®‰è£ extension - ç”± junstyle é–‹ç™¼çš„ php cs fixerï¼Œextension_id <code>junstyle.php-cs-fixer</code></p>
</li>
<li><p>å…¶ä»–å®‰è£æ–¹å¼å¯åƒè€ƒ <a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer#installation">Install guide</a></p>
</li>
</ol>
<h2 id="è¨­å®š"><a href="#è¨­å®š" class="headerlink" title="è¨­å®š"></a>è¨­å®š</h2><ol>
<li><p>å¿«é€Ÿéµ <code>cmd + shift + p</code> å¾Œè¼¸å…¥ <code>workspace settings</code> è²¼ä¸Š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;php.suggest.basic&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php.validate.executablePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;php&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.executablePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;php-cs-fixer&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.executablePathWindows&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span>   <span class="comment">//eg: php-cs-fixer.bat</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.onsave&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.rules&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.config&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.php_cs&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.allowRisky&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.pathMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;override&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.autoFixByBracket&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.autoFixBySemicolon&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.formatHtml&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;php-cs-fixer.documentFormattingProvider&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p> èªªæ˜ï¼š</p>
<ul>
<li><code>&quot;php-cs-fixer.onsave&quot;: true,</code>: true ç‚ºå­˜æª”æ™‚å³åŸ·è¡Œã€‚æˆ‘å€‹äººç¿’æ…£æ˜¯è¨­å®šæˆ falseï¼Œåœ¨ç¢ºå®šç¨‹å¼æ²’å•é¡Œå¾Œæ‰åŸ·è¡Œæª¢æŸ¥ï¼Œå› æ­¤å¿…é ˆæŒ‰å³éµï¼Œå†å¾é¸å–®ä¸­é»æ“Šã€ŒFormat Documentã€é€²è¡Œæª¢æŸ¥ã€‚</li>
<li><code>&quot;php-cs-fixer.rules&quot;: &quot;&quot;,</code>: ç•™ç©ºå­—ä¸²</li>
<li><code>&quot;php-cs-fixer.config&quot;: &quot;.php_cs&quot;,</code>: ä½¿ç”¨ project root path ä¸‹çš„ config file æœ€ç‚º formating åŸºæº–</li>
</ul>
</li>
<li><p>åœ¨ project root æ–°å¢æª”æ¡ˆ <code>.php_cs</code>ï¼Œå…§å®¹å¦‚ä¸‹</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$header</span> = &lt;&lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">This file is part of PHP CS Fixer.</span><br><span class="line"></span><br><span class="line">(c) Fabien Potencier &lt;fabien@symfony.com&gt;</span><br><span class="line">    Dariusz RumiÅ„ski &lt;dariusz.ruminski@gmail.com&gt;</span><br><span class="line"></span><br><span class="line">This source file is subject to the MIT license that is bundled</span><br><span class="line">with this source code in the file LICENSE.</span><br><span class="line">EOF;</span><br><span class="line"></span><br><span class="line"><span class="variable">$finder</span> = <span class="title class_">PhpCsFixer\Finder</span>::<span class="title function_ invoke__">create</span>()</span><br><span class="line">    -&gt;<span class="title function_ invoke__">exclude</span>(<span class="string">&#x27;tests/Fixtures&#x27;</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">in</span>(<span class="keyword">__DIR__</span>)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="variable">$config</span> = <span class="title class_">PhpCsFixer\Config</span>::<span class="title function_ invoke__">create</span>()</span><br><span class="line">    -&gt;<span class="title function_ invoke__">setRiskyAllowed</span>(<span class="literal">true</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">setRules</span>([</span><br><span class="line">        <span class="string">&#x27;@PHP56Migration&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;@PHPUnit60Migration:risky&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;@PSR1&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;@PSR2&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;@Symfony&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;@Symfony:risky&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;align_multiline_comment&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;array_indentation&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;array_syntax&#x27;</span> =&gt; [<span class="string">&#x27;syntax&#x27;</span> =&gt; <span class="string">&#x27;short&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;blank_line_before_statement&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;binary_operator_spaces&#x27;</span> =&gt; [</span><br><span class="line">            <span class="string">&#x27;align_double_arrow&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&#x27;align_equals&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;combine_consecutive_issets&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;combine_consecutive_unsets&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;comment_to_phpdoc&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;compact_nullable_typehint&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;concat_space&#x27;</span> =&gt; [<span class="string">&#x27;spacing&#x27;</span> =&gt; <span class="string">&#x27;one&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;escape_implicit_backslashes&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;explicit_indirect_variable&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;explicit_string_variable&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;final_internal_class&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;fully_qualified_strict_types&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;function_to_constant&#x27;</span> =&gt; [<span class="string">&#x27;functions&#x27;</span> =&gt; [<span class="string">&#x27;get_class&#x27;</span>, <span class="string">&#x27;get_called_class&#x27;</span>, <span class="string">&#x27;php_sapi_name&#x27;</span>, <span class="string">&#x27;phpversion&#x27;</span>, <span class="string">&#x27;pi&#x27;</span>]],</span><br><span class="line">        //<span class="string">&#x27;header_comment&#x27;</span> =&gt; [<span class="string">&#x27;header&#x27;</span> =&gt; <span class="variable">$header</span>],</span><br><span class="line">        <span class="string">&#x27;heredoc_to_nowdoc&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;increment_style&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&#x27;list_syntax&#x27;</span> =&gt; [<span class="string">&#x27;syntax&#x27;</span> =&gt; <span class="string">&#x27;short&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;logical_operators&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;method_argument_space&#x27;</span> =&gt; [<span class="string">&#x27;on_multiline&#x27;</span> =&gt; <span class="string">&#x27;ensure_fully_multiline&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;method_chaining_indentation&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;multiline_comment_opening_closing&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_alternative_syntax&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_binary_string&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_extra_blank_lines&#x27;</span> =&gt; [<span class="string">&#x27;tokens&#x27;</span> =&gt; [<span class="string">&#x27;break&#x27;</span>, <span class="string">&#x27;continue&#x27;</span>, <span class="string">&#x27;extra&#x27;</span>, <span class="string">&#x27;return&#x27;</span>, <span class="string">&#x27;throw&#x27;</span>, <span class="string">&#x27;use&#x27;</span>, <span class="string">&#x27;parenthesis_brace_block&#x27;</span>, <span class="string">&#x27;square_brace_block&#x27;</span>, <span class="string">&#x27;curly_brace_block&#x27;</span>]],</span><br><span class="line">        <span class="string">&#x27;no_null_property_initialization&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_short_echo_tag&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_superfluous_elseif&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_unneeded_curly_braces&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_unneeded_final_method&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_unreachable_default_argument_value&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_unset_on_property&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_useless_else&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;no_useless_return&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;ordered_class_elements&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;ordered_imports&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;php_unit_internal_class&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;php_unit_ordered_covers&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;php_unit_set_up_tear_down_visibility&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;php_unit_strict&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;php_unit_test_annotation&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;php_unit_test_case_static_method_calls&#x27;</span> =&gt; [<span class="string">&#x27;call_type&#x27;</span> =&gt; <span class="string">&#x27;this&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;php_unit_test_class_requires_covers&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;phpdoc_add_missing_param_annotation&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;phpdoc_order&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;phpdoc_trim_consecutive_blank_line_separation&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;phpdoc_types_order&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;return_assignment&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;semicolon_after_instruction&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;single_line_comment_style&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;strict_comparison&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;strict_param&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;string_line_ending&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;ternary_operator_spaces&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;trim_array_spaces&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;unary_operator_spaces&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;yoda_style&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&#x27;whitespace_after_comma_in_array&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">    ])</span><br><span class="line">    -&gt;<span class="title function_ invoke__">setFinder</span>(<span class="variable">$finder</span>)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">// special handling of fabbot.io service if it&#x27;s using too old PHP CS Fixer version</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span> !== <span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;FABBOT_IO&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="title class_">PhpCsFixer\FixerFactory</span>::<span class="title function_ invoke__">create</span>()</span><br><span class="line">            -&gt;<span class="title function_ invoke__">registerBuiltInFixers</span>()</span><br><span class="line">            -&gt;<span class="title function_ invoke__">registerCustomFixers</span>(<span class="variable">$config</span>-&gt;<span class="title function_ invoke__">getCustomFixers</span>())</span><br><span class="line">            -&gt;<span class="title function_ invoke__">useRuleSet</span>(<span class="keyword">new</span> <span class="title class_">PhpCsFixer\RuleSet</span>(<span class="variable">$config</span>-&gt;<span class="title function_ invoke__">getRules</span>()));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (PhpCsFixer\ConfigurationException\InvalidConfigurationException <span class="variable">$e</span>) &#123;</span><br><span class="line">        <span class="variable">$config</span>-&gt;<span class="title function_ invoke__">setRules</span>([]);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="built_in">UnexpectedValueException</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">        <span class="variable">$config</span>-&gt;<span class="title function_ invoke__">setRules</span>([]);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="built_in">InvalidArgumentException</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">        <span class="variable">$config</span>-&gt;<span class="title function_ invoke__">setRules</span>([]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="variable">$config</span>;</span><br></pre></td></tr></table></figure>

<p> èªªæ˜ï¼š</p>
<ul>
<li>åŠ å…¥ <code>&#39;@PSR1&#39; =&gt; true,</code> åŠ <code>&#39;@Symfony&#39; =&gt; true,</code></li>
</ul>
</li>
<li><p>é‡æ–°å•Ÿå‹• vs codeï¼ˆå»ºè­°ä½¿ç”¨ <code>cmd + Q</code>ï¼Œå†é‡æ–°å•Ÿå‹•ï¼‰</p>
</li>
<li><p>ç·¨è¼¯æª”æ¡ˆå¾Œå­˜æª”ï¼Œå³è‡ªå‹•åŸ·è¡Œ php-cs-fixer é€²è¡Œ coding style ä¿®æ­£</p>
</li>
</ol>
]]></content>
      <categories>
        <category>editor</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>coding style</tag>
        <tag>extensions</tag>
        <tag>php cs fixer</tag>
      </tags>
  </entry>
  <entry>
    <title>docker-compose é–‹ç™¼ç’°å¢ƒï¼Œå¦‚ä½•å»ºç«‹ storage çš„ symbolic linkï¼Ÿ</title>
    <url>/2017/2017110701-create-laravel-storage-symbolic-link-docker.html</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ˜éšŠä½¿ç”¨ <code>docker-compose</code> å»ºç«‹é–‹ç™¼ç’°å¢ƒï¼Œæ–¹ä¾¿å‰ç«¯å·¥ç¨‹å¸«åœ¨ä¸å®‰è£ PHP åŠ MySQL çš„æƒ…æ³ä¸‹ä¹Ÿå¯ä»¥é€²è¡ŒåŸºæ–¼ Laravel framework çš„å°ˆæ¡ˆé–‹ç™¼ã€‚<br>ä½†å•é¡Œå‰›å¥½ç™¼ç”Ÿåœ¨ä½¿ç”¨ <a href="https://laravel.com/docs/5.5/filesystem">Laravel File Storage</a> å­˜æ”¾çš„åœ–ç‰‡æª”ï¼Œç„¡æ³•é€šé Browser ç€è¦½ã€‚æŸ¥åˆ°çš„åŸå› æ˜¯ <a href="https://laravel.com/docs/5.5/filesystem#configuration"><code>storage</code></a> é€™å€‹ symbolic link çš„æŒ‡å‘éŒ¯èª¤äº†ã€‚<br>ç›®å‰æ‰¾åˆ°çš„è§£æ³•æ˜¯æ‰‹å‹•é€²å…¥åˆ° docker çš„ nginx container å¾Œå†å»ºç«‹ã€‚è€Œ<strong>ä¸æ˜¯</strong>ç›´æ¥ä½¿ç”¨ <code>$ php artisan storage:link</code></p>
 <span id="more"></span>
<h2 id="æ“ä½œæ­¥é©Ÿ"><a href="#æ“ä½œæ­¥é©Ÿ" class="headerlink" title="æ“ä½œæ­¥é©Ÿ"></a>æ“ä½œæ­¥é©Ÿ</h2><ol>
<li><p>ç§»é™¤å·¥ä½œç›®éŒ„ä¸‹çš„ <code>public/storage</code> é€™å€‹ symbolic link</p>
</li>
<li><p>æ‰¾åˆ° docker çš„ nginx å®¹å™¨ CONTAINER ID</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">baba480659ee        nginx:latest                    &quot;nginx -g &#x27;daemon ...&quot;   16 minutes ago      Up 16 minutes       0.0.0.0:80-&gt;80/tcp       hpclaravelpaganinipluscom_web_1</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€²å…¥ docker çš„ nginx å®¹å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo docker exec -ti &#123;CONTAINER ID&#125; bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ docker çš„ nginx å®¹å™¨åŸ·è¡Œ symbolic link çš„å»ºç«‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ln -s /code/storage/app/public /code/public/storage</span><br></pre></td></tr></table></figure>
</li>
<li><p>æª¢æŸ¥å»ºç«‹çš„çµæœæ˜¯å¦æ­£ç¢º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ls -l</span><br><span class="line">drwxr-xr-x 13 root root  442 Nov  7 06:28 assets</span><br><span class="line">drwxr-xr-x 24 root root  816 Oct 26 04:08 css</span><br><span class="line">-rw-r--r--  1 root root 5430 Oct 26 04:08 favicon.ico</span><br><span class="line">drwxr-xr-x 13 root root  442 Nov  7 04:49 images</span><br><span class="line">-rw-r--r--  1 root root 1823 Sep 19 04:07 index.php</span><br><span class="line">drwxr-xr-x  6 root root  204 Oct 26 04:08 js</span><br><span class="line">-rw-r--r--  1 root root   24 Sep 19 04:07 robots.txt</span><br><span class="line">lrwxrwxrwx  1 root root   24 Nov  7 06:31 storage -&gt; /code/storage/app/public</span><br><span class="line">drwxr-xr-x 10 root root  340 Oct 26 04:08 vendor</span><br><span class="line">-rw-r--r--  1 root root  914 Sep 19 04:07 web.config</span><br><span class="line">drwxr-xr-x  5 root root  170 Nov  7 01:32 yaml</span><br></pre></td></tr></table></figure>
</li>
<li><p>Browser é–‹å•Ÿåœ–ç‰‡ç¶²ç«™ï¼Œä¾‹å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost/storage/4BWGjwW0p6iENjseaHZphhorGBUJTPkd888oiMNh.jpeg</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="åƒè€ƒè³‡æ–™-References"><a href="#åƒè€ƒè³‡æ–™-References" class="headerlink" title="åƒè€ƒè³‡æ–™  References"></a>åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://laravel.com/docs/5.5/filesystem">Laravel File Storage</a></li>
<li><a href="https://philipzheng.gitbooks.io/docker_practice/content/container/enter.html">ã€ŠDocker â€”â€” å¾å…¥é–€åˆ°å¯¦è¸ã€‹æ­£é«”ä¸­æ–‡ç‰ˆ - é€²å…¥å®¹å™¨</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/exec/#run-docker-exec-on-a-running-container">docker docs - Run docker exec on a running container</a></li>
</ul>
]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>laravel</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨ VS code è¨­å®š go linter</title>
    <url>/2022/2022090601-golang-linter-in-vscode.html</url>
    <content><![CDATA[<p>åœ¨ VS code æ’°å¯« <code>go</code> ç¨‹å¼çš„éç¨‹ä¸­ï¼Œè¦æª¢æŸ¥æ˜¯å¦ç¬¦åˆ coding styleï¼Œä»¥åŠæé†’å“ªäº›è®Šæ•¸æˆ–åƒæ•¸æœ‰å®šç¾©å»æ²’ä½¿ç”¨ï¼Œè¨­å®šå¥½ go linter å°±æ²’æœ‰ç…©æƒ±ã€‚</p>
<span id="more"></span>

<h2 id="1-ç’°å¢ƒ-Environment"><a href="#1-ç’°å¢ƒ-Environment" class="headerlink" title="1. ç’°å¢ƒ  Environment"></a>1. ç’°å¢ƒ  Environment</h2><ul>
<li>macOS 12.5.1</li>
<li>Visual Studio Code v1.71.0</li>
<li>go v1.18</li>
</ul>
<h2 id="2-é–‹å§‹è¨­å®š-Configuration"><a href="#2-é–‹å§‹è¨­å®š-Configuration" class="headerlink" title="2. é–‹å§‹è¨­å®š  Configuration"></a>2. é–‹å§‹è¨­å®š  Configuration</h2><h3 id="2-1-å®‰è£-Extension"><a href="#2-1-å®‰è£-Extension" class="headerlink" title="2.1. å®‰è£ Extension"></a>2.1. å®‰è£ Extension</h3><p>åœ¨ VS code å®‰è£ Extension: Go</p>
<p><img src="/uploads/2022/090501_01.extension_go.png" alt="extension go"></p>
<h3 id="2-2-å®‰è£-Go-tools"><a href="#2-2-å®‰è£-Go-tools" class="headerlink" title="2.2. å®‰è£ Go tools"></a>2.2. å®‰è£ Go tools</h3><p>æŒ‰ä¸‹ <code>cmd + shift + p</code> é–‹å•Ÿ Command Paletteï¼Œä¸¦ä¸”è¼¸å…¥ <code>go install</code> å¾Œé¸å– <code>Go: Install/Update Tools</code><br><img src="/uploads/2022/090501_02.go_install.png" alt="go install"></p>
<p>é¸å– <code>staticcheck</code> åŠ <code>gopls</code> å¾Œï¼ŒæŒ‰ä¸‹ <code>OK</code> å³é–‹å§‹å®‰è£ã€‚<br><img src="/uploads/2022/090501_03.install_tools.png" alt="install tools"></p>
<h3 id="2-3-è¨­å®šåƒæ•¸"><a href="#2-3-è¨­å®šåƒæ•¸" class="headerlink" title="2.3. è¨­å®šåƒæ•¸"></a>2.3. è¨­å®šåƒæ•¸</h3><blockquote>
<p>æ³¨æ„ï¼šå®Œæˆä¸‹åˆ—çš„è¨­å®šï¼Œä¸€å®šè¦é—œé–‰ VS code å†é‡æ–°é–‹å•Ÿï¼Œæ‰ä¸æœƒæœ‰æ€ªæ€ªçš„å•é¡Œå‡ºç¾ã€‚</p>
</blockquote>
<p>æŒ‰ä¸‹ <code>cmd + shift + p</code> é–‹å•Ÿ Command Paletteï¼Œä¸¦ä¸”è¼¸å…¥ <code>user</code> å¾Œé¸å– <code>Preferences: Open User Settings (JSON)</code><br><img src="/uploads/2022/090501_04.user_settings.png" alt="open user settings"></p>
<p>åœ¨ <code>settings.json</code> æª”æ¡ˆå…§è²¼ä¸Š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &quot;go.lintFlags&quot;: [&quot;-checks&quot;, &quot;all&quot;],</span></span><br><span class="line"><span class="attr">&quot;gopls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;analyses&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ST1003&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ST1016&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ST1020&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ST1021&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ST1022&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;unusedparams&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;formatting.gofumpt&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;staticcheck&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// &quot;ui.diagnostic.analyses&quot;: &#123;</span></span><br><span class="line">  <span class="comment">//   &quot;unusedparams&quot;: true</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">&quot;ui.semanticTokens&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ui.completion.usePlaceholders&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>åªè¦é–‹å•Ÿ <code>.go</code> æª”æ¡ˆï¼Œå°±æœƒé€£ç›¸åŒ package çš„æª”æ¡ˆä¸€åŒæª¢æŸ¥ï¼Œå¯ä»¥çœ‹åˆ° warning å¦‚ä¸‹åœ–ï¼Œ<br><img src="/uploads/2022/090501_05.warnings.png" alt="check results"></p>
<p>å¦‚æœä¸æƒ³é€™éº¼è‡ªå‹•çš„æª¢æŸ¥ï¼Œå¯ä»¥åœ¨ <code>settings.json</code> æ”¹è²¼ä¸Šï¼Œ</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;go.lintFlags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-checks&quot;</span><span class="punctuation">,</span> <span class="string">&quot;all&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;gopls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// &quot;analyses&quot;: &#123;</span></span><br><span class="line">  <span class="comment">//   &quot;ST1003&quot;: true,</span></span><br><span class="line">  <span class="comment">//   &quot;ST1016&quot;: true,</span></span><br><span class="line">  <span class="comment">//   &quot;ST1020&quot;: true,</span></span><br><span class="line">  <span class="comment">//   &quot;ST1021&quot;: true,</span></span><br><span class="line">  <span class="comment">//   &quot;ST1022&quot;: true,</span></span><br><span class="line">  <span class="comment">//   &quot;unusedparams&quot;: true</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">&quot;formatting.gofumpt&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// &quot;staticcheck&quot;: true,</span></span><br><span class="line">  <span class="attr">&quot;ui.diagnostic.analyses&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;unusedparams&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ui.semanticTokens&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ui.completion.usePlaceholders&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ™‚è¦æª¢æŸ¥ <code>User Settings</code> çš„ <code>Go: Lint Tool</code> åŠ <code>Go: Lint Flags</code> æ˜¯å¦è¨­å®šæ­£ç¢ºã€‚<br><img src="/uploads/2022/090501_06.lint_tool_settings.png" alt="lint tool - staticcheck"></p>
<p>æŒ‰ä¸‹ <code>cmd + shift + p</code> é–‹å•Ÿ Command Paletteï¼Œä¸¦ä¸”è¼¸å…¥ <code>lint</code> å¾Œé¸å– <code>Go: Lint Current Package</code> ï¼ˆä¹Ÿå¯ä»¥é¸æ“‡ <code>Go: Lint Workspace</code>ï¼‰å°±å¯ä»¥çœ‹æª¢æŸ¥çš„çµæœäº†<br><img src="/uploads/2022/090501_07.execute_lint.png" alt="lint tool - staticcheck"></p>
<p>çœŸå¿ƒæ¨è–¦ <a href="https://www.jetbrains.com/go/">Goland</a>ï¼Œä¸è¦åšä»»ä½•è¨­å®š ( ^.ï¼œ )</p>
<h2 id="3-åƒè€ƒè³‡æ–™-References"><a href="#3-åƒè€ƒè³‡æ–™-References" class="headerlink" title="3. åƒè€ƒè³‡æ–™  References"></a>3. åƒè€ƒè³‡æ–™  References</h2><ul>
<li><a href="https://code.visualstudio.com/docs/languages/go">Go in Visual Studio Code</a></li>
<li><a href="https://qiita.com/yagi_eng/items/1c34f9691128c51846e7">ã€Goã€‘ãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆãªlinter staticcheckã®è¨­å®šæ–¹æ³•</a></li>
<li><a href="https://scrapbox.io/kidaaam-92022284/go_staticcheck_%E3%81%AE%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E7%84%A1%E5%8A%B9%E3%81%AA%E9%A0%85%E7%9B%AE%E3%82%92%E4%B8%80%E9%83%A8%E6%9C%89%E5%8A%B9%E5%8C%96%E3%81%99%E3%82%8B">go staticcheck ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç„¡åŠ¹ãªé …ç›®ã‚’ä¸€éƒ¨æœ‰åŠ¹åŒ–ã™ã‚‹</a></li>
<li><a href="https://stackoverflow.com/questions/58018729/go-linter-in-vs-code-not-working-for-packages-across-multiple-files">Go linter in VS code not working for packages across multiple files?</a></li>
<li><a href="https://github.com/golang/vscode-go/discussions/1493">How to enable a check for staticcheck? #1493</a></li>
<li><a href="https://staticcheck.io/docs/checks#ST1020">STATICCHECK - Explanations for all checks in Staticcheck</a></li>
</ul>
]]></content>
      <categories>
        <category>development</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>coding style</tag>
        <tag>golang</tag>
      </tags>
  </entry>
</search>
